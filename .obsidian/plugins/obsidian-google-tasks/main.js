/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Wp=Object.create;var ai=Object.defineProperty,Yp=Object.defineProperties,Qp=Object.getOwnPropertyDescriptor,Jp=Object.getOwnPropertyDescriptors,Xp=Object.getOwnPropertyNames,gu=Object.getOwnPropertySymbols,Zp=Object.getPrototypeOf,yu=Object.prototype.hasOwnProperty,eg=Object.prototype.propertyIsEnumerable;var vu=(e,t,n)=>t in e?ai(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rt=(e,t)=>{for(var n in t||(t={}))yu.call(t,n)&&vu(e,n,t[n]);if(gu)for(var n of gu(t))eg.call(t,n)&&vu(e,n,t[n]);return e},Vt=(e,t)=>Yp(e,Jp(t)),mu=e=>ai(e,"__esModule",{value:!0});var K=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tg=(e,t)=>{mu(e);for(var n in t)ai(e,n,{get:t[n],enumerable:!0})},rg=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Xp(t))!yu.call(e,r)&&r!=="default"&&ai(e,r,{get:()=>t[r],enumerable:!(n=Qp(t,r))||n.enumerable});return e},yt=e=>rg(mu(ai(e!=null?Wp(Zp(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var I=(e,t,n)=>new Promise((r,i)=>{var a=c=>{try{o(n.next(c))}catch(u){i(u)}},s=c=>{try{o(n.throw(c))}catch(u){i(u)}},o=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,s);o((n=n.apply(e,t)).next())});var Vs=K((h_,Zi)=>{var Eu,Tu,_u,xu,Su,Au,wu,bu,Iu,Ji,Ms,ku,Bu,Nu,hn,Ru,Lu,Du,Ou,Pu,Uu,Fu,qu,Xi;(function(e){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(r){e(n(t,n(r)))}):typeof Zi=="object"&&typeof Zi.exports=="object"?e(n(t,n(Zi.exports))):e(n(t));function n(r,i){return r!==t&&(typeof Object.create=="function"?Object.defineProperty(r,"__esModule",{value:!0}):r.__esModule=!0),function(a,s){return r[a]=i?i(a,s):s}}})(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])};Eu=function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(r,i);function a(){this.constructor=r}r.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},Tu=Object.assign||function(r){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},_u=function(r,i){var a={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&i.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)i.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(a[s[o]]=r[s[o]]);return a},xu=function(r,i,a,s){var o=arguments.length,c=o<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,a):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,i,a,s);else for(var l=r.length-1;l>=0;l--)(u=r[l])&&(c=(o<3?u(c):o>3?u(i,a,c):u(i,a))||c);return o>3&&c&&Object.defineProperty(i,a,c),c},Su=function(r,i){return function(a,s){i(a,s,r)}},Au=function(r,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,i)},wu=function(r,i,a,s){function o(c){return c instanceof a?c:new a(function(u){u(c)})}return new(a||(a=Promise))(function(c,u){function l(v){try{h(s.next(v))}catch(g){u(g)}}function f(v){try{h(s.throw(v))}catch(g){u(g)}}function h(v){v.done?c(v.value):o(v.value).then(l,f)}h((s=s.apply(r,i||[])).next())})},bu=function(r,i){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,o,c,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(h){return function(v){return f([h,v])}}function f(h){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,o&&(c=h[0]&2?o.return:h[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,h[1])).done)return c;switch(o=0,c&&(h=[h[0]&2,c.value]),h[0]){case 0:case 1:c=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,o=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(h[0]===6||h[0]===2)){a=0;continue}if(h[0]===3&&(!c||h[1]>c[0]&&h[1]<c[3])){a.label=h[1];break}if(h[0]===6&&a.label<c[1]){a.label=c[1],c=h;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(h);break}c[2]&&a.ops.pop(),a.trys.pop();continue}h=i.call(r,a)}catch(v){h=[6,v],o=0}finally{s=c=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Iu=function(r,i){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&Xi(i,r,a)},Xi=Object.create?function(r,i,a,s){s===void 0&&(s=a),Object.defineProperty(r,s,{enumerable:!0,get:function(){return i[a]}})}:function(r,i,a,s){s===void 0&&(s=a),r[s]=i[a]},Ji=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&r[i],s=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Ms=function(r,i){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var s=a.call(r),o,c=[],u;try{for(;(i===void 0||i-- >0)&&!(o=s.next()).done;)c.push(o.value)}catch(l){u={error:l}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(u)throw u.error}}return c},ku=function(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(Ms(arguments[i]));return r},Bu=function(){for(var r=0,i=0,a=arguments.length;i<a;i++)r+=arguments[i].length;for(var s=Array(r),o=0,i=0;i<a;i++)for(var c=arguments[i],u=0,l=c.length;u<l;u++,o++)s[o]=c[u];return s},Nu=function(r,i,a){if(a||arguments.length===2)for(var s=0,o=i.length,c;s<o;s++)(c||!(s in i))&&(c||(c=Array.prototype.slice.call(i,0,s)),c[s]=i[s]);return r.concat(c||Array.prototype.slice.call(i))},hn=function(r){return this instanceof hn?(this.v=r,this):new hn(r)},Ru=function(r,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(r,i||[]),o,c=[];return o={},u("next"),u("throw"),u("return"),o[Symbol.asyncIterator]=function(){return this},o;function u(C){s[C]&&(o[C]=function(T){return new Promise(function(_,U){c.push([C,T,_,U])>1||l(C,T)})})}function l(C,T){try{f(s[C](T))}catch(_){g(c[0][3],_)}}function f(C){C.value instanceof hn?Promise.resolve(C.value.v).then(h,v):g(c[0][2],C)}function h(C){l("next",C)}function v(C){l("throw",C)}function g(C,T){C(T),c.shift(),c.length&&l(c[0][0],c[0][1])}},Lu=function(r){var i,a;return i={},s("next"),s("throw",function(o){throw o}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(o,c){i[o]=r[o]?function(u){return(a=!a)?{value:hn(r[o](u)),done:o==="return"}:c?c(u):u}:c}},Du=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],a;return i?i.call(r):(r=typeof Ji=="function"?Ji(r):r[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(c){a[c]=r[c]&&function(u){return new Promise(function(l,f){u=r[c](u),o(l,f,u.done,u.value)})}}function o(c,u,l,f){Promise.resolve(f).then(function(h){c({value:h,done:l})},u)}},Ou=function(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r};var n=Object.create?function(r,i){Object.defineProperty(r,"default",{enumerable:!0,value:i})}:function(r,i){r.default=i};Pu=function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var a in r)a!=="default"&&Object.prototype.hasOwnProperty.call(r,a)&&Xi(i,r,a);return n(i,r),i},Uu=function(r){return r&&r.__esModule?r:{default:r}},Fu=function(r,i,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?r!==i||!s:!i.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(r):s?s.value:i.get(r)},qu=function(r,i,a,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?r!==i||!o:!i.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(r,a):o?o.value=a:i.set(r,a),a},e("__extends",Eu),e("__assign",Tu),e("__rest",_u),e("__decorate",xu),e("__param",Su),e("__metadata",Au),e("__awaiter",wu),e("__generator",bu),e("__exportStar",Iu),e("__createBinding",Xi),e("__values",Ji),e("__read",Ms),e("__spread",ku),e("__spreadArrays",Bu),e("__spreadArray",Nu),e("__await",hn),e("__asyncGenerator",Ru),e("__asyncDelegator",Lu),e("__asyncValues",Du),e("__makeTemplateObject",Ou),e("__importStar",Pu),e("__importDefault",Uu),e("__classPrivateFieldGet",Fu),e("__classPrivateFieldSet",qu)})});var Mu=K(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.isDate=Sr.isComparable=Sr.isIterable=void 0;Sr.isIterable=e=>!(e==null||e[Symbol.iterator]==null);Sr.isComparable=e=>{let t=Object.prototype.toString,n=e;return n.compare!=null&&t.call(n.compare).endsWith("Function]")};Sr.isDate=e=>Object.prototype.toString.call(e).endsWith("Date]")});var Gu=K(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0})});var Ks=K(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});var ng=Vs(),Gs=Mu(),ig=(e,t)=>e-t,ag=(e,t)=>Number(e-t),sg=(e,t)=>e.localeCompare(t),og=(e,t)=>e.getTime()-t.getTime(),dn={number:ig,string:sg,Date:og,bigInt:ag,none:()=>0},cg=e=>{if(typeof e=="number")return dn.number;if(typeof e=="string")return dn.string;if(typeof e=="bigint")return dn.bigInt;if(Gs.isDate(e))return dn.Date;if(Gs.isComparable(e))return(t,n)=>t.compare(n);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},Kr=class extends Map{constructor(t,n){super();this.specifiedCompareFn=!1,this.isCompareFn=r=>typeof r=="function",this.compareFn=dn.none,this.sortedKeys=[],Gs.isIterable(t)&&this._constructor(t,n),this.isCompareFn(t)&&this._constructor(null,t),t==null&&this._constructor(null,n)}get comparator(){return this.compareFn}compare(t,n){return Math.sign(this.compareFn(t,n))}_constructor(t,n){if(this.compareFn=n==null?dn.none:n,this.specifiedCompareFn=n!=null,t!=null)for(let r of t)this.set(...r)}static fromMap(t,n){let r=new Kr(n);return r.setAll(t),r}duplicate(){return Kr.fromMap(this,this.compareFn)}toMap(){let t=new Map,n=Array.from(super.entries());return n.sort((r,i)=>this.compareFn(r[0],i[0])),n.forEach(([r,i])=>{t.set(r,i)}),t}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(t){let n=this.sortedKeys.find(r=>this.comparator(r,t)===0);if(n!=null)return super.get(n)}set(t,n){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=cg(t),this.specifiedCompareFn=!0);let r=this.sortedKeys.find(i=>this.compareFn(i,t)===0);return r==null?(this.sortedKeys.push(t),super.set(t,n)):super.set(r,n),this.sortedKeys.sort(this.compareFn),this}setAll(t){return t.forEach((n,r)=>{this.set(r,n)}),this}delete(t){return super.delete(t)?(this.sortedKeys=this.sortedKeys.filter(n=>this.compare(n,t)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(t=>super.get(t)).values()}entries(){return this.toMap().entries()}firstEntry(){let t=this.firstKey();if(t==null)return;let n=this.get(t);return n===void 0?void 0:[t,n]}firstKey(){return this.sortedKeys[0]}lastEntry(){let t=this.lastKey();if(t==null)return;let n=this.get(t);return n===void 0?void 0:[t,n]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let t=this.firstEntry();if(t!=null)return this.delete(t[0]),t}popEntry(){let t=this.lastEntry();if(t!=null)return this.delete(t[0]),t}floorEntry(t){let n=this.floorKey(t);if(n!=null){let r=this.get(n);return r===void 0?void 0:[n,r]}}floorKey(t){return this.sortedKeys.filter(r=>this.compare(r,t)<=0).reverse()[0]}ceilingEntry(t){let n=this.ceilingKey(t);if(n!=null){let r=this.get(n);return r===void 0?void 0:[n,r]}}ceilingKey(t){return this.sortedKeys.filter(r=>this.compare(r,t)>=0)[0]}lowerEntry(t){let n=this.lowerKey(t);if(n!=null){let r=this.get(n);return r===void 0?void 0:[n,r]}}lowerKey(t){return this.sortedKeys.filter(r=>this.compare(r,t)<0).reverse()[0]}higherEntry(t){let n=this.higherKey(t);if(n!=null){let r=this.get(n);return r===void 0?void 0:[n,r]}}higherKey(t){return this.sortedKeys.filter(r=>this.compare(r,t)>0)[0]}splitLower(t,n=!0){let r=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],t)<0;return n?a||this.compare(i[0],t)===0:a});return new Kr(r,this.compareFn)}splitHigher(t,n=!0){let r=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],t)>0;return n?a||this.compare(i[0],t)===0:a});return new Kr(r,this.compareFn)}forEach(t,n){Array.from(this.entries()).forEach(([r,i])=>{t(i,r,this)},n)}};ea.default=Kr;ng.__exportStar(Gu(),ea)});var sl=K((px,al)=>{"use strict";var na=Object.prototype.hasOwnProperty,Xu=Object.prototype.toString,Zu=Object.defineProperty,el=Object.getOwnPropertyDescriptor,tl=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Xu.call(t)==="[object Array]"},rl=function(t){if(!t||Xu.call(t)!=="[object Object]")return!1;var n=na.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&na.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i=="undefined"||na.call(t,i)},nl=function(t,n){Zu&&n.name==="__proto__"?Zu(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},il=function(t,n){if(n==="__proto__")if(na.call(t,n)){if(el)return el(t,n).value}else return;return t[n]};al.exports=function e(){var t,n,r,i,a,s,o=arguments[0],c=1,u=arguments.length,l=!1;for(typeof o=="boolean"&&(l=o,o=arguments[1]||{},c=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=il(o,n),i=il(t,n),o!==i&&(l&&i&&(rl(i)||(a=tl(i)))?(a?(a=!1,s=r&&tl(r)?r:[]):s=r&&rl(r)?r:{},nl(o,{name:n,newValue:e(l,s,i)})):typeof i!="undefined"&&nl(o,{name:n,newValue:i}));return o}});var cl=K((vn,ol)=>{"use strict";var ug=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof gr!="undefined")return gr;throw new Error("unable to locate global object")},gr=ug();ol.exports=vn=gr.fetch;gr.fetch&&(vn.default=gr.fetch.bind(gr));vn.Headers=gr.Headers;vn.Request=gr.Request;vn.Response=gr.Response});var ll=K((gx,ul)=>{"use strict";var Xt=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";Xt.writable=e=>Xt(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";Xt.readable=e=>Xt(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";Xt.duplex=e=>Xt.writable(e)&&Xt.readable(e);Xt.transform=e=>Xt.duplex(e)&&typeof e._transform=="function";ul.exports=Xt});var Ys=K(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.GaxiosError=void 0;var fl=class extends Error{constructor(t,n,r){super(t);this.response=r,this.config=n,this.code=r.status.toString()}};ia.GaxiosError=fl});var dl=K(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.getRetryConfig=void 0;function lg(e){return I(this,null,function*(){var t;let n=hl(e);if(!e||!e.config||!n&&!e.config.retry)return{shouldRetry:!1};n=n||{},n.currentRetryAttempt=n.currentRetryAttempt||0,n.retry=n.retry===void 0||n.retry===null?3:n.retry,n.httpMethodsToRetry=n.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],n.noResponseRetries=n.noResponseRetries===void 0||n.noResponseRetries===null?2:n.noResponseRetries;let r=[[100,199],[429,429],[500,599]];if(n.statusCodesToRetry=n.statusCodesToRetry||r,e.config.retryConfig=n,!(yield(n.shouldRetry||fg)(e)))return{shouldRetry:!1,config:e.config};let s=(n.currentRetryAttempt?0:(t=n.retryDelay)!==null&&t!==void 0?t:100)+(Math.pow(2,n.currentRetryAttempt)-1)/2*1e3;e.config.retryConfig.currentRetryAttempt+=1;let o=new Promise(c=>{setTimeout(c,s)});return n.onRetryAttempt&&n.onRetryAttempt(e),yield o,{shouldRetry:!0,config:e.config}})}aa.getRetryConfig=lg;function fg(e){let t=hl(e);if(e.name==="AbortError"||!t||t.retry===0||!e.response&&(t.currentRetryAttempt||0)>=t.noResponseRetries||!e.config.method||t.httpMethodsToRetry.indexOf(e.config.method.toUpperCase())<0)return!1;if(e.response&&e.response.status){let n=!1;for(let[r,i]of t.statusCodesToRetry){let a=e.response.status;if(a>=r&&a<=i){n=!0;break}}if(!n)return!1}return t.currentRetryAttempt=t.currentRetryAttempt||0,!(t.currentRetryAttempt>=t.retry)}function hl(e){if(e&&e.config&&e.config.retryConfig)return e.config.retryConfig}});var gl=K((mx,pl)=>{var mn=1e3,Cn=mn*60,En=Cn*60,$r=En*24,hg=$r*7,dg=$r*365.25;pl.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return pg(e);if(n==="number"&&isFinite(e))return t.long?yg(e):gg(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function pg(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*dg;case"weeks":case"week":case"w":return n*hg;case"days":case"day":case"d":return n*$r;case"hours":case"hour":case"hrs":case"hr":case"h":return n*En;case"minutes":case"minute":case"mins":case"min":case"m":return n*Cn;case"seconds":case"second":case"secs":case"sec":case"s":return n*mn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function gg(e){var t=Math.abs(e);return t>=$r?Math.round(e/$r)+"d":t>=En?Math.round(e/En)+"h":t>=Cn?Math.round(e/Cn)+"m":t>=mn?Math.round(e/mn)+"s":e+"ms"}function yg(e){var t=Math.abs(e);return t>=$r?sa(e,t,$r,"day"):t>=En?sa(e,t,En,"hour"):t>=Cn?sa(e,t,Cn,"minute"):t>=mn?sa(e,t,mn,"second"):e+" ms"}function sa(e,t,n,r){var i=t>=n*1.5;return Math.round(e/n)+" "+r+(i?"s":"")}});var vl=K((Cx,yl)=>{function vg(e){n.debug=n,n.default=n,n.coerce=c,n.disable=a,n.enable=i,n.enabled=s,n.humanize=gl(),n.destroy=u,Object.keys(e).forEach(l=>{n[l]=e[l]}),n.names=[],n.skips=[],n.formatters={};function t(l){let f=0;for(let h=0;h<l.length;h++)f=(f<<5)-f+l.charCodeAt(h),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=t;function n(l){let f,h=null,v,g;function C(...T){if(!C.enabled)return;let _=C,U=Number(new Date),B=U-(f||U);_.diff=B,_.prev=f,_.curr=U,f=U,T[0]=n.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let G=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(q,J)=>{if(q==="%%")return"%";G++;let re=n.formatters[J];if(typeof re=="function"){let j=T[G];q=re.call(_,j),T.splice(G,1),G--}return q}),n.formatArgs.call(_,T),(_.log||n.log).apply(_,T)}return C.namespace=l,C.useColors=n.useColors(),C.color=n.selectColor(l),C.extend=r,C.destroy=n.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(v!==n.namespaces&&(v=n.namespaces,g=n.enabled(l)),g),set:T=>{h=T}}),typeof n.init=="function"&&n.init(C),C}function r(l,f){let h=n(this.namespace+(typeof f=="undefined"?":":f)+l);return h.log=this.log,h}function i(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let f,h=(typeof l=="string"?l:"").split(/[\s,]+/),v=h.length;for(f=0;f<v;f++)!h[f]||(l=h[f].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function a(){let l=[...n.names.map(o),...n.skips.map(o).map(f=>"-"+f)].join(",");return n.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let f,h;for(f=0,h=n.skips.length;f<h;f++)if(n.skips[f].test(l))return!1;for(f=0,h=n.names.length;f<h;f++)if(n.names[f].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}yl.exports=vg});var ca=K((bt,oa)=>{bt.formatArgs=Cg;bt.save=Eg;bt.load=Tg;bt.useColors=mg;bt.storage=_g();bt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();bt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function mg(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Cg(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+oa.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),e.splice(r,0,t)}bt.log=console.debug||console.log||(()=>{});function Eg(e){try{e?bt.storage.setItem("debug",e):bt.storage.removeItem("debug")}catch(t){}}function Tg(){let e;try{e=bt.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function _g(){try{return localStorage}catch(e){}}oa.exports=vl()(bt);var{formatters:xg}=oa.exports;xg.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var ml=K(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});function Sg(e){return function(t,n){return new Promise((r,i)=>{e.call(this,t,n,(a,s)=>{a?i(a):r(s)})})}}Qs.default=Sg});var Tl=K((Xs,El)=>{"use strict";var Cl=Xs&&Xs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ag=require("events"),wg=Cl(ca()),bg=Cl(ml()),pi=wg.default("agent-base");function Ig(e){return Boolean(e)&&typeof e.addRequest=="function"}function Js(){let{stack:e}=new Error;return typeof e!="string"?!1:e.split(`
`).some(t=>t.indexOf("(https.js:")!==-1||t.indexOf("node:https:")!==-1)}function ua(e,t){return new ua.Agent(e,t)}(function(e){class t extends Ag.EventEmitter{constructor(r,i){super();let a=i;typeof r=="function"?this.callback=r:r&&(a=r),this.timeout=null,a&&typeof a.timeout=="number"&&(this.timeout=a.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:Js()?443:80}set defaultPort(r){this.explicitDefaultPort=r}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:Js()?"https:":"http:"}set protocol(r){this.explicitProtocol=r}callback(r,i,a){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(r,i){let a=Object.assign({},i);typeof a.secureEndpoint!="boolean"&&(a.secureEndpoint=Js()),a.host==null&&(a.host="localhost"),a.port==null&&(a.port=a.secureEndpoint?443:80),a.protocol==null&&(a.protocol=a.secureEndpoint?"https:":"http:"),a.host&&a.path&&delete a.path,delete a.agent,delete a.hostname,delete a._defaultAgent,delete a.defaultPort,delete a.createConnection,r._last=!0,r.shouldKeepAlive=!1;let s=!1,o=null,c=a.timeout||this.timeout,u=v=>{r._hadError||(r.emit("error",v),r._hadError=!0)},l=()=>{o=null,s=!0;let v=new Error(`A "socket" was not created for HTTP request before ${c}ms`);v.code="ETIMEOUT",u(v)},f=v=>{s||(o!==null&&(clearTimeout(o),o=null),u(v))},h=v=>{if(s)return;if(o!=null&&(clearTimeout(o),o=null),Ig(v)){pi("Callback returned another Agent instance %o",v.constructor.name),v.addRequest(r,a);return}if(v){v.once("free",()=>{this.freeSocket(v,a)}),r.onSocket(v);return}let g=new Error(`no Duplex stream was returned to agent-base for \`${r.method} ${r.path}\``);u(g)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(pi("Converting legacy callback function to promise"),this.promisifiedCallback=bg.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(o=setTimeout(l,c)),"port"in a&&typeof a.port!="number"&&(a.port=Number(a.port));try{pi("Resolving socket for %o request: %o",a.protocol,`${r.method} ${r.path}`),Promise.resolve(this.promisifiedCallback(r,a)).then(h,f)}catch(v){Promise.reject(v).catch(f)}}freeSocket(r,i){pi("Freeing socket %o %o",r.constructor.name,i),r.destroy()}destroy(){pi("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype})(ua||(ua={}));El.exports=ua});var _l=K(yi=>{"use strict";var kg=yi&&yi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yi,"__esModule",{value:!0});var Bg=kg(ca()),gi=Bg.default("https-proxy-agent:parse-proxy-response");function Ng(e){return new Promise((t,n)=>{let r=0,i=[];function a(){let f=e.read();f?l(f):e.once("readable",a)}function s(){e.removeListener("end",c),e.removeListener("error",u),e.removeListener("close",o),e.removeListener("readable",a)}function o(f){gi("onclose had error %o",f)}function c(){gi("onend")}function u(f){s(),gi("onerror %o",f),n(f)}function l(f){i.push(f),r+=f.length;let h=Buffer.concat(i,r);if(h.indexOf(`\r
\r
`)===-1){gi("have not received end of HTTP headers yet..."),a();return}let g=h.toString("ascii",0,h.indexOf(`\r
`)),C=+g.split(" ")[1];gi("got proxy server response: %o",g),t({statusCode:C,buffered:h})}e.on("error",u),e.on("close",o),e.on("end",c),a()})}yi.default=Ng});var wl=K(zr=>{"use strict";var Rg=zr&&zr.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(l){try{u(r.next(l))}catch(f){s(f)}}function c(l){try{u(r.throw(l))}catch(f){s(f)}}function u(l){l.done?a(l.value):i(l.value).then(o,c)}u((r=r.apply(e,t||[])).next())})},Tn=zr&&zr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zr,"__esModule",{value:!0});var xl=Tn(require("net")),Sl=Tn(require("tls")),Lg=Tn(require("url")),Dg=Tn(require("assert")),Og=Tn(ca()),Pg=Tl(),Ug=Tn(_l()),vi=Og.default("https-proxy-agent:agent"),Al=class extends Pg.Agent{constructor(t){let n;if(typeof t=="string"?n=Lg.default.parse(t):n=t,!n)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");vi("creating new HttpsProxyAgent instance: %o",n);super(n);let r=Object.assign({},n);this.secureProxy=n.secureProxy||Mg(r.protocol),r.host=r.hostname||r.host,typeof r.port=="string"&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in r)&&(r.ALPNProtocols=["http 1.1"]),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(t,n){return Rg(this,void 0,void 0,function*(){let{proxy:r,secureProxy:i}=this,a;i?(vi("Creating `tls.Socket`: %o",r),a=Sl.default.connect(r)):(vi("Creating `net.Socket`: %o",r),a=xl.default.connect(r));let s=Object.assign({},r.headers),c=`CONNECT ${`${n.host}:${n.port}`} HTTP/1.1\r
`;r.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(r.auth).toString("base64")}`);let{host:u,port:l,secureEndpoint:f}=n;qg(l,f)||(u+=`:${l}`),s.Host=u,s.Connection="close";for(let T of Object.keys(s))c+=`${T}: ${s[T]}\r
`;let h=Ug.default(a);a.write(`${c}\r
`);let{statusCode:v,buffered:g}=yield h;if(v===200){if(t.once("socket",Fg),n.secureEndpoint){let T=n.servername||n.host;if(!T)throw new Error('Could not determine "servername"');return vi("Upgrading socket connection to TLS"),Sl.default.connect(Object.assign(Object.assign({},Vg(n,"host","hostname","path","port")),{socket:a,servername:T}))}return a}a.destroy();let C=new xl.default.Socket;return C.readable=!0,t.once("socket",T=>{vi("replaying proxy buffer for failed request"),Dg.default(T.listenerCount("data")>0),T.push(g),T.push(null)}),C})}};zr.default=Al;function Fg(e){e.resume()}function qg(e,t){return Boolean(!t&&e===80||t&&e===443)}function Mg(e){return typeof e=="string"?/^https:?$/i.test(e):!1}function Vg(e,...t){let n={},r;for(r in e)t.includes(r)||(n[r]=e[r]);return n}});var Il=K((to,bl)=>{"use strict";var Gg=to&&to.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Zs=Gg(wl());function eo(e){return new Zs.default(e)}(function(e){e.HttpsProxyAgent=Zs.default,e.prototype=Zs.default.prototype})(eo||(eo={}));bl.exports=eo});var Dl=K(_n=>{"use strict";var la=_n&&_n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_n,"__esModule",{value:!0});_n.Gaxios=void 0;var Kg=la(sl()),jg=require("https"),Hg=la(cl()),$g=la(require("querystring")),zg=la(ll()),kl=require("url"),Wg=Ys(),Yg=dl(),Qg=Xg()?window.fetch:Hg.default;function Jg(){return typeof window!="undefined"&&!!window}function Xg(){return Jg()&&!!window.fetch}function Zg(){return typeof Buffer!="undefined"}function Bl(e,t){return!!Nl(e,t)}function Nl(e,t){t=t.toLowerCase();for(let n of Object.keys((e==null?void 0:e.headers)||{}))if(t===n.toLowerCase())return e.headers[n]}var ro;function Rl(){let e=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy;return e&&(ro=Il()),e}Rl();function ey(e){var t;let n=(t=process.env.NO_PROXY)!==null&&t!==void 0?t:process.env.no_proxy;if(!n)return!1;let r=n.split(","),i=new kl.URL(e);return!!r.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function ty(e){if(!ey(e))return Rl()}var Ll=class{constructor(t){this.agentCache=new Map,this.defaults=t||{}}request(){return I(this,arguments,function*(t={}){return t=this.validateOpts(t),this._request(t)})}_defaultAdapter(t){return I(this,null,function*(){let r=yield(t.fetchImplementation||Qg)(t.url,t),i=yield this.getResponseData(t,r);return this.translateResponse(t,r,i)})}_request(){return I(this,arguments,function*(t={}){try{let n;if(t.adapter?n=yield t.adapter(t,this._defaultAdapter.bind(this)):n=yield this._defaultAdapter(t),!t.validateStatus(n.status))throw new Wg.GaxiosError(`Request failed with status code ${n.status}`,t,n);return n}catch(n){let r=n;r.config=t;let{shouldRetry:i,config:a}=yield Yg.getRetryConfig(n);if(i&&a)return r.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(r.config);throw r}})}getResponseData(t,n){return I(this,null,function*(){switch(t.responseType){case"stream":return n.body;case"json":{let r=yield n.text();try{r=JSON.parse(r)}catch(i){}return r}case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();default:return n.text()}})}validateOpts(t){let n=Kg.default(!0,{},this.defaults,t);if(!n.url)throw new Error("URL is required.");let r=n.baseUrl||n.baseURL;if(r&&(n.url=r+n.url),n.paramsSerializer=n.paramsSerializer||this.paramsSerializer,n.params&&Object.keys(n.params).length>0){let a=n.paramsSerializer(n.params);a.startsWith("?")&&(a=a.slice(1));let s=n.url.includes("?")?"&":"?";n.url=n.url+s+a}typeof t.maxContentLength=="number"&&(n.size=t.maxContentLength),typeof t.maxRedirects=="number"&&(n.follow=t.maxRedirects),n.headers=n.headers||{},n.data&&(zg.default.readable(n.data)?n.body=n.data:Zg()&&Buffer.isBuffer(n.data)?(n.body=n.data,Bl(n,"Content-Type")||(n.headers["Content-Type"]="application/json")):typeof n.data=="object"?Nl(n,"content-type")==="application/x-www-form-urlencoded"?n.body=n.paramsSerializer(n.data):(Bl(n,"Content-Type")||(n.headers["Content-Type"]="application/json"),n.body=JSON.stringify(n.data)):n.body=n.data),n.validateStatus=n.validateStatus||this.validateStatus,n.responseType=n.responseType||"json",!n.headers.Accept&&n.responseType==="json"&&(n.headers.Accept="application/json"),n.method=n.method||"GET";let i=ty(n.url);if(i)if(this.agentCache.has(i))n.agent=this.agentCache.get(i);else{if(n.cert&&n.key){let a=new kl.URL(i);n.agent=new ro({port:a.port,host:a.host,protocol:a.protocol,cert:n.cert,key:n.key})}else n.agent=new ro(i);this.agentCache.set(i,n.agent)}else n.cert&&n.key&&(this.agentCache.has(n.key)?n.agent=this.agentCache.get(n.key):(n.agent=new jg.Agent({cert:n.cert,key:n.key}),this.agentCache.set(n.key,n.agent)));return n}validateStatus(t){return t>=200&&t<300}paramsSerializer(t){return $g.default.stringify(t)}translateResponse(t,n,r){let i={};return n.headers.forEach((a,s)=>{i[s]=a}),{config:t,data:r,headers:i,status:n.status,statusText:n.statusText,request:{responseURL:n.url}}}};_n.Gaxios=Ll});var fa=K(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.request=Zt.instance=Zt.Gaxios=void 0;var Ol=Dl();Object.defineProperty(Zt,"Gaxios",{enumerable:!0,get:function(){return Ol.Gaxios}});var ry=Ys();Object.defineProperty(Zt,"GaxiosError",{enumerable:!0,get:function(){return ry.GaxiosError}});Zt.instance=new Ol.Gaxios;function ny(e){return I(this,null,function*(){return Zt.instance.request(e)})}Zt.request=ny});var no=K((Pl,ha)=>{(function(e){"use strict";var t,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",o=1e14,c=14,u=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function v(M){var q,J,re,j=H.prototype={constructor:H,toString:null,valueOf:null},le=new H(1),ae=20,ue=4,ke=-7,Be=21,fe=-1e7,Ce=1e7,X=!1,ye=1,qe=0,ve={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Se="0123456789abcdefghijklmnopqrstuvwxyz",Ae=!0;function H(m,E){var x,R,b,N,O,k,L,F,P=this;if(!(P instanceof H))return new H(m,E);if(E==null){if(m&&m._isBigNumber===!0){P.s=m.s,!m.c||m.e>Ce?P.c=P.e=null:m.e<fe?P.c=[P.e=0]:(P.e=m.e,P.c=m.c.slice());return}if((k=typeof m=="number")&&m*0==0){if(P.s=1/m<0?(m=-m,-1):1,m===~~m){for(N=0,O=m;O>=10;O/=10,N++);N>Ce?P.c=P.e=null:(P.e=N,P.c=[m]);return}F=String(m)}else{if(!n.test(F=String(m)))return re(P,F,k);P.s=F.charCodeAt(0)==45?(F=F.slice(1),-1):1}(N=F.indexOf("."))>-1&&(F=F.replace(".","")),(O=F.search(/e/i))>0?(N<0&&(N=O),N+=+F.slice(O+1),F=F.substring(0,O)):N<0&&(N=F.length)}else{if(_(E,2,Se.length,"Base"),E==10&&Ae)return P=new H(m),Fe(P,ae+P.e+1,ue);if(F=String(m),k=typeof m=="number"){if(m*0!=0)return re(P,F,k,E);if(P.s=1/m<0?(F=F.slice(1),-1):1,H.DEBUG&&F.replace(/^0\.0*|\./,"").length>15)throw Error(s+m)}else P.s=F.charCodeAt(0)===45?(F=F.slice(1),-1):1;for(x=Se.slice(0,E),N=O=0,L=F.length;O<L;O++)if(x.indexOf(R=F.charAt(O))<0){if(R=="."){if(O>N){N=L;continue}}else if(!b&&(F==F.toUpperCase()&&(F=F.toLowerCase())||F==F.toLowerCase()&&(F=F.toUpperCase()))){b=!0,O=-1,N=0;continue}return re(P,String(m),k,E)}k=!1,F=J(F,E,10,P.s),(N=F.indexOf("."))>-1?F=F.replace(".",""):N=F.length}for(O=0;F.charCodeAt(O)===48;O++);for(L=F.length;F.charCodeAt(--L)===48;);if(F=F.slice(O,++L)){if(L-=O,k&&H.DEBUG&&L>15&&(m>u||m!==i(m)))throw Error(s+P.s*m);if((N=N-O-1)>Ce)P.c=P.e=null;else if(N<fe)P.c=[P.e=0];else{if(P.e=N,P.c=[],O=(N+1)%c,N<0&&(O+=c),O<L){for(O&&P.c.push(+F.slice(0,O)),L-=c;O<L;)P.c.push(+F.slice(O,O+=c));O=c-(F=F.slice(O)).length}else O-=L;for(;O--;F+="0");P.c.push(+F)}}else P.c=[P.e=0]}H.clone=v,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(m){var E,x;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(E="DECIMAL_PLACES")&&(x=m[E],_(x,0,h,E),ae=x),m.hasOwnProperty(E="ROUNDING_MODE")&&(x=m[E],_(x,0,8,E),ue=x),m.hasOwnProperty(E="EXPONENTIAL_AT")&&(x=m[E],x&&x.pop?(_(x[0],-h,0,E),_(x[1],0,h,E),ke=x[0],Be=x[1]):(_(x,-h,h,E),ke=-(Be=x<0?-x:x))),m.hasOwnProperty(E="RANGE"))if(x=m[E],x&&x.pop)_(x[0],-h,-1,E),_(x[1],1,h,E),fe=x[0],Ce=x[1];else if(_(x,-h,h,E),x)fe=-(Ce=x<0?-x:x);else throw Error(a+E+" cannot be zero: "+x);if(m.hasOwnProperty(E="CRYPTO"))if(x=m[E],x===!!x)if(x)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))X=x;else throw X=!x,Error(a+"crypto unavailable");else X=x;else throw Error(a+E+" not true or false: "+x);if(m.hasOwnProperty(E="MODULO_MODE")&&(x=m[E],_(x,0,9,E),ye=x),m.hasOwnProperty(E="POW_PRECISION")&&(x=m[E],_(x,0,h,E),qe=x),m.hasOwnProperty(E="FORMAT"))if(x=m[E],typeof x=="object")ve=x;else throw Error(a+E+" not an object: "+x);if(m.hasOwnProperty(E="ALPHABET"))if(x=m[E],typeof x=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(x))Ae=x.slice(0,10)=="0123456789",Se=x;else throw Error(a+E+" invalid: "+x)}else throw Error(a+"Object expected: "+m);return{DECIMAL_PLACES:ae,ROUNDING_MODE:ue,EXPONENTIAL_AT:[ke,Be],RANGE:[fe,Ce],CRYPTO:X,MODULO_MODE:ye,POW_PRECISION:qe,FORMAT:ve,ALPHABET:Se}},H.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!H.DEBUG)return!0;var E,x,R=m.c,b=m.e,N=m.s;e:if({}.toString.call(R)=="[object Array]"){if((N===1||N===-1)&&b>=-h&&b<=h&&b===i(b)){if(R[0]===0){if(b===0&&R.length===1)return!0;break e}if(E=(b+1)%c,E<1&&(E+=c),String(R[0]).length==E){for(E=0;E<R.length;E++)if(x=R[E],x<0||x>=o||x!==i(x))break e;if(x!==0)return!0}}}else if(R===null&&b===null&&(N===null||N===1||N===-1))return!0;throw Error(a+"Invalid BigNumber: "+m)},H.maximum=H.max=function(){return $e(arguments,j.lt)},H.minimum=H.min=function(){return $e(arguments,j.gt)},H.random=function(){var m=9007199254740992,E=Math.random()*m&2097151?function(){return i(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(x){var R,b,N,O,k,L=0,F=[],P=new H(le);if(x==null?x=ae:_(x,0,h),O=r(x/c),X)if(crypto.getRandomValues){for(R=crypto.getRandomValues(new Uint32Array(O*=2));L<O;)k=R[L]*131072+(R[L+1]>>>11),k>=9e15?(b=crypto.getRandomValues(new Uint32Array(2)),R[L]=b[0],R[L+1]=b[1]):(F.push(k%1e14),L+=2);L=O/2}else if(crypto.randomBytes){for(R=crypto.randomBytes(O*=7);L<O;)k=(R[L]&31)*281474976710656+R[L+1]*1099511627776+R[L+2]*4294967296+R[L+3]*16777216+(R[L+4]<<16)+(R[L+5]<<8)+R[L+6],k>=9e15?crypto.randomBytes(7).copy(R,L):(F.push(k%1e14),L+=7);L=O/7}else throw X=!1,Error(a+"crypto unavailable");if(!X)for(;L<O;)k=E(),k<9e15&&(F[L++]=k%1e14);for(O=F[--L],x%=c,O&&x&&(k=l[c-x],F[L]=i(O/k)*k);F[L]===0;F.pop(),L--);if(L<0)F=[N=0];else{for(N=-1;F[0]===0;F.splice(0,1),N-=c);for(L=1,k=F[0];k>=10;k/=10,L++);L<c&&(N-=c-L)}return P.e=N,P.c=F,P}}(),H.sum=function(){for(var m=1,E=arguments,x=new H(E[0]);m<E.length;)x=x.plus(E[m++]);return x},J=function(){var m="0123456789";function E(x,R,b,N){for(var O,k=[0],L,F=0,P=x.length;F<P;){for(L=k.length;L--;k[L]*=R);for(k[0]+=N.indexOf(x.charAt(F++)),O=0;O<k.length;O++)k[O]>b-1&&(k[O+1]==null&&(k[O+1]=0),k[O+1]+=k[O]/b|0,k[O]%=b)}return k.reverse()}return function(x,R,b,N,O){var k,L,F,P,W,ie,ce,Oe,Je=x.indexOf("."),nt=ae,Ne=ue;for(Je>=0&&(P=qe,qe=0,x=x.replace(".",""),Oe=new H(R),ie=Oe.pow(x.length-Je),qe=P,Oe.c=E(G(C(ie.c),ie.e,"0"),10,b,m),Oe.e=Oe.c.length),ce=E(x,R,b,O?(k=Se,m):(k=m,Se)),F=P=ce.length;ce[--P]==0;ce.pop());if(!ce[0])return k.charAt(0);if(Je<0?--F:(ie.c=ce,ie.e=F,ie.s=N,ie=q(ie,Oe,nt,Ne,b),ce=ie.c,W=ie.r,F=ie.e),L=F+nt+1,Je=ce[L],P=b/2,W=W||L<0||ce[L+1]!=null,W=Ne<4?(Je!=null||W)&&(Ne==0||Ne==(ie.s<0?3:2)):Je>P||Je==P&&(Ne==4||W||Ne==6&&ce[L-1]&1||Ne==(ie.s<0?8:7)),L<1||!ce[0])x=W?G(k.charAt(1),-nt,k.charAt(0)):k.charAt(0);else{if(ce.length=L,W)for(--b;++ce[--L]>b;)ce[L]=0,L||(++F,ce=[1].concat(ce));for(P=ce.length;!ce[--P];);for(Je=0,x="";Je<=P;x+=k.charAt(ce[Je++]));x=G(x,F,k.charAt(0))}return x}}(),q=function(){function m(R,b,N){var O,k,L,F,P=0,W=R.length,ie=b%f,ce=b/f|0;for(R=R.slice();W--;)L=R[W]%f,F=R[W]/f|0,O=ce*L+F*ie,k=ie*L+O%f*f+P,P=(k/N|0)+(O/f|0)+ce*F,R[W]=k%N;return P&&(R=[P].concat(R)),R}function E(R,b,N,O){var k,L;if(N!=O)L=N>O?1:-1;else for(k=L=0;k<N;k++)if(R[k]!=b[k]){L=R[k]>b[k]?1:-1;break}return L}function x(R,b,N,O){for(var k=0;N--;)R[N]-=k,k=R[N]<b[N]?1:0,R[N]=k*O+R[N]-b[N];for(;!R[0]&&R.length>1;R.splice(0,1));}return function(R,b,N,O,k){var L,F,P,W,ie,ce,Oe,Je,nt,Ne,Me,dt,Qi,Fs,qs,Yt,ii,Nt=R.s==b.s?1:-1,gt=R.c,Xe=b.c;if(!gt||!gt[0]||!Xe||!Xe[0])return new H(!R.s||!b.s||(gt?Xe&&gt[0]==Xe[0]:!Xe)?NaN:gt&&gt[0]==0||!Xe?Nt*0:Nt/0);for(Je=new H(Nt),nt=Je.c=[],F=R.e-b.e,Nt=N+F+1,k||(k=o,F=g(R.e/c)-g(b.e/c),Nt=Nt/c|0),P=0;Xe[P]==(gt[P]||0);P++);if(Xe[P]>(gt[P]||0)&&F--,Nt<0)nt.push(1),W=!0;else{for(Fs=gt.length,Yt=Xe.length,P=0,Nt+=2,ie=i(k/(Xe[0]+1)),ie>1&&(Xe=m(Xe,ie,k),gt=m(gt,ie,k),Yt=Xe.length,Fs=gt.length),Qi=Yt,Ne=gt.slice(0,Yt),Me=Ne.length;Me<Yt;Ne[Me++]=0);ii=Xe.slice(),ii=[0].concat(ii),qs=Xe[0],Xe[1]>=k/2&&qs++;do{if(ie=0,L=E(Xe,Ne,Yt,Me),L<0){if(dt=Ne[0],Yt!=Me&&(dt=dt*k+(Ne[1]||0)),ie=i(dt/qs),ie>1)for(ie>=k&&(ie=k-1),ce=m(Xe,ie,k),Oe=ce.length,Me=Ne.length;E(ce,Ne,Oe,Me)==1;)ie--,x(ce,Yt<Oe?ii:Xe,Oe,k),Oe=ce.length,L=1;else ie==0&&(L=ie=1),ce=Xe.slice(),Oe=ce.length;if(Oe<Me&&(ce=[0].concat(ce)),x(Ne,ce,Me,k),Me=Ne.length,L==-1)for(;E(Xe,Ne,Yt,Me)<1;)ie++,x(Ne,Yt<Me?ii:Xe,Me,k),Me=Ne.length}else L===0&&(ie++,Ne=[0]);nt[P++]=ie,Ne[0]?Ne[Me++]=gt[Qi]||0:(Ne=[gt[Qi]],Me=1)}while((Qi++<Fs||Ne[0]!=null)&&Nt--);W=Ne[0]!=null,nt[0]||nt.splice(0,1)}if(k==o){for(P=1,Nt=nt[0];Nt>=10;Nt/=10,P++);Fe(Je,N+(Je.e=P+F*c-1)+1,O,W)}else Je.e=F,Je.r=+W;return Je}}();function de(m,E,x,R){var b,N,O,k,L;if(x==null?x=ue:_(x,0,8),!m.c)return m.toString();if(b=m.c[0],O=m.e,E==null)L=C(m.c),L=R==1||R==2&&(O<=ke||O>=Be)?B(L,O):G(L,O,"0");else if(m=Fe(new H(m),E,x),N=m.e,L=C(m.c),k=L.length,R==1||R==2&&(E<=N||N<=ke)){for(;k<E;L+="0",k++);L=B(L,N)}else if(E-=O,L=G(L,N,"0"),N+1>k){if(--E>0)for(L+=".";E--;L+="0");}else if(E+=N-k,E>0)for(N+1==k&&(L+=".");E--;L+="0");return m.s<0&&b?"-"+L:L}function $e(m,E){for(var x,R=1,b=new H(m[0]);R<m.length;R++)if(x=new H(m[R]),x.s)E.call(b,x)&&(b=x);else{b=x;break}return b}function tt(m,E,x){for(var R=1,b=E.length;!E[--b];E.pop());for(b=E[0];b>=10;b/=10,R++);return(x=R+x*c-1)>Ce?m.c=m.e=null:x<fe?m.c=[m.e=0]:(m.e=x,m.c=E),m}re=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,E=/^([^.]+)\.$/,x=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,b=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(N,O,k,L){var F,P=k?O:O.replace(b,"");if(R.test(P))N.s=isNaN(P)?null:P<0?-1:1;else{if(!k&&(P=P.replace(m,function(W,ie,ce){return F=(ce=ce.toLowerCase())=="x"?16:ce=="b"?2:8,!L||L==F?ie:W}),L&&(F=L,P=P.replace(E,"$1").replace(x,"0.$1")),O!=P))return new H(P,F);if(H.DEBUG)throw Error(a+"Not a"+(L?" base "+L:"")+" number: "+O);N.s=null}N.c=N.e=null}}();function Fe(m,E,x,R){var b,N,O,k,L,F,P,W=m.c,ie=l;if(W){e:{for(b=1,k=W[0];k>=10;k/=10,b++);if(N=E-b,N<0)N+=c,O=E,L=W[F=0],P=L/ie[b-O-1]%10|0;else if(F=r((N+1)/c),F>=W.length)if(R){for(;W.length<=F;W.push(0));L=P=0,b=1,N%=c,O=N-c+1}else break e;else{for(L=k=W[F],b=1;k>=10;k/=10,b++);N%=c,O=N-c+b,P=O<0?0:L/ie[b-O-1]%10|0}if(R=R||E<0||W[F+1]!=null||(O<0?L:L%ie[b-O-1]),R=x<4?(P||R)&&(x==0||x==(m.s<0?3:2)):P>5||P==5&&(x==4||R||x==6&&(N>0?O>0?L/ie[b-O]:0:W[F-1])%10&1||x==(m.s<0?8:7)),E<1||!W[0])return W.length=0,R?(E-=m.e+1,W[0]=ie[(c-E%c)%c],m.e=-E||0):W[0]=m.e=0,m;if(N==0?(W.length=F,k=1,F--):(W.length=F+1,k=ie[c-N],W[F]=O>0?i(L/ie[b-O]%ie[O])*k:0),R)for(;;)if(F==0){for(N=1,O=W[0];O>=10;O/=10,N++);for(O=W[0]+=k,k=1;O>=10;O/=10,k++);N!=k&&(m.e++,W[0]==o&&(W[0]=1));break}else{if(W[F]+=k,W[F]!=o)break;W[F--]=0,k=1}for(N=W.length;W[--N]===0;W.pop());}m.e>Ce?m.c=m.e=null:m.e<fe&&(m.c=[m.e=0])}return m}function Ge(m){var E,x=m.e;return x===null?m.toString():(E=C(m.c),E=x<=ke||x>=Be?B(E,x):G(E,x,"0"),m.s<0?"-"+E:E)}return j.absoluteValue=j.abs=function(){var m=new H(this);return m.s<0&&(m.s=1),m},j.comparedTo=function(m,E){return T(this,new H(m,E))},j.decimalPlaces=j.dp=function(m,E){var x,R,b,N=this;if(m!=null)return _(m,0,h),E==null?E=ue:_(E,0,8),Fe(new H(N),m+N.e+1,E);if(!(x=N.c))return null;if(R=((b=x.length-1)-g(this.e/c))*c,b=x[b])for(;b%10==0;b/=10,R--);return R<0&&(R=0),R},j.dividedBy=j.div=function(m,E){return q(this,new H(m,E),ae,ue)},j.dividedToIntegerBy=j.idiv=function(m,E){return q(this,new H(m,E),0,1)},j.exponentiatedBy=j.pow=function(m,E){var x,R,b,N,O,k,L,F,P,W=this;if(m=new H(m),m.c&&!m.isInteger())throw Error(a+"Exponent not an integer: "+Ge(m));if(E!=null&&(E=new H(E)),k=m.e>14,!W.c||!W.c[0]||W.c[0]==1&&!W.e&&W.c.length==1||!m.c||!m.c[0])return P=new H(Math.pow(+Ge(W),k?2-U(m):+Ge(m))),E?P.mod(E):P;if(L=m.s<0,E){if(E.c?!E.c[0]:!E.s)return new H(NaN);R=!L&&W.isInteger()&&E.isInteger(),R&&(W=W.mod(E))}else{if(m.e>9&&(W.e>0||W.e<-1||(W.e==0?W.c[0]>1||k&&W.c[1]>=24e7:W.c[0]<8e13||k&&W.c[0]<=9999975e7)))return N=W.s<0&&U(m)?-0:0,W.e>-1&&(N=1/N),new H(L?1/N:N);qe&&(N=r(qe/c+2))}for(k?(x=new H(.5),L&&(m.s=1),F=U(m)):(b=Math.abs(+Ge(m)),F=b%2),P=new H(le);;){if(F){if(P=P.times(W),!P.c)break;N?P.c.length>N&&(P.c.length=N):R&&(P=P.mod(E))}if(b){if(b=i(b/2),b===0)break;F=b%2}else if(m=m.times(x),Fe(m,m.e+1,1),m.e>14)F=U(m);else{if(b=+Ge(m),b===0)break;F=b%2}W=W.times(W),N?W.c&&W.c.length>N&&(W.c.length=N):R&&(W=W.mod(E))}return R?P:(L&&(P=le.div(P)),E?P.mod(E):N?Fe(P,qe,ue,O):P)},j.integerValue=function(m){var E=new H(this);return m==null?m=ue:_(m,0,8),Fe(E,E.e+1,m)},j.isEqualTo=j.eq=function(m,E){return T(this,new H(m,E))===0},j.isFinite=function(){return!!this.c},j.isGreaterThan=j.gt=function(m,E){return T(this,new H(m,E))>0},j.isGreaterThanOrEqualTo=j.gte=function(m,E){return(E=T(this,new H(m,E)))===1||E===0},j.isInteger=function(){return!!this.c&&g(this.e/c)>this.c.length-2},j.isLessThan=j.lt=function(m,E){return T(this,new H(m,E))<0},j.isLessThanOrEqualTo=j.lte=function(m,E){return(E=T(this,new H(m,E)))===-1||E===0},j.isNaN=function(){return!this.s},j.isNegative=function(){return this.s<0},j.isPositive=function(){return this.s>0},j.isZero=function(){return!!this.c&&this.c[0]==0},j.minus=function(m,E){var x,R,b,N,O=this,k=O.s;if(m=new H(m,E),E=m.s,!k||!E)return new H(NaN);if(k!=E)return m.s=-E,O.plus(m);var L=O.e/c,F=m.e/c,P=O.c,W=m.c;if(!L||!F){if(!P||!W)return P?(m.s=-E,m):new H(W?O:NaN);if(!P[0]||!W[0])return W[0]?(m.s=-E,m):new H(P[0]?O:ue==3?-0:0)}if(L=g(L),F=g(F),P=P.slice(),k=L-F){for((N=k<0)?(k=-k,b=P):(F=L,b=W),b.reverse(),E=k;E--;b.push(0));b.reverse()}else for(R=(N=(k=P.length)<(E=W.length))?k:E,k=E=0;E<R;E++)if(P[E]!=W[E]){N=P[E]<W[E];break}if(N&&(b=P,P=W,W=b,m.s=-m.s),E=(R=W.length)-(x=P.length),E>0)for(;E--;P[x++]=0);for(E=o-1;R>k;){if(P[--R]<W[R]){for(x=R;x&&!P[--x];P[x]=E);--P[x],P[R]+=o}P[R]-=W[R]}for(;P[0]==0;P.splice(0,1),--F);return P[0]?tt(m,P,F):(m.s=ue==3?-1:1,m.c=[m.e=0],m)},j.modulo=j.mod=function(m,E){var x,R,b=this;return m=new H(m,E),!b.c||!m.s||m.c&&!m.c[0]?new H(NaN):!m.c||b.c&&!b.c[0]?new H(b):(ye==9?(R=m.s,m.s=1,x=q(b,m,0,3),m.s=R,x.s*=R):x=q(b,m,0,ye),m=b.minus(x.times(m)),!m.c[0]&&ye==1&&(m.s=b.s),m)},j.multipliedBy=j.times=function(m,E){var x,R,b,N,O,k,L,F,P,W,ie,ce,Oe,Je,nt,Ne=this,Me=Ne.c,dt=(m=new H(m,E)).c;if(!Me||!dt||!Me[0]||!dt[0])return!Ne.s||!m.s||Me&&!Me[0]&&!dt||dt&&!dt[0]&&!Me?m.c=m.e=m.s=null:(m.s*=Ne.s,!Me||!dt?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(R=g(Ne.e/c)+g(m.e/c),m.s*=Ne.s,L=Me.length,W=dt.length,L<W&&(Oe=Me,Me=dt,dt=Oe,b=L,L=W,W=b),b=L+W,Oe=[];b--;Oe.push(0));for(Je=o,nt=f,b=W;--b>=0;){for(x=0,ie=dt[b]%nt,ce=dt[b]/nt|0,O=L,N=b+O;N>b;)F=Me[--O]%nt,P=Me[O]/nt|0,k=ce*F+P*ie,F=ie*F+k%nt*nt+Oe[N]+x,x=(F/Je|0)+(k/nt|0)+ce*P,Oe[N--]=F%Je;Oe[N]=x}return x?++R:Oe.splice(0,1),tt(m,Oe,R)},j.negated=function(){var m=new H(this);return m.s=-m.s||null,m},j.plus=function(m,E){var x,R=this,b=R.s;if(m=new H(m,E),E=m.s,!b||!E)return new H(NaN);if(b!=E)return m.s=-E,R.minus(m);var N=R.e/c,O=m.e/c,k=R.c,L=m.c;if(!N||!O){if(!k||!L)return new H(b/0);if(!k[0]||!L[0])return L[0]?m:new H(k[0]?R:b*0)}if(N=g(N),O=g(O),k=k.slice(),b=N-O){for(b>0?(O=N,x=L):(b=-b,x=k),x.reverse();b--;x.push(0));x.reverse()}for(b=k.length,E=L.length,b-E<0&&(x=L,L=k,k=x,E=b),b=0;E;)b=(k[--E]=k[E]+L[E]+b)/o|0,k[E]=o===k[E]?0:k[E]%o;return b&&(k=[b].concat(k),++O),tt(m,k,O)},j.precision=j.sd=function(m,E){var x,R,b,N=this;if(m!=null&&m!==!!m)return _(m,1,h),E==null?E=ue:_(E,0,8),Fe(new H(N),m,E);if(!(x=N.c))return null;if(b=x.length-1,R=b*c+1,b=x[b]){for(;b%10==0;b/=10,R--);for(b=x[0];b>=10;b/=10,R++);}return m&&N.e+1>R&&(R=N.e+1),R},j.shiftedBy=function(m){return _(m,-u,u),this.times("1e"+m)},j.squareRoot=j.sqrt=function(){var m,E,x,R,b,N=this,O=N.c,k=N.s,L=N.e,F=ae+4,P=new H("0.5");if(k!==1||!O||!O[0])return new H(!k||k<0&&(!O||O[0])?NaN:O?N:1/0);if(k=Math.sqrt(+Ge(N)),k==0||k==1/0?(E=C(O),(E.length+L)%2==0&&(E+="0"),k=Math.sqrt(+E),L=g((L+1)/2)-(L<0||L%2),k==1/0?E="5e"+L:(E=k.toExponential(),E=E.slice(0,E.indexOf("e")+1)+L),x=new H(E)):x=new H(k+""),x.c[0]){for(L=x.e,k=L+F,k<3&&(k=0);;)if(b=x,x=P.times(b.plus(q(N,b,F,1))),C(b.c).slice(0,k)===(E=C(x.c)).slice(0,k))if(x.e<L&&--k,E=E.slice(k-3,k+1),E=="9999"||!R&&E=="4999"){if(!R&&(Fe(b,b.e+ae+2,0),b.times(b).eq(N))){x=b;break}F+=4,k+=4,R=1}else{(!+E||!+E.slice(1)&&E.charAt(0)=="5")&&(Fe(x,x.e+ae+2,1),m=!x.times(x).eq(N));break}}return Fe(x,x.e+ae+1,ue,m)},j.toExponential=function(m,E){return m!=null&&(_(m,0,h),m++),de(this,m,E,1)},j.toFixed=function(m,E){return m!=null&&(_(m,0,h),m=m+this.e+1),de(this,m,E)},j.toFormat=function(m,E,x){var R,b=this;if(x==null)m!=null&&E&&typeof E=="object"?(x=E,E=null):m&&typeof m=="object"?(x=m,m=E=null):x=ve;else if(typeof x!="object")throw Error(a+"Argument not an object: "+x);if(R=b.toFixed(m,E),b.c){var N,O=R.split("."),k=+x.groupSize,L=+x.secondaryGroupSize,F=x.groupSeparator||"",P=O[0],W=O[1],ie=b.s<0,ce=ie?P.slice(1):P,Oe=ce.length;if(L&&(N=k,k=L,L=N,Oe-=N),k>0&&Oe>0){for(N=Oe%k||k,P=ce.substr(0,N);N<Oe;N+=k)P+=F+ce.substr(N,k);L>0&&(P+=F+ce.slice(N)),ie&&(P="-"+P)}R=W?P+(x.decimalSeparator||"")+((L=+x.fractionGroupSize)?W.replace(new RegExp("\\d{"+L+"}\\B","g"),"$&"+(x.fractionGroupSeparator||"")):W):P}return(x.prefix||"")+R+(x.suffix||"")},j.toFraction=function(m){var E,x,R,b,N,O,k,L,F,P,W,ie,ce=this,Oe=ce.c;if(m!=null&&(k=new H(m),!k.isInteger()&&(k.c||k.s!==1)||k.lt(le)))throw Error(a+"Argument "+(k.isInteger()?"out of range: ":"not an integer: ")+Ge(k));if(!Oe)return new H(ce);for(E=new H(le),F=x=new H(le),R=L=new H(le),ie=C(Oe),N=E.e=ie.length-ce.e-1,E.c[0]=l[(O=N%c)<0?c+O:O],m=!m||k.comparedTo(E)>0?N>0?E:F:k,O=Ce,Ce=1/0,k=new H(ie),L.c[0]=0;P=q(k,E,0,1),b=x.plus(P.times(R)),b.comparedTo(m)!=1;)x=R,R=b,F=L.plus(P.times(b=F)),L=b,E=k.minus(P.times(b=E)),k=b;return b=q(m.minus(x),R,0,1),L=L.plus(b.times(F)),x=x.plus(b.times(R)),L.s=F.s=ce.s,N=N*2,W=q(F,R,N,ue).minus(ce).abs().comparedTo(q(L,x,N,ue).minus(ce).abs())<1?[F,R]:[L,x],Ce=O,W},j.toNumber=function(){return+Ge(this)},j.toPrecision=function(m,E){return m!=null&&_(m,1,h),de(this,m,E,2)},j.toString=function(m){var E,x=this,R=x.s,b=x.e;return b===null?R?(E="Infinity",R<0&&(E="-"+E)):E="NaN":(m==null?E=b<=ke||b>=Be?B(C(x.c),b):G(C(x.c),b,"0"):m===10&&Ae?(x=Fe(new H(x),ae+b+1,ue),E=G(C(x.c),x.e,"0")):(_(m,2,Se.length,"Base"),E=J(G(C(x.c),b,"0"),10,m,R,!0)),R<0&&x.c[0]&&(E="-"+E)),E},j.valueOf=j.toJSON=function(){return Ge(this)},j._isBigNumber=!0,M!=null&&H.set(M),H}function g(M){var q=M|0;return M>0||M===q?q:q-1}function C(M){for(var q,J,re=1,j=M.length,le=M[0]+"";re<j;){for(q=M[re++]+"",J=c-q.length;J--;q="0"+q);le+=q}for(j=le.length;le.charCodeAt(--j)===48;);return le.slice(0,j+1||1)}function T(M,q){var J,re,j=M.c,le=q.c,ae=M.s,ue=q.s,ke=M.e,Be=q.e;if(!ae||!ue)return null;if(J=j&&!j[0],re=le&&!le[0],J||re)return J?re?0:-ue:ae;if(ae!=ue)return ae;if(J=ae<0,re=ke==Be,!j||!le)return re?0:!j^J?1:-1;if(!re)return ke>Be^J?1:-1;for(ue=(ke=j.length)<(Be=le.length)?ke:Be,ae=0;ae<ue;ae++)if(j[ae]!=le[ae])return j[ae]>le[ae]^J?1:-1;return ke==Be?0:ke>Be^J?1:-1}function _(M,q,J,re){if(M<q||M>J||M!==i(M))throw Error(a+(re||"Argument")+(typeof M=="number"?M<q||M>J?" out of range: ":" not an integer: ":" not a primitive number: ")+String(M))}function U(M){var q=M.c.length-1;return g(M.e/c)==q&&M.c[q]%2!=0}function B(M,q){return(M.length>1?M.charAt(0)+"."+M.slice(1):M)+(q<0?"e":"e+")+q}function G(M,q,J){var re,j;if(q<0){for(j=J+".";++q;j+=J);M=j+M}else if(re=M.length,++q>re){for(j=J,q-=re;--q;j+=J);M+=j}else q<re&&(M=M.slice(0,q)+"."+M.slice(q));return M}t=v(),t.default=t.BigNumber=t,typeof define=="function"&&define.amd?define(function(){return t}):typeof ha!="undefined"&&ha.exports?ha.exports=t:(e||(e=typeof self!="undefined"&&self?self:window),e.BigNumber=t)})(Pl)});var Ml=K((Ax,ql)=>{var Ul=no(),Fl=ql.exports;(function(){"use strict";function e(u){return u<10?"0"+u:u}var t=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r,i,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function o(u){return n.lastIndex=0,n.test(u)?'"'+u.replace(n,function(l){var f=a[l];return typeof f=="string"?f:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+u+'"'}function c(u,l){var f,h,v,g,C=r,T,_=l[u],U=_!=null&&(_ instanceof Ul||Ul.isBigNumber(_));switch(_&&typeof _=="object"&&typeof _.toJSON=="function"&&(_=_.toJSON(u)),typeof s=="function"&&(_=s.call(l,u,_)),typeof _){case"string":return U?_:o(_);case"number":return isFinite(_)?String(_):"null";case"boolean":case"null":case"bigint":return String(_);case"object":if(!_)return"null";if(r+=i,T=[],Object.prototype.toString.apply(_)==="[object Array]"){for(g=_.length,f=0;f<g;f+=1)T[f]=c(f,_)||"null";return v=T.length===0?"[]":r?`[
`+r+T.join(`,
`+r)+`
`+C+"]":"["+T.join(",")+"]",r=C,v}if(s&&typeof s=="object")for(g=s.length,f=0;f<g;f+=1)typeof s[f]=="string"&&(h=s[f],v=c(h,_),v&&T.push(o(h)+(r?": ":":")+v));else Object.keys(_).forEach(function(B){var G=c(B,_);G&&T.push(o(B)+(r?": ":":")+G)});return v=T.length===0?"{}":r?`{
`+r+T.join(`,
`+r)+`
`+C+"}":"{"+T.join(",")+"}",r=C,v}}typeof Fl.stringify!="function"&&(Fl.stringify=function(u,l,f){var h;if(r="",i="",typeof f=="number")for(h=0;h<f;h+=1)i+=" ";else typeof f=="string"&&(i=f);if(s=l,l&&typeof l!="function"&&(typeof l!="object"||typeof l.length!="number"))throw new Error("JSON.stringify");return c("",{"":u})})})()});var Gl=K((wx,Vl)=>{var da=null,iy=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,ay=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,sy=function(e){"use strict";var t={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(e!=null){if(e.strict===!0&&(t.strict=!0),e.storeAsString===!0&&(t.storeAsString=!0),t.alwaysParseAsBig=e.alwaysParseAsBig===!0?e.alwaysParseAsBig:!1,t.useNativeBigInt=e.useNativeBigInt===!0?e.useNativeBigInt:!1,typeof e.constructorAction!="undefined")if(e.constructorAction==="error"||e.constructorAction==="ignore"||e.constructorAction==="preserve")t.constructorAction=e.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${e.constructorAction}`);if(typeof e.protoAction!="undefined")if(e.protoAction==="error"||e.protoAction==="ignore"||e.protoAction==="preserve")t.protoAction=e.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${e.protoAction}`)}var n,r,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,s=function(C){throw{name:"SyntaxError",message:C,at:n,text:a}},o=function(C){return C&&C!==r&&s("Expected '"+C+"' instead of '"+r+"'"),r=a.charAt(n),n+=1,r},c=function(){var C,T="";for(r==="-"&&(T="-",o("-"));r>="0"&&r<="9";)T+=r,o();if(r===".")for(T+=".";o()&&r>="0"&&r<="9";)T+=r;if(r==="e"||r==="E")for(T+=r,o(),(r==="-"||r==="+")&&(T+=r,o());r>="0"&&r<="9";)T+=r,o();if(C=+T,!isFinite(C))s("Bad number");else return da==null&&(da=no()),T.length>15?t.storeAsString?T:t.useNativeBigInt?BigInt(T):new da(T):t.alwaysParseAsBig?t.useNativeBigInt?BigInt(C):new da(C):C},u=function(){var C,T,_="",U;if(r==='"')for(var B=n;o();){if(r==='"')return n-1>B&&(_+=a.substring(B,n-1)),o(),_;if(r==="\\"){if(n-1>B&&(_+=a.substring(B,n-1)),o(),r==="u"){for(U=0,T=0;T<4&&(C=parseInt(o(),16),!!isFinite(C));T+=1)U=U*16+C;_+=String.fromCharCode(U)}else if(typeof i[r]=="string")_+=i[r];else break;B=n}}s("Bad string")},l=function(){for(;r&&r<=" ";)o()},f=function(){switch(r){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}s("Unexpected '"+r+"'")},h,v=function(){var C=[];if(r==="["){if(o("["),l(),r==="]")return o("]"),C;for(;r;){if(C.push(h()),l(),r==="]")return o("]"),C;o(","),l()}}s("Bad array")},g=function(){var C,T=Object.create(null);if(r==="{"){if(o("{"),l(),r==="}")return o("}"),T;for(;r;){if(C=u(),l(),o(":"),t.strict===!0&&Object.hasOwnProperty.call(T,C)&&s('Duplicate key "'+C+'"'),iy.test(C)===!0?t.protoAction==="error"?s("Object contains forbidden prototype property"):t.protoAction==="ignore"?h():T[C]=h():ay.test(C)===!0?t.constructorAction==="error"?s("Object contains forbidden constructor property"):t.constructorAction==="ignore"?h():T[C]=h():T[C]=h(),l(),r==="}")return o("}"),T;o(","),l()}}s("Bad object")};return h=function(){switch(l(),r){case"{":return g();case"[":return v();case'"':return u();case"-":return c();default:return r>="0"&&r<="9"?c():f()}},function(C,T){var _;return a=C+"",n=0,r=" ",_=h(),l(),r&&s("Syntax error"),typeof T=="function"?function U(B,G){var M,q,J=B[G];return J&&typeof J=="object"&&Object.keys(J).forEach(function(re){q=U(J,re),q!==void 0?J[re]=q:delete J[re]}),T.call(B,G,J)}({"":_},""):_}};Vl.exports=sy});var Hl=K((bx,pa)=>{var Kl=Ml().stringify,jl=Gl();pa.exports=function(e){return{parse:jl(e),stringify:Kl}};pa.exports.parse=jl();pa.exports.stringify=Kl});var ya=K(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.requestTimeout=Re.resetIsAvailableCache=Re.isAvailable=Re.project=Re.instance=Re.HEADERS=Re.HEADER_VALUE=Re.HEADER_NAME=Re.SECONDARY_HOST_ADDRESS=Re.HOST_ADDRESS=Re.BASE_PATH=void 0;var io=fa(),oy=Hl();Re.BASE_PATH="/computeMetadata/v1";Re.HOST_ADDRESS="http://169.254.169.254";Re.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Re.HEADER_NAME="Metadata-Flavor";Re.HEADER_VALUE="Google";Re.HEADERS=Object.freeze({[Re.HEADER_NAME]:Re.HEADER_VALUE});function ao(e){return e||(e=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Re.HOST_ADDRESS),/^https?:\/\//.test(e)||(e=`http://${e}`),new URL(Re.BASE_PATH,e).href}function cy(e){Object.keys(e).forEach(t=>{switch(t){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${t}' is not a valid configuration option.`)}})}function so(e,t,n=3,r=!1){return I(this,null,function*(){t=t||{},typeof t=="string"&&(t={property:t});let i="";typeof t=="object"&&t.property&&(i="/"+t.property),cy(t);try{let s=yield(r?uy:io.request)({url:`${ao()}/${e}${i}`,headers:Object.assign({},Re.HEADERS,t.headers),retryConfig:{noResponseRetries:n},params:t.params,responseType:"text",timeout:$l()});if(s.headers[Re.HEADER_NAME.toLowerCase()]!==Re.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${Re.HEADER_NAME} header.`);if(!s.data)throw new Error("Invalid response from the metadata service");if(typeof s.data=="string")try{return oy.parse(s.data)}catch(o){}return s.data}catch(a){throw a.response&&a.response.status!==200&&(a.message=`Unsuccessful response status code. ${a.message}`),a}})}function uy(e){return I(this,null,function*(){let t=Vt(Rt({},e),{url:e.url.replace(ao(),ao(Re.SECONDARY_HOST_ADDRESS))}),n=!1,r=io.request(e).then(a=>(n=!0,a)).catch(a=>{if(n)return i;throw n=!0,a}),i=io.request(t).then(a=>(n=!0,a)).catch(a=>{if(n)return r;throw n=!0,a});return Promise.race([r,i])})}function ly(e){return so("instance",e)}Re.instance=ly;function fy(e){return so("project",e)}Re.project=fy;function hy(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var ga;function dy(){return I(this,null,function*(){try{return ga===void 0&&(ga=so("instance",void 0,hy(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),yield ga,!0}catch(e){if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let t="UNKNOWN";e.code&&(t=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${t}`,"MetadataLookupWarning")}return!1}})}Re.isAvailable=dy;function py(){ga=void 0}Re.resetIsAvailableCache=py;function $l(){return process.env.K_SERVICE||process.env.FUNCTION_NAME?0:3e3}Re.requestTimeout=$l});var Yl=K(va=>{"use strict";va.byteLength=yy;va.toByteArray=my;va.fromByteArray=Ty;var er=[],Dt=[],gy=typeof Uint8Array!="undefined"?Uint8Array:Array,oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Wr=0,zl=oo.length;Wr<zl;++Wr)er[Wr]=oo[Wr],Dt[oo.charCodeAt(Wr)]=Wr;var Wr,zl;Dt["-".charCodeAt(0)]=62;Dt["_".charCodeAt(0)]=63;function Wl(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function yy(e){var t=Wl(e),n=t[0],r=t[1];return(n+r)*3/4-r}function vy(e,t,n){return(t+n)*3/4-n}function my(e){var t,n=Wl(e),r=n[0],i=n[1],a=new gy(vy(e,r,i)),s=0,o=i>0?r-4:r,c;for(c=0;c<o;c+=4)t=Dt[e.charCodeAt(c)]<<18|Dt[e.charCodeAt(c+1)]<<12|Dt[e.charCodeAt(c+2)]<<6|Dt[e.charCodeAt(c+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=t&255;return i===2&&(t=Dt[e.charCodeAt(c)]<<2|Dt[e.charCodeAt(c+1)]>>4,a[s++]=t&255),i===1&&(t=Dt[e.charCodeAt(c)]<<10|Dt[e.charCodeAt(c+1)]<<4|Dt[e.charCodeAt(c+2)]>>2,a[s++]=t>>8&255,a[s++]=t&255),a}function Cy(e){return er[e>>18&63]+er[e>>12&63]+er[e>>6&63]+er[e&63]}function Ey(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(Cy(r));return i.join("")}function Ty(e){for(var t,n=e.length,r=n%3,i=[],a=16383,s=0,o=n-r;s<o;s+=a)i.push(Ey(e,s,s+a>o?o:s+a));return r===1?(t=e[n-1],i.push(er[t>>2]+er[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(er[t>>10]+er[t>>4&63]+er[t<<2&63]+"=")),i.join("")}});var Jl=K(Ql=>{(function(e){function t(){}function n(c,u){if(c=c===void 0?"utf-8":c,u=u===void 0?{fatal:!1}:u,s.indexOf(c.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+c+"') is invalid.");if(u.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function r(c){return Buffer.from(c.buffer,c.byteOffset,c.byteLength).toString("utf-8")}function i(c){var u=URL.createObjectURL(new Blob([c],{type:"text/plain;charset=UTF-8"}));try{var l=new XMLHttpRequest;return l.open("GET",u,!1),l.send(),l.responseText}catch(f){return a(c)}finally{URL.revokeObjectURL(u)}}function a(c){for(var u=0,l=Math.min(65536,c.length+1),f=new Uint16Array(l),h=[],v=0;;){var g=u<c.length;if(!g||v>=l-1){if(h.push(String.fromCharCode.apply(null,f.subarray(0,v))),!g)return h.join("");c=c.subarray(u),v=u=0}if(g=c[u++],(g&128)==0)f[v++]=g;else if((g&224)==192){var C=c[u++]&63;f[v++]=(g&31)<<6|C}else if((g&240)==224){C=c[u++]&63;var T=c[u++]&63;f[v++]=(g&31)<<12|C<<6|T}else if((g&248)==240){C=c[u++]&63,T=c[u++]&63;var _=c[u++]&63;g=(g&7)<<18|C<<12|T<<6|_,65535<g&&(g-=65536,f[v++]=g>>>10&1023|55296,g=56320|g&1023),f[v++]=g}}}if(e.TextEncoder&&e.TextDecoder)return!1;var s=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(c,u){if(u=u===void 0?{stream:!1}:u,u.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");u=0;for(var l=c.length,f=0,h=Math.max(32,l+(l>>>1)+7),v=new Uint8Array(h>>>3<<3);u<l;){var g=c.charCodeAt(u++);if(55296<=g&&56319>=g){if(u<l){var C=c.charCodeAt(u);(C&64512)==56320&&(++u,g=((g&1023)<<10)+(C&1023)+65536)}if(55296<=g&&56319>=g)continue}if(f+4>v.length&&(h+=8,h*=1+u/c.length*2,h=h>>>3<<3,C=new Uint8Array(h),C.set(v),v=C),(g&4294967168)==0)v[f++]=g;else{if((g&4294965248)==0)v[f++]=g>>>6&31|192;else if((g&4294901760)==0)v[f++]=g>>>12&15|224,v[f++]=g>>>6&63|128;else if((g&4292870144)==0)v[f++]=g>>>18&7|240,v[f++]=g>>>12&63|128,v[f++]=g>>>6&63|128;else continue;v[f++]=g&63|128}}return v.slice?v.slice(0,f):v.subarray(0,f)},Object.defineProperty(n.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(n.prototype,"fatal",{value:!1}),Object.defineProperty(n.prototype,"ignoreBOM",{value:!1});var o=a;typeof Buffer=="function"&&Buffer.from?o=r:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(o=i),n.prototype.decode=function(c,u){if(u=u===void 0?{stream:!1}:u,u.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return c=c instanceof Uint8Array?c:c.buffer instanceof ArrayBuffer?new Uint8Array(c.buffer):new Uint8Array(c),o(c)},e.TextEncoder=t,e.TextDecoder=n})(typeof window!="undefined"?window:typeof global!="undefined"?global:Ql)});var Xl=K(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.BrowserCrypto=void 0;var xn=Yl();typeof process=="undefined"&&typeof TextEncoder=="undefined"&&Jl();var _y=Sn(),mi=class{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}sha256DigestBase64(t){return I(this,null,function*(){let n=new TextEncoder().encode(t),r=yield window.crypto.subtle.digest("SHA-256",n);return xn.fromByteArray(new Uint8Array(r))})}randomBytesBase64(t){let n=new Uint8Array(t);return window.crypto.getRandomValues(n),xn.fromByteArray(n)}static padBase64(t){for(;t.length%4!=0;)t+="=";return t}verify(t,n,r){return I(this,null,function*(){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(n),s=xn.toByteArray(mi.padBase64(r)),o=yield window.crypto.subtle.importKey("jwk",t,i,!0,["verify"]);return yield window.crypto.subtle.verify(i,o,s,a)})}sign(t,n){return I(this,null,function*(){let r={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(n),a=yield window.crypto.subtle.importKey("jwk",t,r,!0,["sign"]),s=yield window.crypto.subtle.sign(r,a,i);return xn.fromByteArray(new Uint8Array(s))})}decodeBase64StringUtf8(t){let n=xn.toByteArray(mi.padBase64(t));return new TextDecoder().decode(n)}encodeBase64StringUtf8(t){let n=new TextEncoder().encode(t);return xn.fromByteArray(n)}sha256DigestHex(t){return I(this,null,function*(){let n=new TextEncoder().encode(t),r=yield window.crypto.subtle.digest("SHA-256",n);return _y.fromArrayBufferToHex(r)})}signWithHmacSha256(t,n){return I(this,null,function*(){let r=typeof t=="string"?t:String.fromCharCode(...new Uint16Array(t)),i=new TextEncoder,a=yield window.crypto.subtle.importKey("raw",i.encode(r),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,i.encode(n))})}};ma.BrowserCrypto=mi});var ef=K(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.NodeCrypto=void 0;var An=require("crypto"),Zl=class{sha256DigestBase64(t){return I(this,null,function*(){return An.createHash("sha256").update(t).digest("base64")})}randomBytesBase64(t){return An.randomBytes(t).toString("base64")}verify(t,n,r){return I(this,null,function*(){let i=An.createVerify("sha256");return i.update(n),i.end(),i.verify(t,r,"base64")})}sign(t,n){return I(this,null,function*(){let r=An.createSign("RSA-SHA256");return r.update(n),r.end(),r.sign(t,"base64")})}decodeBase64StringUtf8(t){return Buffer.from(t,"base64").toString("utf-8")}encodeBase64StringUtf8(t){return Buffer.from(t,"utf-8").toString("base64")}sha256DigestHex(t){return I(this,null,function*(){return An.createHash("sha256").update(t).digest("hex")})}signWithHmacSha256(t,n){return I(this,null,function*(){let r=typeof t=="string"?t:Sy(t);return xy(An.createHmac("sha256",r).update(n).digest())})}};Ca.NodeCrypto=Zl;function xy(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function Sy(e){return Buffer.from(e)}});var Sn=K(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.fromArrayBufferToHex=wr.hasBrowserCrypto=wr.createCrypto=void 0;var Ay=Xl(),wy=ef();function by(){return tf()?new Ay.BrowserCrypto:new wy.NodeCrypto}wr.createCrypto=by;function tf(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}wr.hasBrowserCrypto=tf;function Iy(e){return Array.from(new Uint8Array(e)).map(n=>n.toString(16).padStart(2,"0")).join("")}wr.fromArrayBufferToHex=Iy});var rf=K(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.validate=void 0;function ky(e){let t=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(let n of t)if(e[n.invalid]){let r=`'${n.invalid}' is not a valid configuration option. Please use '${n.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(r)}}Ea.validate=ky});var nf=K((Ox,By)=>{By.exports={_args:[["google-auth-library@7.14.1","/home/runner/work/obsidian-google-tasks/obsidian-google-tasks"]],_from:"google-auth-library@7.14.1",_id:"google-auth-library@7.14.1",_inBundle:!1,_integrity:"sha512-5Rk7iLNDFhFeBYc3s8l1CqzbEBcdhwR193RlD4vSNFajIcINKI8W8P0JLmBpwymHqqWbX34pJDQu39cSy/6RsA==",_location:"/google-auth-library",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"google-auth-library@7.14.1",name:"google-auth-library",escapedName:"google-auth-library",rawSpec:"7.14.1",saveSpec:null,fetchSpec:"7.14.1"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/google-auth-library/-/google-auth-library-7.14.1.tgz",_spec:"7.14.1",_where:"/home/runner/work/obsidian-google-tasks/obsidian-google-tasks",author:{name:"Google Inc."},bugs:{url:"https://github.com/googleapis/google-auth-library-nodejs/issues"},dependencies:{arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^4.0.0","gcp-metadata":"^4.2.0",gtoken:"^5.0.4",jws:"^4.0.0","lru-cache":"^6.0.0"},description:"Google APIs Authentication Client Library for Node.js",devDependencies:{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^2.0.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^2.0.0",mocha:"^8.0.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^13.0.0",sinon:"^13.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^3.8.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},engines:{node:">=10"},files:["build/src","!build/src/**/*.map"],homepage:"https://github.com/googleapis/google-auth-library-nodejs#readme",keywords:["google","api","google apis","client","client library"],license:"Apache-2.0",main:"./build/src/index.js",name:"google-auth-library",repository:{type:"git",url:"git+https://github.com/googleapis/google-auth-library-nodejs.git"},scripts:{"browser-test":"karma start",clean:"gts clean",compile:"tsc -p .",docs:"compodoc src/","docs-test":"linkinator docs",fix:"gts fix",lint:"gts check",precompile:"gts clean","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test":"npm run compile",pretest:"npm run compile","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000",test:"c8 mocha build/test",webpack:"webpack"},types:"./build/src/index.d.ts",version:"7.14.1"}});var Ci=K(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.DefaultTransporter=void 0;var af=fa(),Ny=rf(),sf=nf(),of="google-api-nodejs-client",wn=class{configure(t={}){if(t.headers=t.headers||{},typeof window=="undefined"){let n=t.headers["User-Agent"];n?n.includes(`${of}/`)||(t.headers["User-Agent"]=`${n} ${wn.USER_AGENT}`):t.headers["User-Agent"]=wn.USER_AGENT;let r=`auth/${sf.version}`;if(t.headers["x-goog-api-client"]&&!t.headers["x-goog-api-client"].includes(r))t.headers["x-goog-api-client"]=`${t.headers["x-goog-api-client"]} ${r}`;else if(!t.headers["x-goog-api-client"]){let i=process.version.replace(/^v/,"");t.headers["x-goog-api-client"]=`gl-node/${i} ${r}`}}return t}request(t,n){t=this.configure(t);try{Ny.validate(t)}catch(r){if(n)return n(r);throw r}if(n)af.request(t).then(r=>{n(null,r)},r=>{n(this.processError(r))});else return af.request(t).catch(r=>{throw this.processError(r)})}processError(t){let n=t.response,r=t,i=n?n.data:null;return n&&i&&i.error&&n.status!==200?typeof i.error=="string"?(r.message=i.error,r.code=n.status.toString()):Array.isArray(i.error.errors)?(r.message=i.error.errors.map(a=>a.message).join(`
`),r.code=i.error.code,r.errors=i.error.errors):(r.message=i.error.message,r.code=i.error.code||n.status):n&&n.status>=400&&(r.message=i,r.code=n.status.toString()),r}};Ta.DefaultTransporter=wn;wn.USER_AGENT=`${of}/${sf.version}`});var uf=K((Ux,cf)=>{"use strict";var Ry=e=>e==null?[]:Array.isArray(e)?e:typeof e=="string"?[e]:typeof e[Symbol.iterator]=="function"?[...e]:[e];cf.exports=Ry});var bn=K((co,ff)=>{var _a=require("buffer"),tr=_a.Buffer;function lf(e,t){for(var n in e)t[n]=e[n]}tr.from&&tr.alloc&&tr.allocUnsafe&&tr.allocUnsafeSlow?ff.exports=_a:(lf(_a,co),co.Buffer=Yr);function Yr(e,t,n){return tr(e,t,n)}Yr.prototype=Object.create(tr.prototype);lf(tr,Yr);Yr.from=function(e,t,n){if(typeof e=="number")throw new TypeError("Argument must not be a number");return tr(e,t,n)};Yr.alloc=function(e,t,n){if(typeof e!="number")throw new TypeError("Argument must be a number");var r=tr(e);return t!==void 0?typeof n=="string"?r.fill(t,n):r.fill(t):r.fill(0),r};Yr.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return tr(e)};Yr.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return _a.SlowBuffer(e)}});var df=K((Fx,hf)=>{"use strict";function uo(e){var t=(e/8|0)+(e%8==0?0:1);return t}var Ly={ES256:uo(256),ES384:uo(384),ES512:uo(521)};function Dy(e){var t=Ly[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}hf.exports=Dy});var lo=K((qx,Cf)=>{"use strict";var xa=bn().Buffer,pf=df(),Sa=128,gf=0,Oy=32,Py=16,Uy=2,yf=Py|Oy|gf<<6,Aa=Uy|gf<<6;function Fy(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vf(e){if(xa.isBuffer(e))return e;if(typeof e=="string")return xa.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function qy(e,t){e=vf(e);var n=pf(t),r=n+1,i=e.length,a=0;if(e[a++]!==yf)throw new Error('Could not find expected "seq"');var s=e[a++];if(s===(Sa|1)&&(s=e[a++]),i-a<s)throw new Error('"seq" specified length of "'+s+'", only "'+(i-a)+'" remaining');if(e[a++]!==Aa)throw new Error('Could not find expected "int" for "r"');var o=e[a++];if(i-a-2<o)throw new Error('"r" specified length of "'+o+'", only "'+(i-a-2)+'" available');if(r<o)throw new Error('"r" specified length of "'+o+'", max of "'+r+'" is acceptable');var c=a;if(a+=o,e[a++]!==Aa)throw new Error('Could not find expected "int" for "s"');var u=e[a++];if(i-a!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-a)+'"');if(r<u)throw new Error('"s" specified length of "'+u+'", max of "'+r+'" is acceptable');var l=a;if(a+=u,a!==i)throw new Error('Expected to consume entire buffer, but "'+(i-a)+'" bytes remain');var f=n-o,h=n-u,v=xa.allocUnsafe(f+o+h+u);for(a=0;a<f;++a)v[a]=0;e.copy(v,a,c+Math.max(-f,0),c+o),a=n;for(var g=a;a<g+h;++a)v[a]=0;return e.copy(v,a,l+Math.max(-h,0),l+u),v=v.toString("base64"),v=Fy(v),v}function mf(e,t,n){for(var r=0;t+r<n&&e[t+r]===0;)++r;var i=e[t+r]>=Sa;return i&&--r,r}function My(e,t){e=vf(e);var n=pf(t),r=e.length;if(r!==n*2)throw new TypeError('"'+t+'" signatures must be "'+n*2+'" bytes, saw "'+r+'"');var i=mf(e,0,n),a=mf(e,n,e.length),s=n-i,o=n-a,c=1+1+s+1+1+o,u=c<Sa,l=xa.allocUnsafe((u?2:3)+c),f=0;return l[f++]=yf,u?l[f++]=c:(l[f++]=Sa|1,l[f++]=c&255),l[f++]=Aa,l[f++]=s,i<0?(l[f++]=0,f+=e.copy(l,f,0,n)):f+=e.copy(l,f,i,n),l[f++]=Aa,l[f++]=o,a<0?(l[f++]=0,e.copy(l,f,n)):e.copy(l,f,n+a),l}Cf.exports={derToJose:qy,joseToDer:My}});var Ei=K(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.AuthClient=void 0;var Vy=require("events"),Gy=Ci(),Ef=class extends Vy.EventEmitter{constructor(){super(...arguments);this.transporter=new Gy.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(t){this.credentials=t}addSharedMetadataHeaders(t){return!t["x-goog-user-project"]&&this.quotaProjectId&&(t["x-goog-user-project"]=this.quotaProjectId),t}};wa.AuthClient=Ef});var fo=K(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.LoginTicket=void 0;var Tf=class{constructor(t,n){this.envelope=t,this.payload=n}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let t=this.getPayload();return t&&t.sub?t.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};ba.LoginTicket=Tf});var Qr=K(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.OAuth2Client=rr.CertificateFormat=rr.CodeChallengeMethod=void 0;var Ia=require("querystring"),Ky=require("stream"),jy=lo(),ho=Sn(),Hy=Ei(),$y=fo(),zy;(function(e){e.Plain="plain",e.S256="S256"})(zy=rr.CodeChallengeMethod||(rr.CodeChallengeMethod={}));var br;(function(e){e.PEM="PEM",e.JWK="JWK"})(br=rr.CertificateFormat||(rr.CertificateFormat={}));var Ke=class extends Hy.AuthClient{constructor(t,n,r){super();this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=br.PEM,this.refreshTokenPromises=new Map;let i=t&&typeof t=="object"?t:{clientId:t,clientSecret:n,redirectUri:r};this._clientId=i.clientId,this._clientSecret=i.clientSecret,this.redirectUri=i.redirectUri,this.eagerRefreshThresholdMillis=i.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!i.forceRefreshOnFailure}generateAuthUrl(t={}){if(t.code_challenge_method&&!t.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return t.response_type=t.response_type||"code",t.client_id=t.client_id||this._clientId,t.redirect_uri=t.redirect_uri||this.redirectUri,t.scope instanceof Array&&(t.scope=t.scope.join(" ")),Ke.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+Ia.stringify(t)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}generateCodeVerifierAsync(){return I(this,null,function*(){let t=ho.createCrypto(),r=t.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),a=(yield t.sha256DigestBase64(r)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:r,codeChallenge:a}})}getToken(t,n){let r=typeof t=="string"?{code:t}:t;if(n)this.getTokenAsync(r).then(i=>n(null,i.tokens,i.res),i=>n(i,null,i.response));else return this.getTokenAsync(r)}getTokenAsync(t){return I(this,null,function*(){let n=Ke.GOOGLE_OAUTH2_TOKEN_URL_,r={code:t.code,client_id:t.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:t.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:t.codeVerifier},i=yield this.transporter.request({method:"POST",url:n,data:Ia.stringify(r),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshToken(t){return I(this,null,function*(){if(!t)return this.refreshTokenNoCache(t);if(this.refreshTokenPromises.has(t))return this.refreshTokenPromises.get(t);let n=this.refreshTokenNoCache(t).then(r=>(this.refreshTokenPromises.delete(t),r),r=>{throw this.refreshTokenPromises.delete(t),r});return this.refreshTokenPromises.set(t,n),n})}refreshTokenNoCache(t){return I(this,null,function*(){if(!t)throw new Error("No refresh token is set.");let n=Ke.GOOGLE_OAUTH2_TOKEN_URL_,r={refresh_token:t,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=yield this.transporter.request({method:"POST",url:n,data:Ia.stringify(r),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshAccessToken(t){if(t)this.refreshAccessTokenAsync().then(n=>t(null,n.credentials,n.res),t);else return this.refreshAccessTokenAsync()}refreshAccessTokenAsync(){return I(this,null,function*(){let t=yield this.refreshToken(this.credentials.refresh_token),n=t.tokens;return n.refresh_token=this.credentials.refresh_token,this.credentials=n,{credentials:this.credentials,res:t.res}})}getAccessToken(t){if(t)this.getAccessTokenAsync().then(n=>t(null,n.token,n.res),t);else return this.getAccessTokenAsync()}getAccessTokenAsync(){return I(this,null,function*(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let r=yield this.processAndValidateRefreshHandler();if(r==null?void 0:r.access_token)return this.setCredentials(r),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let n=yield this.refreshAccessTokenAsync();if(!n.credentials||n.credentials&&!n.credentials.access_token)throw new Error("Could not refresh access token.");return{token:n.credentials.access_token,res:n.res}}else return{token:this.credentials.access_token}})}getRequestHeaders(t){return I(this,null,function*(){return(yield this.getRequestMetadataAsync(t)).headers})}getRequestMetadataAsync(t){return I(this,null,function*(){let n=this.credentials;if(!n.access_token&&!n.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(n.access_token&&!this.isTokenExpiring()){n.token_type=n.token_type||"Bearer";let o={Authorization:n.token_type+" "+n.access_token};return{headers:this.addSharedMetadataHeaders(o)}}if(this.refreshHandler){let o=yield this.processAndValidateRefreshHandler();if(o==null?void 0:o.access_token){this.setCredentials(o);let c={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(c)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let r=null,i=null;try{r=yield this.refreshToken(n.refresh_token),i=r.tokens}catch(o){let c=o;throw c.response&&(c.response.status===403||c.response.status===404)&&(c.message=`Could not refresh access token: ${c.message}`),c}let a=this.credentials;a.token_type=a.token_type||"Bearer",i.refresh_token=a.refresh_token,this.credentials=i;let s={Authorization:a.token_type+" "+i.access_token};return{headers:this.addSharedMetadataHeaders(s),res:r.res}})}static getRevokeTokenUrl(t){let n=Ia.stringify({token:t});return`${Ke.GOOGLE_OAUTH2_REVOKE_URL_}?${n}`}revokeToken(t,n){let r={url:Ke.getRevokeTokenUrl(t),method:"POST"};if(n)this.transporter.request(r).then(i=>n(null,i),n);else return this.transporter.request(r)}revokeCredentials(t){if(t)this.revokeCredentialsAsync().then(n=>t(null,n),t);else return this.revokeCredentialsAsync()}revokeCredentialsAsync(){return I(this,null,function*(){let t=this.credentials.access_token;if(this.credentials={},t)return this.revokeToken(t);throw new Error("No access token to revoke.")})}request(t,n){if(n)this.requestAsync(t).then(r=>n(null,r),r=>n(r,r.response));else return this.requestAsync(t)}requestAsync(t,n=!1){return I(this,null,function*(){let r;try{let i=yield this.getRequestMetadataAsync(t.url);t.headers=t.headers||{},i.headers&&i.headers["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i.headers["x-goog-user-project"]),i.headers&&i.headers.Authorization&&(t.headers.Authorization=i.headers.Authorization),this.apiKey&&(t.headers["X-Goog-Api-Key"]=this.apiKey),r=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,o=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),c=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,u=a.config.data instanceof Ky.Readable,l=s===401||s===403;if(!n&&l&&!u&&o)return yield this.refreshAccessTokenAsync(),this.requestAsync(t,!0);if(!n&&l&&!u&&c){let f=yield this.processAndValidateRefreshHandler();return(f==null?void 0:f.access_token)&&this.setCredentials(f),this.requestAsync(t,!0)}}throw i}return r})}verifyIdToken(t,n){if(n&&typeof n!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(n)this.verifyIdTokenAsync(t).then(r=>n(null,r),n);else return this.verifyIdTokenAsync(t)}verifyIdTokenAsync(t){return I(this,null,function*(){if(!t.idToken)throw new Error("The verifyIdToken method requires an ID Token");let n=yield this.getFederatedSignonCertsAsync();return yield this.verifySignedJwtWithCertsAsync(t.idToken,n.certs,t.audience,Ke.ISSUERS_,t.maxExpiry)})}getTokenInfo(t){return I(this,null,function*(){let{data:n}=yield this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${t}`},url:Ke.GOOGLE_TOKEN_INFO_URL}),r=Object.assign({expiry_date:new Date().getTime()+n.expires_in*1e3,scopes:n.scope.split(" ")},n);return delete r.expires_in,delete r.scope,r})}getFederatedSignonCerts(t){if(t)this.getFederatedSignonCertsAsync().then(n=>t(null,n.certs,n.res),t);else return this.getFederatedSignonCertsAsync()}getFederatedSignonCertsAsync(){return I(this,null,function*(){let t=new Date().getTime(),n=ho.hasBrowserCrypto()?br.JWK:br.PEM;if(this.certificateExpiry&&t<this.certificateExpiry.getTime()&&this.certificateCacheFormat===n)return{certs:this.certificateCache,format:n};let r,i;switch(n){case br.PEM:i=Ke.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case br.JWK:i=Ke.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${n}`)}try{r=yield this.transporter.request({url:i})}catch(u){throw u.message=`Failed to retrieve verification certificates: ${u.message}`,u}let a=r?r.headers["cache-control"]:void 0,s=-1;if(a){let l=new RegExp("max-age=([0-9]*)").exec(a);l&&l.length===2&&(s=Number(l[1])*1e3)}let o={};switch(n){case br.PEM:o=r.data;break;case br.JWK:for(let u of r.data.keys)o[u.kid]=u;break;default:throw new Error(`Unsupported certificate format ${n}`)}let c=new Date;return this.certificateExpiry=s===-1?null:new Date(c.getTime()+s),this.certificateCache=o,this.certificateCacheFormat=n,{certs:o,format:n,res:r}})}getIapPublicKeys(t){if(t)this.getIapPublicKeysAsync().then(n=>t(null,n.pubkeys,n.res),t);else return this.getIapPublicKeysAsync()}getIapPublicKeysAsync(){return I(this,null,function*(){let t,n=Ke.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{t=yield this.transporter.request({url:n})}catch(r){throw r.message=`Failed to retrieve verification certificates: ${r.message}`,r}return{pubkeys:t.data,res:t}})}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}verifySignedJwtWithCertsAsync(t,n,r,i,a){return I(this,null,function*(){let s=ho.createCrypto();a||(a=Ke.MAX_TOKEN_LIFETIME_SECS_);let o=t.split(".");if(o.length!==3)throw new Error("Wrong number of segments in token: "+t);let c=o[0]+"."+o[1],u=o[2],l,f;try{l=JSON.parse(s.decodeBase64StringUtf8(o[0]))}catch(B){throw B.message=`Can't parse token envelope: ${o[0]}': ${B.message}`,B}if(!l)throw new Error("Can't parse token envelope: "+o[0]);try{f=JSON.parse(s.decodeBase64StringUtf8(o[1]))}catch(B){throw B.message=`Can't parse token payload '${o[0]}`,B}if(!f)throw new Error("Can't parse token payload: "+o[1]);if(!Object.prototype.hasOwnProperty.call(n,l.kid))throw new Error("No pem found for envelope: "+JSON.stringify(l));let h=n[l.kid];if(l.alg==="ES256"&&(u=jy.joseToDer(u,"ES256").toString("base64")),!(yield s.verify(h,c,u)))throw new Error("Invalid token signature: "+t);if(!f.iat)throw new Error("No issue time in token: "+JSON.stringify(f));if(!f.exp)throw new Error("No expiration time in token: "+JSON.stringify(f));let g=Number(f.iat);if(isNaN(g))throw new Error("iat field using invalid format");let C=Number(f.exp);if(isNaN(C))throw new Error("exp field using invalid format");let T=new Date().getTime()/1e3;if(C>=T+a)throw new Error("Expiration time too far in future: "+JSON.stringify(f));let _=g-Ke.CLOCK_SKEW_SECS_,U=C+Ke.CLOCK_SKEW_SECS_;if(T<_)throw new Error("Token used too early, "+T+" < "+_+": "+JSON.stringify(f));if(T>U)throw new Error("Token used too late, "+T+" > "+U+": "+JSON.stringify(f));if(i&&i.indexOf(f.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+f.iss);if(typeof r!="undefined"&&r!==null){let B=f.aud,G=!1;if(r.constructor===Array?G=r.indexOf(B)>-1:G=B===r,!G)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new $y.LoginTicket(l,f)})}processAndValidateRefreshHandler(){return I(this,null,function*(){if(this.refreshHandler){let t=yield this.refreshHandler();if(!t.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return t}})}isTokenExpiring(){let t=this.credentials.expiry_date;return t?t<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};rr.OAuth2Client=Ke;Ke.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";Ke.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth";Ke.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token";Ke.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke";Ke.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs";Ke.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs";Ke.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key";Ke.CLOCK_SKEW_SECS_=300;Ke.MAX_TOKEN_LIFETIME_SECS_=86400;Ke.ISSUERS_=["accounts.google.com","https://accounts.google.com"]});var po=K(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.Compute=void 0;var Wy=uf(),_f=ya(),Yy=Qr(),xf=class extends Yy.OAuth2Client{constructor(t={}){super(t);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=t.serviceAccountEmail||"default",this.scopes=Wy(t.scopes)}refreshTokenNoCache(t){return I(this,null,function*(){let n=`service-accounts/${this.serviceAccountEmail}/token`,r;try{let a={property:n};this.scopes.length>0&&(a.params={scopes:this.scopes.join(",")}),r=yield _f.instance(a)}catch(a){throw a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a),a}let i=r;return r&&r.expires_in&&(i.expiry_date=new Date().getTime()+r.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:null}})}fetchIdToken(t){return I(this,null,function*(){let n=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${t}`,r;try{let i={property:n};r=yield _f.instance(i)}catch(i){throw i.message=`Could not fetch ID token: ${i.message}`,i}return r})}wrapError(t){let n=t.response;n&&n.status&&(t.code=n.status.toString(),n.status===403?t.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+t.message:n.status===404&&(t.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+t.message))}};ka.Compute=xf});var go=K(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.IdTokenClient=void 0;var Qy=Qr(),Sf=class extends Qy.OAuth2Client{constructor(t){super();this.targetAudience=t.targetAudience,this.idTokenProvider=t.idTokenProvider}getRequestMetadataAsync(t){return I(this,null,function*(){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){let r=yield this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:r,expiry_date:this.getIdTokenExpiryDate(r)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}})}getIdTokenExpiryDate(t){let n=t.split(".")[1];if(n)return JSON.parse(Buffer.from(n,"base64").toString("ascii")).exp*1e3}};Ba.IdTokenClient=Sf});var yo=K(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.getEnv=yr.clear=yr.GCPEnv=void 0;var Af=ya(),Ir;(function(e){e.APP_ENGINE="APP_ENGINE",e.KUBERNETES_ENGINE="KUBERNETES_ENGINE",e.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",e.COMPUTE_ENGINE="COMPUTE_ENGINE",e.CLOUD_RUN="CLOUD_RUN",e.NONE="NONE"})(Ir=yr.GCPEnv||(yr.GCPEnv={}));var Ti;function Jy(){Ti=void 0}yr.clear=Jy;function Xy(){return I(this,null,function*(){return Ti||(Ti=Zy(),Ti)})}yr.getEnv=Xy;function Zy(){return I(this,null,function*(){let e=Ir.NONE;return ev()?e=Ir.APP_ENGINE:tv()?e=Ir.CLOUD_FUNCTIONS:(yield iv())?(yield nv())?e=Ir.KUBERNETES_ENGINE:rv()?e=Ir.CLOUD_RUN:e=Ir.COMPUTE_ENGINE:e=Ir.NONE,e})}function ev(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function tv(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function rv(){return!!process.env.K_CONFIGURATION}function nv(){return I(this,null,function*(){try{return yield Af.instance("attributes/cluster-name"),!0}catch(e){return!1}})}function iv(){return I(this,null,function*(){return Af.isAvailable()})}});var vo=K(($x,wf)=>{var Na=bn().Buffer,av=require("stream"),sv=require("util");function Ra(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=Na.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=Na.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}sv.inherits(Ra,av);Ra.prototype.write=function(t){this.buffer=Na.concat([this.buffer,Na.from(t)]),this.emit("data",t)};Ra.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1};wf.exports=Ra});var If=K((zx,bf)=>{"use strict";var _i=require("buffer").Buffer,mo=require("buffer").SlowBuffer;bf.exports=La;function La(e,t){if(!_i.isBuffer(e)||!_i.isBuffer(t)||e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}La.install=function(){_i.prototype.equal=mo.prototype.equal=function(t){return La(this,t)}};var ov=_i.prototype.equal,cv=mo.prototype.equal;La.restore=function(){_i.prototype.equal=ov,mo.prototype.equal=cv}});var To=K((Wx,Uf)=>{var uv=If(),In=bn().Buffer,nr=require("crypto"),kf=lo(),Bf=require("util"),lv=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,xi="secret must be a string or buffer",kn="key must be a string or a buffer",fv="key must be a string, a buffer or an object",Co=typeof nr.createPublicKey=="function";Co&&(kn+=" or a KeyObject",xi+="or a KeyObject");function Nf(e){if(!In.isBuffer(e)&&typeof e!="string"&&(!Co||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw Kt(kn)}function Rf(e){if(!In.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw Kt(fv)}function hv(e){if(!In.isBuffer(e)){if(typeof e=="string")return e;if(!Co||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw Kt(xi)}}function Eo(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lf(e){e=e.toString();var t=4-e.length%4;if(t!==4)for(var n=0;n<t;++n)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function Kt(e){var t=[].slice.call(arguments,1),n=Bf.format.bind(Bf,e).apply(null,t);return new TypeError(n)}function dv(e){return In.isBuffer(e)||typeof e=="string"}function Si(e){return dv(e)||(e=JSON.stringify(e)),e}function Df(e){return function(n,r){hv(r),n=Si(n);var i=nr.createHmac("sha"+e,r),a=(i.update(n),i.digest("base64"));return Eo(a)}}function pv(e){return function(n,r,i){var a=Df(e)(n,i);return uv(In.from(r),In.from(a))}}function Of(e){return function(n,r){Rf(r),n=Si(n);var i=nr.createSign("RSA-SHA"+e),a=(i.update(n),i.sign(r,"base64"));return Eo(a)}}function Pf(e){return function(n,r,i){Nf(i),n=Si(n),r=Lf(r);var a=nr.createVerify("RSA-SHA"+e);return a.update(n),a.verify(i,r,"base64")}}function gv(e){return function(n,r){Rf(r),n=Si(n);var i=nr.createSign("RSA-SHA"+e),a=(i.update(n),i.sign({key:r,padding:nr.constants.RSA_PKCS1_PSS_PADDING,saltLength:nr.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Eo(a)}}function yv(e){return function(n,r,i){Nf(i),n=Si(n),r=Lf(r);var a=nr.createVerify("RSA-SHA"+e);return a.update(n),a.verify({key:i,padding:nr.constants.RSA_PKCS1_PSS_PADDING,saltLength:nr.constants.RSA_PSS_SALTLEN_DIGEST},r,"base64")}}function vv(e){var t=Of(e);return function(){var r=t.apply(null,arguments);return r=kf.derToJose(r,"ES"+e),r}}function mv(e){var t=Pf(e);return function(r,i,a){i=kf.joseToDer(i,"ES"+e).toString("base64");var s=t(r,i,a);return s}}function Cv(){return function(){return""}}function Ev(){return function(t,n){return n===""}}Uf.exports=function(t){var n={hs:Df,rs:Of,ps:gv,es:vv,none:Cv},r={hs:pv,rs:Pf,ps:yv,es:mv,none:Ev},i=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw Kt(lv,t);var a=(i[1]||i[3]).toLowerCase(),s=i[2];return{sign:n[a](s),verify:r[a](s)}}});var _o=K((Yx,Ff)=>{var Tv=require("buffer").Buffer;Ff.exports=function(t){return typeof t=="string"?t:typeof t=="number"||Tv.isBuffer(t)?t.toString():JSON.stringify(t)}});var jf=K((Qx,Kf)=>{var _v=bn().Buffer,qf=vo(),xv=To(),Sv=require("stream"),Mf=_o(),xo=require("util");function Vf(e,t){return _v.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Av(e,t,n){n=n||"utf8";var r=Vf(Mf(e),"binary"),i=Vf(Mf(t),n);return xo.format("%s.%s",r,i)}function Gf(e){var t=e.header,n=e.payload,r=e.secret||e.privateKey,i=e.encoding,a=xv(t.alg),s=Av(t,n,i),o=a.sign(s,r);return xo.format("%s.%s",s,o)}function Da(e){var t=e.secret||e.privateKey||e.key,n=new qf(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=n,this.payload=new qf(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}xo.inherits(Da,Sv);Da.prototype.sign=function(){try{var t=Gf({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};Da.sign=Gf;Kf.exports=Da});var e0=K((Jx,Zf)=>{var Hf=bn().Buffer,$f=vo(),wv=To(),bv=require("stream"),zf=_o(),Iv=require("util"),kv=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Bv(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nv(e){if(Bv(e))return e;try{return JSON.parse(e)}catch(t){return}}function Wf(e){var t=e.split(".",1)[0];return Nv(Hf.from(t,"base64").toString("binary"))}function Rv(e){return e.split(".",2).join(".")}function Yf(e){return e.split(".")[2]}function Lv(e,t){t=t||"utf8";var n=e.split(".")[1];return Hf.from(n,"base64").toString(t)}function Qf(e){return kv.test(e)&&!!Wf(e)}function Jf(e,t,n){if(!t){var r=new Error("Missing algorithm parameter for jws.verify");throw r.code="MISSING_ALGORITHM",r}e=zf(e);var i=Yf(e),a=Rv(e),s=wv(t);return s.verify(a,i,n)}function Xf(e,t){if(t=t||{},e=zf(e),!Qf(e))return null;var n=Wf(e);if(!n)return null;var r=Lv(e);return(n.typ==="JWT"||t.json)&&(r=JSON.parse(r,t.encoding)),{header:n,payload:r,signature:Yf(e)}}function Bn(e){e=e||{};var t=e.secret||e.publicKey||e.key,n=new $f(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=n,this.signature=new $f(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}Iv.inherits(Bn,bv);Bn.prototype.verify=function(){try{var t=Jf(this.signature.buffer,this.algorithm,this.key.buffer),n=Xf(this.signature.buffer,this.encoding);return this.emit("done",t,n),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};Bn.decode=Xf;Bn.isValid=Qf;Bn.verify=Jf;Zf.exports=Bn});var So=K(kr=>{var t0=jf(),Oa=e0(),Dv=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];kr.ALGORITHMS=Dv;kr.sign=t0.sign;kr.verify=Oa.verify;kr.decode=Oa.decode;kr.isValid=Oa.isValid;kr.createSign=function(t){return new t0(t)};kr.createVerify=function(t){return new Oa(t)}});var me=K((Zx,r0)=>{r0.exports={options:{usePureJavaScript:!1}}});var a0=K((eS,i0)=>{var Ao={};i0.exports=Ao;var n0={};Ao.encode=function(e,t,n){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(e instanceof Uint8Array))r=Ov(e,t);else{var i=0,a=t.length,s=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<o.length;++c)u+=o[c]<<8,o[c]=u%a,u=u/a|0;for(;u>0;)o.push(u%a),u=u/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)r+=s;for(i=o.length-1;i>=0;--i)r+=t[o[i]]}if(n){var l=new RegExp(".{1,"+n+"}","g");r=r.match(l).join(`\r
`)}return r};Ao.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var n=n0[t];if(!n){n=n0[t]=[];for(var r=0;r<t.length;++r)n[t.charCodeAt(r)]=r}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],r=0;r<e.length;r++){var o=n[e.charCodeAt(r)];if(o===void 0)return;for(var c=0,u=o;c<s.length;++c)u+=s[c]*i,s[c]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var l=0;e[l]===a&&l<e.length-1;++l)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Ov(e,t){var n=0,r=t.length,i=t.charAt(0),a=[0];for(n=0;n<e.length();++n){for(var s=0,o=e.at(n);s<a.length;++s)o+=a[s]<<8,a[s]=o%r,o=o/r|0;for(;o>0;)a.push(o%r),o=o/r|0}var c="";for(n=0;e.at(n)===0&&n<e.length()-1;++n)c+=i;for(n=a.length-1;n>=0;--n)c+=t[a[n]];return c}});var Le=K((tS,u0)=>{var s0=me(),o0=a0(),w=u0.exports=s0.util=s0.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){w.nextTick=process.nextTick,typeof setImmediate=="function"?w.setImmediate=setImmediate:w.setImmediate=w.nextTick;return}if(typeof setImmediate=="function"){w.setImmediate=function(){return setImmediate.apply(void 0,arguments)},w.nextTick=function(o){return setImmediate(o)};return}if(w.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var u=t.slice();t.length=0,u.forEach(function(l){l()})}};var s=o,e="forge.setImmediate",t=[];w.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var n=Date.now(),r=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var a=w.setImmediate;w.setImmediate=function(c){Date.now()-n>15?(n=Date.now(),a(c)):(t.push(c),t.length===1&&i.setAttribute("a",r=!r))}}w.nextTick=w.setImmediate})();w.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;w.globalScope=function(){return w.isNodejs?global:typeof self=="undefined"?window:self}();w.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};w.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};w.isArrayBufferView=function(e){return e&&w.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Ai(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}w.ByteBuffer=wo;function wo(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(w.isArrayBuffer(e)||w.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(r){for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof wo||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}w.ByteStringBuffer=wo;var Pv=4096;w.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>Pv&&(this.data.substr(0,1),this._constructedStringLength=0)};w.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};w.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};w.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};w.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this};w.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};w.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(w.encodeUtf8(e))};w.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};w.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};w.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};w.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};w.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};w.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};w.ByteStringBuffer.prototype.putInt=function(e,t){Ai(t);var n="";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)};w.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};w.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};w.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};w.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};w.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};w.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};w.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};w.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};w.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};w.ByteStringBuffer.prototype.getInt=function(e){Ai(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};w.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};w.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};w.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};w.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};w.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};w.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};w.ByteStringBuffer.prototype.copy=function(){var e=w.createBuffer(this.data);return e.read=this.read,e};w.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};w.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};w.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};w.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e};w.ByteStringBuffer.prototype.toString=function(){return w.decodeUtf8(this.bytes())};function Uv(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=w.isArrayBuffer(e),r=w.isArrayBufferView(e);if(n||r){n?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}w.DataBuffer=Uv;w.DataBuffer.prototype.length=function(){return this.write-this.read};w.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};w.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this};w.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};w.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this};w.DataBuffer.prototype.putBytes=function(e,t){if(w.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if(w.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof w.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&w.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(e instanceof w.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=w.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=w.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=w.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=w.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=w.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};w.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};w.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};w.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};w.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};w.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};w.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};w.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};w.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};w.DataBuffer.prototype.putInt=function(e,t){Ai(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};w.DataBuffer.prototype.putSignedInt=function(e,t){return Ai(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};w.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};w.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};w.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};w.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};w.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};w.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};w.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};w.DataBuffer.prototype.getInt=function(e){Ai(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};w.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};w.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};w.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};w.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};w.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};w.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};w.DataBuffer.prototype.copy=function(){return new w.DataBuffer(this)};w.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};w.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};w.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};w.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e};w.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return w.binary.raw.encode(t);if(e==="hex")return w.binary.hex.encode(t);if(e==="base64")return w.binary.base64.encode(t);if(e==="utf8")return w.text.utf8.decode(t);if(e==="utf16")return w.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};w.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=w.encodeUtf8(e)),new w.ByteBuffer(e)};w.fillString=function(e,t){for(var n="";t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return n};w.xorBytes=function(e,t,n){for(var r="",i="",a="",s=0,o=0;n>0;--n,++s)i=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(r+=a,a="",o=0),a+=String.fromCharCode(i),++o;return r+=a,r};w.hexToBytes=function(e){var t="",n=0;for(e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t};w.bytesToHex=function(e){return w.createBuffer(e).toHex()};w.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var Br="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Nr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],c0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";w.encode64=function(e,t){for(var n="",r="",i,a,s,o=0;o<e.length;)i=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),n+=Br.charAt(i>>2),n+=Br.charAt((i&3)<<4|a>>4),isNaN(a)?n+="==":(n+=Br.charAt((a&15)<<2|s>>6),n+=isNaN(s)?"=":Br.charAt(s&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};w.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",n,r,i,a,s=0;s<e.length;)n=Nr[e.charCodeAt(s++)-43],r=Nr[e.charCodeAt(s++)-43],i=Nr[e.charCodeAt(s++)-43],a=Nr[e.charCodeAt(s++)-43],t+=String.fromCharCode(n<<2|r>>4),i!==64&&(t+=String.fromCharCode((r&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};w.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};w.decodeUtf8=function(e){return decodeURIComponent(escape(e))};w.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o0.encode,decode:o0.decode}};w.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};w.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,a=0;a<e.length;++a)r[i++]=e.charCodeAt(a);return t?i-n:r};w.binary.hex.encode=w.bytesToHex;w.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var i=0,a=n;for(e.length&1&&(i=1,r[a++]=parseInt(e[0],16));i<e.length;i+=2)r[a++]=parseInt(e.substr(i,2),16);return t?a-n:r};w.binary.base64.encode=function(e,t){for(var n="",r="",i,a,s,o=0;o<e.byteLength;)i=e[o++],a=e[o++],s=e[o++],n+=Br.charAt(i>>2),n+=Br.charAt((i&3)<<4|a>>4),isNaN(a)?n+="==":(n+=Br.charAt((a&15)<<2|s>>6),n+=isNaN(s)?"=":Br.charAt(s&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};w.binary.base64.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,a,s,o,c=0,u=n;c<e.length;)i=Nr[e.charCodeAt(c++)-43],a=Nr[e.charCodeAt(c++)-43],s=Nr[e.charCodeAt(c++)-43],o=Nr[e.charCodeAt(c++)-43],r[u++]=i<<2|a>>4,s!==64&&(r[u++]=(a&15)<<4|s>>2,o!==64&&(r[u++]=(s&3)<<6|o));return t?u-n:r.subarray(0,u)};w.binary.base58.encode=function(e,t){return w.binary.baseN.encode(e,c0,t)};w.binary.base58.decode=function(e,t){return w.binary.baseN.decode(e,c0,t)};w.text={utf8:{},utf16:{}};w.text.utf8.encode=function(e,t,n){e=w.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,a=0;a<e.length;++a)r[i++]=e.charCodeAt(a);return t?i-n:r};w.text.utf8.decode=function(e){return w.decodeUtf8(String.fromCharCode.apply(null,e))};w.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var a=n,s=n,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-n:r};w.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};w.deflate=function(e,t,n){if(t=w.decode64(e.deflate(w.encode64(t)).rval),n){var r=2,i=t.charCodeAt(1);i&32&&(r=6),t=t.substring(r,t.length-4)}return t};w.inflate=function(e,t,n){var r=e.inflate(w.encode64(t)).rval;return r===null?null:w.decode64(r)};var bo=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(n===null?r=e.removeItem(t):(n=w.encode64(JSON.stringify(n)),r=e.setItem(t,n)),typeof r!="undefined"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},Io=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(w.decode64(n))),n},Fv=function(e,t,n,r){var i=Io(e,t);i===null&&(i={}),i[n]=r,bo(e,t,i)},qv=function(e,t,n){var r=Io(e,t);return r!==null&&(r=n in r?r[n]:null),r},Mv=function(e,t,n){var r=Io(e,t);if(r!==null&&n in r){delete r[n];var i=!0;for(var a in r){i=!1;break}i&&(r=null),bo(e,t,r)}},Vv=function(e,t){bo(e,t,null)},Pa=function(e,t,n){var r=null;typeof n=="undefined"&&(n=["web","flash"]);var i,a=!1,s=null;for(var o in n){i=n[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");r=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,r=e.apply(this,t),a=!0)}catch(c){s=c}if(a)break}if(!a)throw s;return r};w.setItem=function(e,t,n,r,i){Pa(Fv,arguments,i)};w.getItem=function(e,t,n,r){return Pa(qv,arguments,r)};w.removeItem=function(e,t,n,r){Pa(Mv,arguments,r)};w.clearItems=function(e,t,n){Pa(Vv,arguments,n)};w.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};w.format=function(e){for(var t=/%./g,n,r,i=0,a=[],s=0;n=t.exec(e);){r=e.substring(s,t.lastIndex-2),r.length>0&&a.push(r),s=t.lastIndex;var o=n[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")};w.formatNumber=function(e,t,n,r){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=n===void 0?",":n,o=r===void 0?".":r,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+o:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-u).toFixed(a).slice(2):"")};w.formatSize=function(e){return e>=1073741824?e=w.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=w.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=w.formatNumber(e/1024,0)+" KiB":e=w.formatNumber(e,0)+" bytes",e};w.bytesFromIP=function(e){return e.indexOf(".")!==-1?w.bytesFromIPv4(e):e.indexOf(":")!==-1?w.bytesFromIPv6(e):null};w.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=w.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()};w.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var n=(8-e.length+t)*2,r=w.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){r.fillWithByte(0,n),n=0;continue}var a=w.hexToBytes(e[i]);a.length<2&&r.putByte(0),r.putBytes(a)}return r.getBytes()};w.bytesToIP=function(e){return e.length===4?w.bytesToIPv4(e):e.length===16?w.bytesToIPv6(e):null};w.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")};w.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],n=[],r=0,i=0;i<e.length;i+=2){for(var a=w.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=n[n.length-1],o=t.length;!s||o!==s.end+1?n.push({start:o,end:o}):(s.end=o,s.end-s.start>n[r].end-n[r].start&&(r=n.length-1))}t.push(a)}if(n.length>0){var c=n[r];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};w.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in w&&!e.update)return t(null,w.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return w.cores=navigator.hardwareConcurrency,t(null,w.cores);if(typeof Worker=="undefined")return w.cores=1,t(null,w.cores);if(typeof Blob=="undefined")return w.cores=2,t(null,w.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),c=o+4;Date.now()<c;);self.postMessage({st:o,et:c})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(s,o,c){if(o===0){var u=Math.floor(s.reduce(function(l,f){return l+f},0)/s.length);return w.cores=Math.max(1,u),URL.revokeObjectURL(n),t(null,w.cores)}i(c,function(l,f){s.push(a(c,f)),r(s,o-1,c)})}function i(s,o){for(var c=[],u=[],l=0;l<s;++l){var f=new Worker(n);f.addEventListener("message",function(h){if(u.push(h.data),u.length===s){for(var v=0;v<s;++v)c[v].terminate();o(null,u)}}),c.push(f)}for(var l=0;l<s;++l)c[l].postMessage(l)}function a(s,o){for(var c=[],u=0;u<s;++u)for(var l=o[u],f=c[u]=[],h=0;h<s;++h)if(u!==h){var v=o[h];(l.st>v.st&&l.st<v.et||v.st>l.st&&v.st<l.et)&&f.push(h)}return c.reduce(function(g,C){return Math.max(g,C.length)},0)}}});var Ua=K((rS,l0)=>{var it=me();Le();l0.exports=it.cipher=it.cipher||{};it.cipher.algorithms=it.cipher.algorithms||{};it.cipher.createCipher=function(e,t){var n=e;if(typeof n=="string"&&(n=it.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new it.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})};it.cipher.createDecipher=function(e,t){var n=e;if(typeof n=="string"&&(n=it.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new it.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})};it.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),it.cipher.algorithms[e]=t};it.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in it.cipher.algorithms?it.cipher.algorithms[e]:null};var ko=it.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};ko.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=it.util.createBuffer(),this.output=e.output||it.util.createBuffer(),this.mode.start(t)};ko.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};ko.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return e(this.blockSize,n,!1)},this.mode.unpad=function(n){return e(this.blockSize,n,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var No=K((nS,f0)=>{var at=me();Le();at.cipher=at.cipher||{};var Ee=f0.exports=at.cipher.modes=at.cipher.modes||{};Ee.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Ee.ecb.prototype.start=function(e){};Ee.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};Ee.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};Ee.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};Ee.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};Ee.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Ee.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=Fa(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Ee.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock};Ee.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};Ee.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};Ee.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};Ee.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=at.util.createBuffer(),this._partialBytes=0};Ee.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Fa(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ee.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};Ee.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};Ee.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=at.util.createBuffer(),this._partialBytes=0};Ee.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Fa(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ee.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};Ee.ofb.prototype.decrypt=Ee.ofb.prototype.encrypt;Ee.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=at.util.createBuffer(),this._partialBytes=0};Ee.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Fa(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ee.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}qa(this._inBlock)};Ee.ctr.prototype.decrypt=Ee.ctr.prototype.encrypt;Ee.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=at.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Ee.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=at.util.createBuffer(e.iv);this._cipherLength=0;var n;if("additionalData"in e?n=at.util.createBuffer(e.additionalData):n=at.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=at.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=t.length();if(r===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Bo(r*8)))}this._inBlock=this._j0.slice(0),qa(this._inBlock),this._partialBytes=0,n=at.util.createBuffer(n),this._aDataLength=Bo(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};Ee.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||n){if(n){var s=r%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),qa(this._inBlock)};Ee.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),qa(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};Ee.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=at.util.createBuffer();var r=this._aDataLength.concat(Bo(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};Ee.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};Ee.gcm.prototype.pow=function(e,t){for(var n=e[3]&1,r=3;r>0;--r)t[r]=e[r]>>>1|(e[r-1]&1)<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)};Ee.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=e[r]>>>(7-n%8)*4&15,a=this._m[n][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};Ee.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)};Ee.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,i=16*n,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],c=s/r|0,u=(r-1-s%r)*t;o[c]=1<<t-1<<u,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a};Ee.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,i=new Array(n);i[r]=e.slice(0);for(var a=r>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<r;){for(var s=1;s<a;++s){var o=i[a],c=i[s];i[a+s]=[o[0]^c[0],o[1]^c[1],o[2]^c[2],o[3]^c[3]]}a*=2}for(i[0]=[0,0,0,0],a=r+1;a<n;++a){var u=i[a^r];i[a]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i};function Fa(e,t){if(typeof e=="string"&&(e=at.util.createBuffer(e)),at.util.isArray(e)&&e.length>4){var n=e;e=at.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!at.util.isArray(e)){for(var i=[],a=t/4,r=0;r<a;++r)i.push(e.getInt32());e=i}return e}function qa(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Bo(e){return[e/4294967296|0,e&4294967295]}});var Rr=K((iS,g0)=>{var je=me();Ua();No();Le();g0.exports=je.aes=je.aes||{};je.aes.startEncrypting=function(e,t,n,r){var i=Ma({key:e,output:n,decrypt:!1,mode:r});return i.start(t),i};je.aes.createEncryptionCipher=function(e,t){return Ma({key:e,output:null,decrypt:!1,mode:t})};je.aes.startDecrypting=function(e,t,n,r){var i=Ma({key:e,output:n,decrypt:!0,mode:r});return i.start(t),i};je.aes.createDecryptionCipher=function(e,t){return Ma({key:e,output:null,decrypt:!0,mode:t})};je.aes.Algorithm=function(e,t){Ro||d0();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(r,i){return Do(n._w,r,i,!1)},decrypt:function(r,i){return Do(n._w,r,i,!0)}}}),n._init=!1};je.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,n;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=je.util.createBuffer(t);else if(je.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){n=t,t=je.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(!je.util.isArray(t)){n=t,t=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)t.push(n.getInt32())}}if(!je.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=p0(t,e.decrypt&&!s),this._init=!0}};je.aes._expandKey=function(e,t){return Ro||d0(),p0(e,t)};je.aes._updateBlock=Do;Nn("AES-ECB",je.cipher.modes.ecb);Nn("AES-CBC",je.cipher.modes.cbc);Nn("AES-CFB",je.cipher.modes.cfb);Nn("AES-OFB",je.cipher.modes.ofb);Nn("AES-CTR",je.cipher.modes.ctr);Nn("AES-GCM",je.cipher.modes.gcm);function Nn(e,t){var n=function(){return new je.aes.Algorithm(e,t)};je.cipher.registerAlgorithm(e,n)}var Ro=!1,Rn=4,vt,Lo,h0,Jr,jt;function d0(){Ro=!0,h0=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;vt=new Array(256),Lo=new Array(256),Jr=new Array(4),jt=new Array(4);for(var t=0;t<4;++t)Jr[t]=new Array(256),jt[t]=new Array(256);for(var n=0,r=0,i,a,s,o,c,u,l,t=0;t<256;++t){o=r^r<<1^r<<2^r<<3^r<<4,o=o>>8^o&255^99,vt[n]=o,Lo[o]=n,c=e[o],i=e[n],a=e[i],s=e[a],u=c<<24^o<<16^o<<8^(o^c),l=(i^a^s)<<24^(n^s)<<16^(n^a^s)<<8^(n^i^s);for(var f=0;f<4;++f)Jr[f][n]=u,jt[f][o]=l,u=u<<24|u>>>8,l=l<<24|l>>>8;n===0?n=r=1:(n=i^e[e[e[i^s]]],r^=e[e[r]])}}function p0(e,t){for(var n=e.slice(0),r,i=1,a=n.length,s=a+6+1,o=Rn*s,c=a;c<o;++c)r=n[c-1],c%a==0?(r=vt[r>>>16&255]<<24^vt[r>>>8&255]<<16^vt[r&255]<<8^vt[r>>>24]^h0[i]<<24,i++):a>6&&c%a==4&&(r=vt[r>>>24]<<24^vt[r>>>16&255]<<16^vt[r>>>8&255]<<8^vt[r&255]),n[c]=n[c-a]^r;if(t){var u,l=jt[0],f=jt[1],h=jt[2],v=jt[3],g=n.slice(0);o=n.length;for(var c=0,C=o-Rn;c<o;c+=Rn,C-=Rn)if(c===0||c===o-Rn)g[c]=n[C],g[c+1]=n[C+3],g[c+2]=n[C+2],g[c+3]=n[C+1];else for(var T=0;T<Rn;++T)u=n[C+T],g[c+(3&-T)]=l[vt[u>>>24]]^f[vt[u>>>16&255]]^h[vt[u>>>8&255]]^v[vt[u&255]];n=g}return n}function Do(e,t,n,r){var i=e.length/4-1,a,s,o,c,u;r?(a=jt[0],s=jt[1],o=jt[2],c=jt[3],u=Lo):(a=Jr[0],s=Jr[1],o=Jr[2],c=Jr[3],u=vt);var l,f,h,v,g,C,T;l=t[0]^e[0],f=t[r?3:1]^e[1],h=t[2]^e[2],v=t[r?1:3]^e[3];for(var _=3,U=1;U<i;++U)g=a[l>>>24]^s[f>>>16&255]^o[h>>>8&255]^c[v&255]^e[++_],C=a[f>>>24]^s[h>>>16&255]^o[v>>>8&255]^c[l&255]^e[++_],T=a[h>>>24]^s[v>>>16&255]^o[l>>>8&255]^c[f&255]^e[++_],v=a[v>>>24]^s[l>>>16&255]^o[f>>>8&255]^c[h&255]^e[++_],l=g,f=C,h=T;n[0]=u[l>>>24]<<24^u[f>>>16&255]<<16^u[h>>>8&255]<<8^u[v&255]^e[++_],n[r?3:1]=u[f>>>24]<<24^u[h>>>16&255]<<16^u[v>>>8&255]<<8^u[l&255]^e[++_],n[2]=u[h>>>24]<<24^u[v>>>16&255]<<16^u[l>>>8&255]<<8^u[f&255]^e[++_],n[r?1:3]=u[v>>>24]<<24^u[l>>>16&255]<<16^u[f>>>8&255]<<8^u[h&255]^e[++_]}function Ma(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="AES-"+t,r;e.decrypt?r=je.cipher.createDecipher(n,e.key):r=je.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(a,s){var o=null;s instanceof je.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(r,s)},r}});var Lr=K((aS,y0)=>{var wi=me();wi.pki=wi.pki||{};var Oo=y0.exports=wi.pki.oids=wi.oids=wi.oids||{};function Y(e,t){Oo[e]=t,Oo[t]=e}function Ue(e,t){Oo[e]=t}Y("1.2.840.113549.1.1.1","rsaEncryption");Y("1.2.840.113549.1.1.4","md5WithRSAEncryption");Y("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Y("1.2.840.113549.1.1.7","RSAES-OAEP");Y("1.2.840.113549.1.1.8","mgf1");Y("1.2.840.113549.1.1.9","pSpecified");Y("1.2.840.113549.1.1.10","RSASSA-PSS");Y("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Y("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Y("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Y("1.3.101.112","EdDSA25519");Y("1.2.840.10040.4.3","dsa-with-sha1");Y("1.3.14.3.2.7","desCBC");Y("1.3.14.3.2.26","sha1");Y("1.3.14.3.2.29","sha1WithRSASignature");Y("2.16.840.1.101.3.4.2.1","sha256");Y("2.16.840.1.101.3.4.2.2","sha384");Y("2.16.840.1.101.3.4.2.3","sha512");Y("2.16.840.1.101.3.4.2.4","sha224");Y("2.16.840.1.101.3.4.2.5","sha512-224");Y("2.16.840.1.101.3.4.2.6","sha512-256");Y("1.2.840.113549.2.2","md2");Y("1.2.840.113549.2.5","md5");Y("1.2.840.113549.1.7.1","data");Y("1.2.840.113549.1.7.2","signedData");Y("1.2.840.113549.1.7.3","envelopedData");Y("1.2.840.113549.1.7.4","signedAndEnvelopedData");Y("1.2.840.113549.1.7.5","digestedData");Y("1.2.840.113549.1.7.6","encryptedData");Y("1.2.840.113549.1.9.1","emailAddress");Y("1.2.840.113549.1.9.2","unstructuredName");Y("1.2.840.113549.1.9.3","contentType");Y("1.2.840.113549.1.9.4","messageDigest");Y("1.2.840.113549.1.9.5","signingTime");Y("1.2.840.113549.1.9.6","counterSignature");Y("1.2.840.113549.1.9.7","challengePassword");Y("1.2.840.113549.1.9.8","unstructuredAddress");Y("1.2.840.113549.1.9.14","extensionRequest");Y("1.2.840.113549.1.9.20","friendlyName");Y("1.2.840.113549.1.9.21","localKeyId");Y("1.2.840.113549.1.9.22.1","x509Certificate");Y("1.2.840.113549.1.12.10.1.1","keyBag");Y("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Y("1.2.840.113549.1.12.10.1.3","certBag");Y("1.2.840.113549.1.12.10.1.4","crlBag");Y("1.2.840.113549.1.12.10.1.5","secretBag");Y("1.2.840.113549.1.12.10.1.6","safeContentsBag");Y("1.2.840.113549.1.5.13","pkcs5PBES2");Y("1.2.840.113549.1.5.12","pkcs5PBKDF2");Y("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Y("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Y("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Y("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Y("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Y("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Y("1.2.840.113549.2.7","hmacWithSHA1");Y("1.2.840.113549.2.8","hmacWithSHA224");Y("1.2.840.113549.2.9","hmacWithSHA256");Y("1.2.840.113549.2.10","hmacWithSHA384");Y("1.2.840.113549.2.11","hmacWithSHA512");Y("1.2.840.113549.3.7","des-EDE3-CBC");Y("2.16.840.1.101.3.4.1.2","aes128-CBC");Y("2.16.840.1.101.3.4.1.22","aes192-CBC");Y("2.16.840.1.101.3.4.1.42","aes256-CBC");Y("2.5.4.3","commonName");Y("2.5.4.4","surname");Y("2.5.4.5","serialNumber");Y("2.5.4.6","countryName");Y("2.5.4.7","localityName");Y("2.5.4.8","stateOrProvinceName");Y("2.5.4.9","streetAddress");Y("2.5.4.10","organizationName");Y("2.5.4.11","organizationalUnitName");Y("2.5.4.12","title");Y("2.5.4.13","description");Y("2.5.4.15","businessCategory");Y("2.5.4.17","postalCode");Y("2.5.4.42","givenName");Y("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Y("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Y("2.16.840.1.113730.1.1","nsCertType");Y("2.16.840.1.113730.1.13","nsComment");Ue("2.5.29.1","authorityKeyIdentifier");Ue("2.5.29.2","keyAttributes");Ue("2.5.29.3","certificatePolicies");Ue("2.5.29.4","keyUsageRestriction");Ue("2.5.29.5","policyMapping");Ue("2.5.29.6","subtreesConstraint");Ue("2.5.29.7","subjectAltName");Ue("2.5.29.8","issuerAltName");Ue("2.5.29.9","subjectDirectoryAttributes");Ue("2.5.29.10","basicConstraints");Ue("2.5.29.11","nameConstraints");Ue("2.5.29.12","policyConstraints");Ue("2.5.29.13","basicConstraints");Y("2.5.29.14","subjectKeyIdentifier");Y("2.5.29.15","keyUsage");Ue("2.5.29.16","privateKeyUsagePeriod");Y("2.5.29.17","subjectAltName");Y("2.5.29.18","issuerAltName");Y("2.5.29.19","basicConstraints");Ue("2.5.29.20","cRLNumber");Ue("2.5.29.21","cRLReason");Ue("2.5.29.22","expirationDate");Ue("2.5.29.23","instructionCode");Ue("2.5.29.24","invalidityDate");Ue("2.5.29.25","cRLDistributionPoints");Ue("2.5.29.26","issuingDistributionPoint");Ue("2.5.29.27","deltaCRLIndicator");Ue("2.5.29.28","issuingDistributionPoint");Ue("2.5.29.29","certificateIssuer");Ue("2.5.29.30","nameConstraints");Y("2.5.29.31","cRLDistributionPoints");Y("2.5.29.32","certificatePolicies");Ue("2.5.29.33","policyMappings");Ue("2.5.29.34","policyConstraints");Y("2.5.29.35","authorityKeyIdentifier");Ue("2.5.29.36","policyConstraints");Y("2.5.29.37","extKeyUsage");Ue("2.5.29.46","freshestCRL");Ue("2.5.29.54","inhibitAnyPolicy");Y("1.3.6.1.4.1.11129.2.4.2","timestampList");Y("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Y("1.3.6.1.5.5.7.3.1","serverAuth");Y("1.3.6.1.5.5.7.3.2","clientAuth");Y("1.3.6.1.5.5.7.3.3","codeSigning");Y("1.3.6.1.5.5.7.3.4","emailProtection");Y("1.3.6.1.5.5.7.3.8","timeStamping")});var Ht=K((sS,m0)=>{var ze=me();Le();Lr();var ee=m0.exports=ze.asn1=ze.asn1||{};ee.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};ee.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};ee.create=function(e,t,n,r,i){if(ze.util.isArray(r)){for(var a=[],s=0;s<r.length;++s)r[s]!==void 0&&a.push(r[s]);r=a}var o={tagClass:e,type:t,constructed:n,composed:n||ze.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=ee.copy(o)),o};ee.copy=function(e,t){var n;if(ze.util.isArray(e)){n=[];for(var r=0;r<e.length;++r)n.push(ee.copy(e[r],t));return n}return typeof e=="string"?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:ee.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)};ee.equals=function(e,t,n){if(ze.util.isArray(e)){if(!ze.util.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!ee.equals(e[r],t[r]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&ee.equals(e.value,t.value);return n&&n.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};ee.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var n,r=t&128;return r?n=e.getInt((t&127)<<3):n=t,n}};function bi(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}var Gv=function(e,t){var n=e.getByte();if(t--,n!==128){var r,i=n&128;if(!i)r=n;else{var a=n&127;bi(e,t,a),r=e.getInt(a<<3)}if(r<0)throw new Error("Negative length: "+r);return r}};ee.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=ze.util.createBuffer(e));var n=e.length(),r=Va(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=n,i.remaining=e.length(),i}return r};function Va(e,t,n,r){var i;bi(e,t,2);var a=e.getByte();t--;var s=a&192,o=a&31;i=e.length();var c=Gv(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(r.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=e.length(),u.remaining=t,u.requested=c,u}c=t}var l,f,h=(a&32)==32;if(h)if(l=[],c===void 0)for(;;){if(bi(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),l.push(Va(e,t,n+1,r)),t-=i-e.length()}else for(;c>0;)i=e.length(),l.push(Va(e,c,n+1,r)),t-=i-e.length(),c-=i-e.length();if(l===void 0&&s===ee.Class.UNIVERSAL&&o===ee.Type.BITSTRING&&(f=e.bytes(c)),l===void 0&&r.decodeBitStrings&&s===ee.Class.UNIVERSAL&&o===ee.Type.BITSTRING&&c>1){var v=e.read,g=t,C=0;if(o===ee.Type.BITSTRING&&(bi(e,t,1),C=e.getByte(),t--),C===0)try{i=e.length();var T={strict:!0,decodeBitStrings:!0},_=Va(e,t,n+1,T),U=i-e.length();t-=U,o==ee.Type.BITSTRING&&U++;var B=_.tagClass;U===c&&(B===ee.Class.UNIVERSAL||B===ee.Class.CONTEXT_SPECIFIC)&&(l=[_])}catch(M){}l===void 0&&(e.read=v,t=g)}if(l===void 0){if(c===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(o===ee.Type.BMPSTRING)for(l="";c>0;c-=2)bi(e,t,2),l+=String.fromCharCode(e.getInt16()),t-=2;else l=e.getBytes(c),t-=c}var G=f===void 0?null:{bitStringContents:f};return ee.create(s,o,h,l,G)}ee.toDer=function(e){var t=ze.util.createBuffer(),n=e.tagClass|e.type,r=ze.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=ee.equals(e,e.original))),i)r.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:r.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&r.putBuffer(ee.toDer(e.value[a]))}else if(e.type===ee.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)r.putInt16(e.value.charCodeAt(a));else e.type===ee.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)==0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)==128)?r.putBytes(e.value.substr(1)):r.putBytes(e.value);if(t.putByte(n),r.length()<=127)t.putByte(r.length()&127);else{var s=r.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(r),t};ee.oidToDer=function(e){var t=e.split("."),n=ze.util.createBuffer();n.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var r,i,a,s,o=2;o<t.length;++o){r=!0,i=[],a=parseInt(t[o],10);do s=a&127,a=a>>>7,r||(s|=128),i.push(s),r=!1;while(a>0);for(var c=i.length-1;c>=0;--c)n.putByte(i[c])}return n};ee.derToOid=function(e){var t;typeof e=="string"&&(e=ze.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var r=0;e.length()>0;)n=e.getByte(),r=r<<7,n&128?r+=n&127:(t+="."+(r+n),r=0);return t};ee.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var c=e.charAt(10),u=10;c!=="+"&&c!=="-"&&(o=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(n,r,i),t.setUTCHours(a,s,o,0),u&&(c=e.charAt(u),c==="+"||c==="-")){var l=parseInt(e.substr(u+1,2),10),f=parseInt(e.substr(u+4,2),10),h=l*60+f;h*=6e4,c==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};ee.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;e.charAt(e.length-1)==="Z"&&(l=!0);var f=e.length-5,h=e.charAt(f);if(h==="+"||h==="-"){var v=parseInt(e.substr(f+1,2),10),g=parseInt(e.substr(f+4,2),10);u=v*60+g,u*=6e4,h==="+"&&(u*=-1),l=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),l?(t.setUTCFullYear(n,r,i),t.setUTCHours(a,s,o,c),t.setTime(+t+u)):(t.setFullYear(n,r,i),t.setHours(a,s,o,c)),t};ee.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};ee.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};ee.integerToDer=function(e){var t=ze.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n};ee.derToInteger=function(e){typeof e=="string"&&(e=ze.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};ee.validate=function(e,t,n,r){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&ze.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=ee.validate(e.value[a],t.value[s],n,r),i?++a:t.value[s].optional&&(i=!0)),!i&&r&&r.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&n&&(t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(n[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var o;if(e.bitStringContents.length<2)n[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else r&&r.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else r&&(e.tagClass!==t.tagClass&&r.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&r.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var v0=/[^\\u0000-\\u00ff]/;ee.prettyPrint=function(e,t,n){var r="";t=t||0,n=n||2,t>0&&(r+=`
`);for(var i="",a=0;a<t*n;++a)i+=" ";switch(r+=i+"Tag: ",e.tagClass){case ee.Class.UNIVERSAL:r+="Universal:";break;case ee.Class.APPLICATION:r+="Application:";break;case ee.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case ee.Class.PRIVATE:r+="Private:";break}if(e.tagClass===ee.Class.UNIVERSAL)switch(r+=e.type,e.type){case ee.Type.NONE:r+=" (None)";break;case ee.Type.BOOLEAN:r+=" (Boolean)";break;case ee.Type.INTEGER:r+=" (Integer)";break;case ee.Type.BITSTRING:r+=" (Bit string)";break;case ee.Type.OCTETSTRING:r+=" (Octet string)";break;case ee.Type.NULL:r+=" (Null)";break;case ee.Type.OID:r+=" (Object Identifier)";break;case ee.Type.ODESC:r+=" (Object Descriptor)";break;case ee.Type.EXTERNAL:r+=" (External or Instance of)";break;case ee.Type.REAL:r+=" (Real)";break;case ee.Type.ENUMERATED:r+=" (Enumerated)";break;case ee.Type.EMBEDDED:r+=" (Embedded PDV)";break;case ee.Type.UTF8:r+=" (UTF8)";break;case ee.Type.ROID:r+=" (Relative Object Identifier)";break;case ee.Type.SEQUENCE:r+=" (Sequence)";break;case ee.Type.SET:r+=" (Set)";break;case ee.Type.PRINTABLESTRING:r+=" (Printable String)";break;case ee.Type.IA5String:r+=" (IA5String (ASCII))";break;case ee.Type.UTCTIME:r+=" (UTC time)";break;case ee.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case ee.Type.BMPSTRING:r+=" (BMP String)";break}else r+=e.type;if(r+=`
`,r+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,o+=ee.prettyPrint(e.value[a],t+1,n),a+1<e.value.length&&(o+=","));r+=i+"Sub values: "+s+o}else{if(r+=i+"Value: ",e.type===ee.Type.OID){var c=ee.derToOid(e.value);r+=c,ze.pki&&ze.pki.oids&&c in ze.pki.oids&&(r+=" ("+ze.pki.oids[c]+") ")}if(e.type===ee.Type.INTEGER)try{r+=ee.derToInteger(e.value)}catch(l){r+="0x"+ze.util.bytesToHex(e.value)}else if(e.type===ee.Type.BITSTRING){if(e.value.length>1?r+="0x"+ze.util.bytesToHex(e.value.slice(1)):r+="(none)",e.value.length>0){var u=e.value.charCodeAt(0);u==1?r+=" (1 unused bit shown)":u>1&&(r+=" ("+u+" unused bits shown)")}}else if(e.type===ee.Type.OCTETSTRING)v0.test(e.value)||(r+="("+e.value+") "),r+="0x"+ze.util.bytesToHex(e.value);else if(e.type===ee.Type.UTF8)try{r+=ze.util.decodeUtf8(e.value)}catch(l){if(l.message==="URI malformed")r+="0x"+ze.util.bytesToHex(e.value)+" (malformed UTF8)";else throw l}else e.type===ee.Type.PRINTABLESTRING||e.type===ee.Type.IA5String?r+=e.value:v0.test(e.value)?r+="0x"+ze.util.bytesToHex(e.value):e.value.length===0?r+="[null]":r+=e.value}return r}});var ir=K((oS,C0)=>{var Ga=me();C0.exports=Ga.md=Ga.md||{};Ga.md.algorithms=Ga.md.algorithms||{}});var Ln=K((cS,E0)=>{var vr=me();ir();Le();var Kv=E0.exports=vr.hmac=vr.hmac||{};Kv.create=function(){var e=null,t=null,n=null,r=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in vr.md.algorithms)t=vr.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=vr.util.createBuffer(s);else if(vr.util.isArray(s)){var o=s;s=vr.util.createBuffer();for(var c=0;c<o.length;++c)s.putByte(o[c])}var u=s.length();u>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),n=vr.util.createBuffer(),r=vr.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var o=s.at(c);n.putByte(54^o),r.putByte(92^o)}if(u<t.blockLength)for(var o=t.blockLength-u,c=0;c<o;++c)n.putByte(54),r.putByte(92);e=s,n=n.bytes(),r=r.bytes()}t.start(),t.update(n)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(r),t.update(a),t.digest()},i.digest=i.getMac,i}});var ja=K((uS,S0)=>{var ar=me();ir();Le();var T0=S0.exports=ar.md5=ar.md5||{};ar.md.md5=ar.md.algorithms.md5=T0;T0.create=function(){_0||jv();var e=null,t=ar.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=ar.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=ar.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),x0(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=ar.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes(Po.substr(0,r.blockLength-s));for(var o,c=0,u=r.fullMessageLength.length-1;u>=0;--u)o=r.fullMessageLength[u]*8+c,c=o/4294967296>>>0,i.putInt32Le(o>>>0);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};x0(l,n,i);var f=ar.util.createBuffer();return f.putInt32Le(l.h0),f.putInt32Le(l.h1),f.putInt32Le(l.h2),f.putInt32Le(l.h3),f},r};var Po=null,Ka=null,Ii=null,Dn=null,_0=!1;function jv(){Po=String.fromCharCode(128),Po+=ar.util.fillString(String.fromCharCode(0),64),Ka=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Ii=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Dn=new Array(64);for(var e=0;e<64;++e)Dn[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);_0=!0}function x0(e,t,n){for(var r,i,a,s,o,c,u,l,f=n.length();f>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,l=0;l<16;++l)t[l]=n.getInt32Le(),c=o^a&(s^o),r=i+c+Dn[l]+t[l],u=Ii[l],i=o,o=s,s=a,a+=r<<u|r>>>32-u;for(;l<32;++l)c=s^o&(a^s),r=i+c+Dn[l]+t[Ka[l]],u=Ii[l],i=o,o=s,s=a,a+=r<<u|r>>>32-u;for(;l<48;++l)c=a^s^o,r=i+c+Dn[l]+t[Ka[l]],u=Ii[l],i=o,o=s,s=a,a+=r<<u|r>>>32-u;for(;l<64;++l)c=s^(a|~o),r=i+c+Dn[l]+t[Ka[l]],u=Ii[l],i=o,o=s,s=a,a+=r<<u|r>>>32-u;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,f-=64}}});var Xr=K((lS,w0)=>{var Ha=me();Le();var A0=w0.exports=Ha.pem=Ha.pem||{};A0.encode=function(e,t){t=t||{};var n="-----BEGIN "+e.type+`-----\r
`,r;if(e.procType&&(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},n+=$a(r)),e.contentDomain&&(r={name:"Content-Domain",values:[e.contentDomain]},n+=$a(r)),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=$a(r)),e.headers)for(var i=0;i<e.headers.length;++i)n+=$a(e.headers[i]);return e.procType&&(n+=`\r
`),n+=Ha.util.encode64(e.body,t.maxline||64)+`\r
`,n+="-----END "+e.type+`-----\r
`,n};A0.decode=function(e){for(var t=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=n.exec(e),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var o={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Ha.util.decode64(a[3])};if(t.push(o),!!a[2]){for(var c=a[2].split(i),u=0;a&&u<c.length;){for(var l=c[u].replace(/\s+$/,""),f=u+1;f<c.length;++f){var h=c[f];if(!/\s/.test(h[0]))break;l+=h,u=f}if(a=l.match(r),a){for(var v={name:a[1],values:[]},g=a[2].split(","),C=0;C<g.length;++C)v.values.push(Hv(g[C]));if(o.procType)if(!o.contentDomain&&v.name==="Content-Domain")o.contentDomain=g[0]||"";else if(!o.dekInfo&&v.name==="DEK-Info"){if(v.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:g[0],parameters:g[1]||null}}else o.headers.push(v);else{if(v.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(v.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:g[0],type:g[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function $a(e){for(var t=e.name+": ",n=[],r=function(c,u){return" "+u},i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\S+\r\n)/,r));t+=n.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function Hv(e){return e.replace(/^\s+/,"")}});var ki=K((fS,I0)=>{var Ye=me();Ua();No();Le();I0.exports=Ye.des=Ye.des||{};Ye.des.startEncrypting=function(e,t,n,r){var i=za({key:e,output:n,decrypt:!1,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};Ye.des.createEncryptionCipher=function(e,t){return za({key:e,output:null,decrypt:!1,mode:t})};Ye.des.startDecrypting=function(e,t,n,r){var i=za({key:e,output:n,decrypt:!0,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};Ye.des.createDecryptionCipher=function(e,t){return za({key:e,output:null,decrypt:!0,mode:t})};Ye.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(r,i){return b0(n._keys,r,i,!1)},decrypt:function(r,i){return b0(n._keys,r,i,!0)}}}),n._init=!1};Ye.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=Ye.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=em(t),this._init=!0}};sr("DES-ECB",Ye.cipher.modes.ecb);sr("DES-CBC",Ye.cipher.modes.cbc);sr("DES-CFB",Ye.cipher.modes.cfb);sr("DES-OFB",Ye.cipher.modes.ofb);sr("DES-CTR",Ye.cipher.modes.ctr);sr("3DES-ECB",Ye.cipher.modes.ecb);sr("3DES-CBC",Ye.cipher.modes.cbc);sr("3DES-CFB",Ye.cipher.modes.cfb);sr("3DES-OFB",Ye.cipher.modes.ofb);sr("3DES-CTR",Ye.cipher.modes.ctr);function sr(e,t){var n=function(){return new Ye.des.Algorithm(e,t)};Ye.cipher.registerAlgorithm(e,n)}var $v=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],zv=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Wv=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Yv=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Qv=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Jv=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Xv=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Zv=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function em(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],v=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],C=e.length()>8?3:1,T=[],_=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],U=0,B,G=0;G<C;G++){var M=e.getInt32(),q=e.getInt32();B=(M>>>4^q)&252645135,q^=B,M^=B<<4,B=(q>>>-16^M)&65535,M^=B,q^=B<<-16,B=(M>>>2^q)&858993459,q^=B,M^=B<<2,B=(q>>>-16^M)&65535,M^=B,q^=B<<-16,B=(M>>>1^q)&1431655765,q^=B,M^=B<<1,B=(q>>>8^M)&16711935,M^=B,q^=B<<8,B=(M>>>1^q)&1431655765,q^=B,M^=B<<1,B=M<<8|q>>>20&240,M=q<<24|q<<8&16711680|q>>>8&65280|q>>>24&240,q=B;for(var J=0;J<_.length;++J){_[J]?(M=M<<2|M>>>26,q=q<<2|q>>>26):(M=M<<1|M>>>27,q=q<<1|q>>>27),M&=-15,q&=-15;var re=t[M>>>28]|n[M>>>24&15]|r[M>>>20&15]|i[M>>>16&15]|a[M>>>12&15]|s[M>>>8&15]|o[M>>>4&15],j=c[q>>>28]|u[q>>>24&15]|l[q>>>20&15]|f[q>>>16&15]|h[q>>>12&15]|v[q>>>8&15]|g[q>>>4&15];B=(j>>>16^re)&65535,T[U++]=re^B,T[U++]=j^B<<16}}return T}function b0(e,t,n,r){var i=e.length===32?3:9,a;i===3?a=r?[30,-2,-2]:[0,32,2]:a=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],c=t[1];s=(o>>>4^c)&252645135,c^=s,o^=s<<4,s=(o>>>16^c)&65535,c^=s,o^=s<<16,s=(c>>>2^o)&858993459,o^=s,c^=s<<2,s=(c>>>8^o)&16711935,o^=s,c^=s<<8,s=(o>>>1^c)&1431655765,c^=s,o^=s<<1,o=o<<1|o>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var l=a[u+1],f=a[u+2],h=a[u];h!=l;h+=f){var v=c^e[h],g=(c>>>4|c<<28)^e[h+1];s=o,o=c,c=s^(zv[v>>>24&63]|Yv[v>>>16&63]|Jv[v>>>8&63]|Zv[v&63]|$v[g>>>24&63]|Wv[g>>>16&63]|Qv[g>>>8&63]|Xv[g&63])}s=o,o=c,c=s}o=o>>>1|o<<31,c=c>>>1|c<<31,s=(o>>>1^c)&1431655765,c^=s,o^=s<<1,s=(c>>>8^o)&16711935,o^=s,c^=s<<8,s=(c>>>2^o)&858993459,o^=s,c^=s<<2,s=(o>>>16^c)&65535,c^=s,o^=s<<16,s=(o>>>4^c)&252645135,c^=s,o^=s<<4,n[0]=o,n[1]=c}function za(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="DES-"+t,r;e.decrypt?r=Ye.cipher.createDecipher(n,e.key):r=Ye.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(a,s){var o=null;s instanceof Ye.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(r,s)},r}});var Wa=K((hS,k0)=>{var mt=me();Ln();ir();Le();var tm=mt.pkcs5=mt.pkcs5||{},mr;mt.util.isNodejs&&!mt.options.usePureJavaScript&&(mr=require("crypto"));k0.exports=mt.pbkdf2=tm.pbkdf2=function(e,t,n,r,i,a){if(typeof i=="function"&&(a=i,i=null),mt.util.isNodejs&&!mt.options.usePureJavaScript&&mr.pbkdf2&&(i===null||typeof i!="object")&&(mr.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?mr.pbkdf2Sync.length===4?mr.pbkdf2(e,t,n,r,function(B,G){if(B)return a(B);a(null,G.toString("binary"))}):mr.pbkdf2(e,t,n,r,i,function(B,G){if(B)return a(B);a(null,G.toString("binary"))}):mr.pbkdf2Sync.length===4?mr.pbkdf2Sync(e,t,n,r).toString("binary"):mr.pbkdf2Sync(e,t,n,r,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in mt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=mt.md[i].create()}var s=i.digestLength;if(r>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var c=Math.ceil(r/s),u=r-(c-1)*s,l=mt.hmac.create();l.start(i,e);var f="",h,v,g;if(!a){for(var C=1;C<=c;++C){l.start(null,null),l.update(t),l.update(mt.util.int32ToBytes(C)),h=g=l.digest().getBytes();for(var T=2;T<=n;++T)l.start(null,null),l.update(g),v=l.digest().getBytes(),h=mt.util.xorBytes(h,v,s),g=v;f+=C<c?h:h.substr(0,u)}return f}var C=1,T;function _(){if(C>c)return a(null,f);l.start(null,null),l.update(t),l.update(mt.util.int32ToBytes(C)),h=g=l.digest().getBytes(),T=2,U()}function U(){if(T<=n)return l.start(null,null),l.update(g),v=l.digest().getBytes(),h=mt.util.xorBytes(h,v,s),g=v,++T,mt.util.setImmediate(U);f+=C<c?h:h.substr(0,u),++C,_()}_()}});var Fo=K((dS,D0)=>{var or=me();ir();Le();var B0=D0.exports=or.sha256=or.sha256||{};or.md.sha256=or.md.algorithms.sha256=B0;B0.create=function(){N0||rm();var e=null,t=or.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=or.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=or.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),L0(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=or.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes(Uo.substr(0,r.blockLength-s));for(var o,c,u=r.fullMessageLength[0]*8,l=0;l<r.fullMessageLength.length-1;++l)o=r.fullMessageLength[l+1]*8,c=o/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};L0(f,n,i);var h=or.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},r};var Uo=null,N0=!1,R0=null;function rm(){Uo=String.fromCharCode(128),Uo+=or.util.fillString(String.fromCharCode(0),64),R0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],N0=!0}function L0(e,t,n){for(var r,i,a,s,o,c,u,l,f,h,v,g,C,T,_,U=n.length();U>=64;){for(u=0;u<16;++u)t[u]=n.getInt32();for(;u<64;++u)r=t[u-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=t[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=r+t[u-7]+i+t[u-16]|0;for(l=e.h0,f=e.h1,h=e.h2,v=e.h3,g=e.h4,C=e.h5,T=e.h6,_=e.h7,u=0;u<64;++u)s=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),o=T^g&(C^T),a=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),c=l&f|h&(l^f),r=_+s+o+R0[u]+t[u],i=a+c,_=T,T=C,C=g,g=v+r>>>0,v=h,h=f,f=l,l=r+i>>>0;e.h0=e.h0+l|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+v|0,e.h4=e.h4+g|0,e.h5=e.h5+C|0,e.h6=e.h6+T|0,e.h7=e.h7+_|0,U-=64}}});var qo=K((pS,O0)=>{var cr=me();Le();var Ya=null;cr.util.isNodejs&&!cr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Ya=require("crypto"));var nm=O0.exports=cr.prng=cr.prng||{};nm.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();t.pools=r,t.pool=0,t.generate=function(u,l){if(!l)return t.generateSync(u);var f=t.plugin.cipher,h=t.plugin.increment,v=t.plugin.formatKey,g=t.plugin.formatSeed,C=cr.util.createBuffer();t.key=null,T();function T(_){if(_)return l(_);if(C.length()>=u)return l(null,C.getBytes(u));if(t.generated>1048575&&(t.key=null),t.key===null)return cr.util.nextTick(function(){a(T)});var U=f(t.key,t.seed);t.generated+=U.length,C.putBytes(U),t.key=v(f(t.key,h(t.seed))),t.seed=g(f(t.key,t.seed)),cr.util.setImmediate(T)}},t.generateSync=function(u){var l=t.plugin.cipher,f=t.plugin.increment,h=t.plugin.formatKey,v=t.plugin.formatSeed;t.key=null;for(var g=cr.util.createBuffer();g.length()<u;){t.generated>1048575&&(t.key=null),t.key===null&&s();var C=l(t.key,t.seed);t.generated+=C.length,g.putBytes(C),t.key=h(l(t.key,f(t.seed))),t.seed=v(l(t.key,t.seed))}return g.getBytes(u)};function a(u){if(t.pools[0].messageLength>=32)return o(),u();var l=32-t.pools[0].messageLength<<5;t.seedFile(l,function(f,h){if(f)return u(f);t.collect(h),o(),u()})}function s(){if(t.pools[0].messageLength>=32)return o();var u=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(u)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var u=t.plugin.md.create();u.update(t.keyBytes);for(var l=1,f=0;f<32;++f)t.reseeds%l==0&&(u.update(t.pools[f].digest().getBytes()),t.pools[f].start()),l=l<<1;t.keyBytes=u.digest().getBytes(),u.start(),u.update(t.keyBytes);var h=u.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function c(u){var l=null,f=cr.util.globalScope,h=f.crypto||f.msCrypto;h&&h.getRandomValues&&(l=function(M){return h.getRandomValues(M)});var v=cr.util.createBuffer();if(l)for(;v.length()<u;){var g=Math.max(1,Math.min(u-v.length(),65536)/4),C=new Uint32Array(Math.floor(g));try{l(C);for(var T=0;T<C.length;++T)v.putInt32(C[T])}catch(M){if(!(typeof QuotaExceededError!="undefined"&&M instanceof QuotaExceededError))throw M}}if(v.length()<u)for(var _,U,B,G=Math.floor(Math.random()*65536);v.length()<u;){U=16807*(G&65535),_=16807*(G>>16),U+=(_&32767)<<16,U+=_>>15,U=(U&2147483647)+(U>>31),G=U&4294967295;for(var T=0;T<3;++T)B=G>>>(T<<3),B^=Math.floor(Math.random()*256),v.putByte(B&255)}return v.getBytes(u)}return Ya?(t.seedFile=function(u,l){Ya.randomBytes(u,function(f,h){if(f)return l(f);l(null,h.toString())})},t.seedFileSync=function(u){return Ya.randomBytes(u).toString()}):(t.seedFile=function(u,l){try{l(null,c(u))}catch(f){l(f)}},t.seedFileSync=c),t.collect=function(u){for(var l=u.length,f=0;f<l;++f)t.pools[t.pool].update(u.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(u,l){for(var f="",h=0;h<l;h+=8)f+=String.fromCharCode(u>>h&255);t.collect(f)},t.registerWorker=function(u){if(u===self)t.seedFile=function(f,h){function v(g){var C=g.data;C.forge&&C.forge.prng&&(self.removeEventListener("message",v),h(C.forge.prng.err,C.forge.prng.bytes))}self.addEventListener("message",v),self.postMessage({forge:{prng:{needed:f}}})};else{var l=function(f){var h=f.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(v,g){u.postMessage({forge:{prng:{err:v,bytes:g}}})})};u.addEventListener("message",l)}},t}});var Ot=K((gS,Mo)=>{var st=me();Rr();Fo();qo();Le();(function(){if(st.random&&st.random.getBytes){Mo.exports=st.random;return}(function(e){var t={},n=new Array(4),r=st.util.createBuffer();t.formatKey=function(f){var h=st.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),st.aes._expandKey(f,!1)},t.formatSeed=function(f){var h=st.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),f},t.cipher=function(f,h){return st.aes._updateBlock(f,h,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},t.increment=function(f){return++f[3],f},t.md=st.md.sha256;function i(){var f=st.prng.create(t);return f.getBytes=function(h,v){return f.generate(h,v)},f.getBytesSync=function(h){return f.generate(h)},f}var a=i(),s=null,o=st.util.globalScope,c=o.crypto||o.msCrypto;if(c&&c.getRandomValues&&(s=function(f){return c.getRandomValues(f)}),st.options.usePureJavaScript||!st.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var l in navigator)try{typeof navigator[l]=="string"&&(u+=navigator[l])}catch(f){}a.collect(u),u=null}e&&(e().mousemove(function(f){a.collectInt(f.clientX,16),a.collectInt(f.clientY,16)}),e().keypress(function(f){a.collectInt(f.charCode,8)}))}if(!st.random)st.random=a;else for(var l in a)st.random[l]=a[l];st.random.createInstance=i,Mo.exports=st.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Go=K((yS,F0)=>{var St=me();Le();var Vo=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],P0=[1,2,3,5],im=function(e,t){return e<<t&65535|(e&65535)>>16-t},am=function(e,t){return(e&65535)>>t|e<<16-t&65535};F0.exports=St.rc2=St.rc2||{};St.rc2.expandKey=function(e,t){typeof e=="string"&&(e=St.util.createBuffer(e)),t=t||128;var n=e,r=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=r;o<128;o++)n.putByte(Vo[n.at(o-1)+n.at(o-r)&255]);for(n.setAt(128-a,Vo[n.at(128-a)&s]),o=127-a;o>=0;o--)n.setAt(o,Vo[n.at(o+1)^n.at(o+a)]);return n};var U0=function(e,t,n){var r=!1,i=null,a=null,s=null,o,c,u,l,f=[];for(e=St.rc2.expandKey(e,t),u=0;u<64;u++)f.push(e.getInt16Le());n?(o=function(g){for(u=0;u<4;u++)g[u]+=f[l]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=im(g[u],P0[u]),l++},c=function(g){for(u=0;u<4;u++)g[u]+=f[g[(u+3)%4]&63]}):(o=function(g){for(u=3;u>=0;u--)g[u]=am(g[u],P0[u]),g[u]-=f[l]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),l--},c=function(g){for(u=3;u>=0;u--)g[u]-=f[g[(u+3)%4]&63]});var h=function(g){var C=[];for(u=0;u<4;u++){var T=i.getInt16Le();s!==null&&(n?T^=s.getInt16Le():s.putInt16Le(T)),C.push(T&65535)}l=n?0:63;for(var _=0;_<g.length;_++)for(var U=0;U<g[_][0];U++)g[_][1](C);for(u=0;u<4;u++)s!==null&&(n?s.putInt16Le(C[u]):C[u]^=s.getInt16Le()),a.putInt16Le(C[u])},v=null;return v={start:function(g,C){g&&typeof g=="string"&&(g=St.util.createBuffer(g)),r=!1,i=St.util.createBuffer(),a=C||new St.util.createBuffer,s=g,v.output=a},update:function(g){for(r||i.putBuffer(g);i.length()>=8;)h([[5,o],[1,c],[6,o],[1,c],[5,o]])},finish:function(g){var C=!0;if(n)if(g)C=g(8,i,!n);else{var T=i.length()===8?8:8-i.length();i.fillWithByte(T,T)}if(C&&(r=!0,v.update()),!n&&(C=i.length()===0,C))if(g)C=g(8,a,!n);else{var _=a.length(),U=a.at(_-1);U>_?C=!1:a.truncate(U)}return C}},v};St.rc2.startEncrypting=function(e,t,n){var r=St.rc2.createEncryptionCipher(e,128);return r.start(t,n),r};St.rc2.createEncryptionCipher=function(e,t){return U0(e,t,!0)};St.rc2.startDecrypting=function(e,t,n){var r=St.rc2.createDecryptionCipher(e,128);return r.start(t,n),r};St.rc2.createDecryptionCipher=function(e,t){return U0(e,t,!1)}});var Ni=K((vS,$0)=>{var Ko=me();$0.exports=Ko.jsbn=Ko.jsbn||{};var Cr,sm=244837814094590,q0=(sm&16777215)==15715070;function $(e,t,n){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,n):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Ko.jsbn.BigInteger=$;function De(){return new $(null)}function om(e,t,n,r,i,a){for(;--a>=0;){var s=t*this.data[e++]+n.data[r]+i;i=Math.floor(s/67108864),n.data[r++]=s&67108863}return i}function cm(e,t,n,r,i,a){for(var s=t&32767,o=t>>15;--a>=0;){var c=this.data[e]&32767,u=this.data[e++]>>15,l=o*c+u*s;c=s*c+((l&32767)<<15)+n.data[r]+(i&1073741823),i=(c>>>30)+(l>>>15)+o*u+(i>>>30),n.data[r++]=c&1073741823}return i}function M0(e,t,n,r,i,a){for(var s=t&16383,o=t>>14;--a>=0;){var c=this.data[e]&16383,u=this.data[e++]>>14,l=o*c+u*s;c=s*c+((l&16383)<<14)+n.data[r]+i,i=(c>>28)+(l>>14)+o*u,n.data[r++]=c&268435455}return i}typeof navigator=="undefined"?($.prototype.am=M0,Cr=28):q0&&navigator.appName=="Microsoft Internet Explorer"?($.prototype.am=cm,Cr=30):q0&&navigator.appName!="Netscape"?($.prototype.am=om,Cr=26):($.prototype.am=M0,Cr=28);$.prototype.DB=Cr;$.prototype.DM=(1<<Cr)-1;$.prototype.DV=1<<Cr;var jo=52;$.prototype.FV=Math.pow(2,jo);$.prototype.F1=jo-Cr;$.prototype.F2=2*Cr-jo;var um="0123456789abcdefghijklmnopqrstuvwxyz",Qa=new Array,On,Pt;On="0".charCodeAt(0);for(Pt=0;Pt<=9;++Pt)Qa[On++]=Pt;On="a".charCodeAt(0);for(Pt=10;Pt<36;++Pt)Qa[On++]=Pt;On="A".charCodeAt(0);for(Pt=10;Pt<36;++Pt)Qa[On++]=Pt;function V0(e){return um.charAt(e)}function G0(e,t){var n=Qa[e.charCodeAt(t)];return n==null?-1:n}function lm(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function fm(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function Dr(e){var t=De();return t.fromInt(e),t}function hm(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var r=e.length,i=!1,a=0;--r>=0;){var s=n==8?e[r]&255:G0(e,r);if(s<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+n>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=n,a>=this.DB&&(a-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&$.ZERO.subTo(this,this)}function dm(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function pm(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var n=(1<<t)-1,r,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(r=this.data[s]>>o)>0&&(i=!0,a=V0(r));s>=0;)o<t?(r=(this.data[s]&(1<<o)-1)<<t-o,r|=this.data[--s]>>(o+=this.DB-t)):(r=this.data[s]>>(o-=t)&n,o<=0&&(o+=this.DB,--s)),r>0&&(i=!0),i&&(a+=V0(r));return i?a:"0"}function gm(){var e=De();return $.ZERO.subTo(this,e),e}function ym(){return this.s<0?this.negate():this}function vm(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this.data[n]-e.data[n])!=0)return t;return 0}function Ja(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function mm(){return this.t<=0?0:this.DB*(this.t-1)+Ja(this.data[this.t-1]^this.s&this.DM)}function Cm(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function Em(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function Tm(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<n&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+a+1]=this.data[o]>>r|s,s=(this.data[o]&i)<<n;for(o=a-1;o>=0;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function _m(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,a=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var s=n+1;s<this.t;++s)t.data[s-n-1]|=(this.data[s]&a)<<i,t.data[s-n]=this.data[s]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&a)<<i),t.t=this.t-n,t.clamp()}function xm(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function Sm(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t.data[i]=0;for(i=0;i<r.t;++i)t.data[i+n.t]=n.am(0,r.data[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&$.ZERO.subTo(t,t)}function Am(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function wm(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=De());var a=De(),s=this.s,o=e.s,c=this.DB-Ja(r.data[r.t-1]);c>0?(r.lShiftTo(c,a),i.lShiftTo(c,n)):(r.copyTo(a),i.copyTo(n));var u=a.t,l=a.data[u-1];if(l!=0){var f=l*(1<<this.F1)+(u>1?a.data[u-2]>>this.F2:0),h=this.FV/f,v=(1<<this.F1)/f,g=1<<this.F2,C=n.t,T=C-u,_=t==null?De():t;for(a.dlShiftTo(T,_),n.compareTo(_)>=0&&(n.data[n.t++]=1,n.subTo(_,n)),$.ONE.dlShiftTo(u,_),_.subTo(a,a);a.t<u;)a.data[a.t++]=0;for(;--T>=0;){var U=n.data[--C]==l?this.DM:Math.floor(n.data[C]*h+(n.data[C-1]+g)*v);if((n.data[C]+=a.am(0,U,n,T,0,u))<U)for(a.dlShiftTo(T,_),n.subTo(_,n);n.data[C]<--U;)n.subTo(_,n)}t!=null&&(n.drShiftTo(u,t),s!=o&&$.ZERO.subTo(t,t)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),s<0&&$.ZERO.subTo(n,n)}}}function bm(e){var t=De();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo($.ZERO)>0&&e.subTo(t,t),t}function Zr(e){this.m=e}function Im(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function km(e){return e}function Bm(e){e.divRemTo(this.m,null,e)}function Nm(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function Rm(e,t){e.squareTo(t),this.reduce(t)}Zr.prototype.convert=Im;Zr.prototype.revert=km;Zr.prototype.reduce=Bm;Zr.prototype.mulTo=Nm;Zr.prototype.sqrTo=Rm;function Lm(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function en(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Dm(e){var t=De();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo($.ZERO)>0&&this.m.subTo(t,t),t}function Om(e){var t=De();return e.copyTo(t),this.reduce(t),t}function Pm(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e.data[t]&32767,r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Um(e,t){e.squareTo(t),this.reduce(t)}function Fm(e,t,n){e.multiplyTo(t,n),this.reduce(n)}en.prototype.convert=Dm;en.prototype.revert=Om;en.prototype.reduce=Pm;en.prototype.mulTo=Fm;en.prototype.sqrTo=Um;function qm(){return(this.t>0?this.data[0]&1:this.s)==0}function Mm(e,t){if(e>4294967295||e<1)return $.ONE;var n=De(),r=De(),i=t.convert(this),a=Ja(e)-1;for(i.copyTo(n);--a>=0;)if(t.sqrTo(n,r),(e&1<<a)>0)t.mulTo(r,i,n);else{var s=n;n=r,r=s}return t.revert(n)}function Vm(e,t){var n;return e<256||t.isEven()?n=new Zr(t):n=new en(t),this.exp(e,n)}$.prototype.copyTo=lm;$.prototype.fromInt=fm;$.prototype.fromString=hm;$.prototype.clamp=dm;$.prototype.dlShiftTo=Cm;$.prototype.drShiftTo=Em;$.prototype.lShiftTo=Tm;$.prototype.rShiftTo=_m;$.prototype.subTo=xm;$.prototype.multiplyTo=Sm;$.prototype.squareTo=Am;$.prototype.divRemTo=wm;$.prototype.invDigit=Lm;$.prototype.isEven=qm;$.prototype.exp=Mm;$.prototype.toString=pm;$.prototype.negate=gm;$.prototype.abs=ym;$.prototype.compareTo=vm;$.prototype.bitLength=mm;$.prototype.mod=bm;$.prototype.modPowInt=Vm;$.ZERO=Dr(0);$.ONE=Dr(1);function Gm(){var e=De();return this.copyTo(e),e}function Km(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function jm(){return this.t==0?this.s:this.data[0]<<24>>24}function Hm(){return this.t==0?this.s:this.data[0]<<16>>16}function $m(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function zm(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Wm(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=Dr(n),i=De(),a=De(),s="";for(this.divRemTo(r,i,a);i.signum()>0;)s=(n+a.intValue()).toString(e).substr(1)+s,i.divRemTo(r,i,a);return a.intValue().toString(e)+s}function Ym(e,t){this.fromInt(0),t==null&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,a=0,s=0,o=0;o<e.length;++o){var c=G0(e,o);if(c<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+c,++a>=n&&(this.dMultiply(r),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&$.ZERO.subTo(this,this)}function Qm(e,t,n){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo($.ONE.shiftLeft(e-1),Ho,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo($.ONE.shiftLeft(e-1),this);else{var r=new Array,i=e&7;r.length=(e>>3)+1,t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function Jm(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),(r&128)!=0&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function Xm(e){return this.compareTo(e)==0}function Zm(e){return this.compareTo(e)<0?this:e}function e1(e){return this.compareTo(e)>0?this:e}function t1(e,t,n){var r,i,a=Math.min(e.t,this.t);for(r=0;r<a;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function r1(e,t){return e&t}function n1(e){var t=De();return this.bitwiseTo(e,r1,t),t}function Ho(e,t){return e|t}function i1(e){var t=De();return this.bitwiseTo(e,Ho,t),t}function K0(e,t){return e^t}function a1(e){var t=De();return this.bitwiseTo(e,K0,t),t}function j0(e,t){return e&~t}function s1(e){var t=De();return this.bitwiseTo(e,j0,t),t}function o1(){for(var e=De(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function c1(e){var t=De();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function u1(e){var t=De();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function l1(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function f1(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+l1(this.data[e]);return this.s<0?this.t*this.DB:-1}function h1(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function d1(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=h1(this.data[n]^t);return e}function p1(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function g1(e,t){var n=$.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function y1(e){return this.changeBit(e,Ho)}function v1(e){return this.changeBit(e,j0)}function m1(e){return this.changeBit(e,K0)}function C1(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function E1(e){var t=De();return this.addTo(e,t),t}function T1(e){var t=De();return this.subTo(e,t),t}function _1(e){var t=De();return this.multiplyTo(e,t),t}function x1(e){var t=De();return this.divRemTo(e,t,null),t}function S1(e){var t=De();return this.divRemTo(e,null,t),t}function A1(e){var t=De(),n=De();return this.divRemTo(e,t,n),new Array(t,n)}function w1(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function b1(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Bi(){}function H0(e){return e}function I1(e,t,n){e.multiplyTo(t,n)}function k1(e,t){e.squareTo(t)}Bi.prototype.convert=H0;Bi.prototype.revert=H0;Bi.prototype.mulTo=I1;Bi.prototype.sqrTo=k1;function B1(e){return this.exp(e,new Bi)}function N1(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function R1(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function Pn(e){this.r2=De(),this.q3=De(),$.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function L1(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=De();return e.copyTo(t),this.reduce(t),t}function D1(e){return e}function O1(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function P1(e,t){e.squareTo(t),this.reduce(t)}function U1(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Pn.prototype.convert=L1;Pn.prototype.revert=D1;Pn.prototype.reduce=O1;Pn.prototype.mulTo=U1;Pn.prototype.sqrTo=P1;function F1(e,t){var n=e.bitLength(),r,i=Dr(1),a;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?a=new Zr(t):t.isEven()?a=new Pn(t):a=new en(t);var s=new Array,o=3,c=r-1,u=(1<<r)-1;if(s[1]=a.convert(this),r>1){var l=De();for(a.sqrTo(s[1],l);o<=u;)s[o]=De(),a.mulTo(l,s[o-2],s[o]),o+=2}var f=e.t-1,h,v=!0,g=De(),C;for(n=Ja(e.data[f])-1;f>=0;){for(n>=c?h=e.data[f]>>n-c&u:(h=(e.data[f]&(1<<n+1)-1)<<c-n,f>0&&(h|=e.data[f-1]>>this.DB+n-c)),o=r;(h&1)==0;)h>>=1,--o;if((n-=o)<0&&(n+=this.DB,--f),v)s[h].copyTo(i),v=!1;else{for(;o>1;)a.sqrTo(i,g),a.sqrTo(g,i),o-=2;o>0?a.sqrTo(i,g):(C=i,i=g,g=C),a.mulTo(g,s[h],i)}for(;f>=0&&(e.data[f]&1<<n)==0;)a.sqrTo(i,g),C=i,i=g,g=C,--n<0&&(n=this.DB-1,--f)}return a.revert(i)}function q1(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n}function M1(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(t==0)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function V1(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return $.ZERO;for(var n=e.clone(),r=this.clone(),i=Dr(1),a=Dr(0),s=Dr(0),o=Dr(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(s,i),a.subTo(o,a)):(r.subTo(n,r),t&&s.subTo(i,s),o.subTo(a,o))}if(r.compareTo($.ONE)!=0)return $.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var $t=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],G1=(1<<26)/$t[$t.length-1];function K1(e){var t,n=this.abs();if(n.t==1&&n.data[0]<=$t[$t.length-1]){for(t=0;t<$t.length;++t)if(n.data[0]==$t[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<$t.length;){for(var r=$t[t],i=t+1;i<$t.length&&r<G1;)r*=$t[i++];for(r=n.modInt(r);t<i;)if(r%$t[t++]==0)return!1}return n.millerRabin(e)}function j1(e){var t=this.subtract($.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var r=t.shiftRight(n),i=H1(),a,s=0;s<e;++s){do a=new $(this.bitLength(),i);while(a.compareTo($.ONE)<=0||a.compareTo(t)>=0);var o=a.modPow(r,this);if(o.compareTo($.ONE)!=0&&o.compareTo(t)!=0){for(var c=1;c++<n&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo($.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function H1(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}$.prototype.chunkSize=$m;$.prototype.toRadix=Wm;$.prototype.fromRadix=Ym;$.prototype.fromNumber=Qm;$.prototype.bitwiseTo=t1;$.prototype.changeBit=g1;$.prototype.addTo=C1;$.prototype.dMultiply=w1;$.prototype.dAddOffset=b1;$.prototype.multiplyLowerTo=N1;$.prototype.multiplyUpperTo=R1;$.prototype.modInt=M1;$.prototype.millerRabin=j1;$.prototype.clone=Gm;$.prototype.intValue=Km;$.prototype.byteValue=jm;$.prototype.shortValue=Hm;$.prototype.signum=zm;$.prototype.toByteArray=Jm;$.prototype.equals=Xm;$.prototype.min=Zm;$.prototype.max=e1;$.prototype.and=n1;$.prototype.or=i1;$.prototype.xor=a1;$.prototype.andNot=s1;$.prototype.not=o1;$.prototype.shiftLeft=c1;$.prototype.shiftRight=u1;$.prototype.getLowestSetBit=f1;$.prototype.bitCount=d1;$.prototype.testBit=p1;$.prototype.setBit=y1;$.prototype.clearBit=v1;$.prototype.flipBit=m1;$.prototype.add=E1;$.prototype.subtract=T1;$.prototype.multiply=_1;$.prototype.divide=x1;$.prototype.remainder=S1;$.prototype.divideAndRemainder=A1;$.prototype.modPow=F1;$.prototype.modInverse=V1;$.prototype.pow=B1;$.prototype.gcd=q1;$.prototype.isProbablePrime=K1});var Un=K((mS,Q0)=>{var ur=me();ir();Le();var z0=Q0.exports=ur.sha1=ur.sha1||{};ur.md.sha1=ur.md.algorithms.sha1=z0;z0.create=function(){W0||$1();var e=null,t=ur.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=ur.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=ur.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),Y0(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=ur.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes($o.substr(0,r.blockLength-s));for(var o,c,u=r.fullMessageLength[0]*8,l=0;l<r.fullMessageLength.length-1;++l)o=r.fullMessageLength[l+1]*8,c=o/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Y0(f,n,i);var h=ur.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},r};var $o=null,W0=!1;function $1(){$o=String.fromCharCode(128),$o+=ur.util.fillString(String.fromCharCode(0),64),W0=!0}function Y0(e,t,n){for(var r,i,a,s,o,c,u,l,f=n.length();f>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,c=e.h4,l=0;l<16;++l)r=n.getInt32(),t[l]=r,u=o^a&(s^o),r=(i<<5|i>>>27)+u+c+1518500249+r,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;l<20;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,u=o^a&(s^o),r=(i<<5|i>>>27)+u+c+1518500249+r,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;l<32;++l)r=t[l-3]^t[l-8]^t[l-14]^t[l-16],r=r<<1|r>>>31,t[l]=r,u=a^s^o,r=(i<<5|i>>>27)+u+c+1859775393+r,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;l<40;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=a^s^o,r=(i<<5|i>>>27)+u+c+1859775393+r,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;l<60;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=a&s|o&(a^s),r=(i<<5|i>>>27)+u+c+2400959708+r,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;l<80;++l)r=t[l-6]^t[l-16]^t[l-28]^t[l-32],r=r<<2|r>>>30,t[l]=r,u=a^s^o,r=(i<<5|i>>>27)+u+c+3395469782+r,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+c|0,f-=64}}});var zo=K((CS,X0)=>{var lr=me();Le();Ot();Un();var J0=X0.exports=lr.pkcs1=lr.pkcs1||{};J0.encode_rsa_oaep=function(e,t,n){var r,i,a,s;typeof n=="string"?(r=n,i=arguments[3]||void 0,a=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md)),a?a.start():a=lr.md.sha1.create(),s||(s=a);var o=Math.ceil(e.n.bitLength()/8),c=o-2*a.digestLength-2;if(t.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=t.length,u.maxLength=c,u}r||(r=""),a.update(r,"raw");for(var l=a.digest(),f="",h=c-t.length,v=0;v<h;v++)f+="\0";var g=l.getBytes()+f+""+t;if(!i)i=lr.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=a.digestLength,u}var C=Xa(i,o-a.digestLength-1,s),T=lr.util.xorBytes(g,C,g.length),_=Xa(T,a.digestLength,s),U=lr.util.xorBytes(i,_,i.length);return"\0"+U+T};J0.decode_rsa_oaep=function(e,t,n){var r,i,a;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var T=new Error("RSAES-OAEP encoded message length is invalid.");throw T.length=t.length,T.expectedLength=s,T}if(i===void 0?i=lr.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var o=i.digest().getBytes(),c=t.charAt(0),u=t.substring(1,i.digestLength+1),l=t.substring(1+i.digestLength),f=Xa(l,i.digestLength,a),h=lr.util.xorBytes(u,f,u.length),v=Xa(h,s-i.digestLength-1,a),g=lr.util.xorBytes(l,v,l.length),C=g.substring(0,i.digestLength),T=c!=="\0",_=0;_<i.digestLength;++_)T|=o.charAt(_)!==C.charAt(_);for(var U=1,B=i.digestLength,G=i.digestLength;G<g.length;G++){var M=g.charCodeAt(G),q=M&1^1,J=U?65534:0;T|=M&J,U=U&q,B+=U}if(T||g.charCodeAt(B)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(B+1)};function Xa(e,t,n){n||(n=lr.md.sha1.create());for(var r="",i=Math.ceil(t/n.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);n.start(),n.update(e+s),r+=n.digest().getBytes()}return r.substring(0,t)}});var Yo=K((ES,Wo)=>{var Or=me();Le();Ni();Ot();(function(){if(Or.prime){Wo.exports=Or.prime;return}var e=Wo.exports=Or.prime=Or.prime||{},t=Or.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new t(null);r.fromInt(30);var i=function(f,h){return f|h};e.generateProbablePrime=function(f,h,v){typeof h=="function"&&(v=h,h={}),h=h||{};var g=h.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var C=h.prng||Or.random,T={nextBytes:function(_){for(var U=C.getBytesSync(_.length),B=0;B<_.length;++B)_[B]=U.charCodeAt(B)}};if(g.name==="PRIMEINC")return a(f,T,g.options,v);throw new Error("Invalid prime generation algorithm: "+g.name)};function a(f,h,v,g){return"workers"in v?c(f,h,v,g):s(f,h,v,g)}function s(f,h,v,g){var C=u(f,h),T=0,_=l(C.bitLength());"millerRabinTests"in v&&(_=v.millerRabinTests);var U=10;"maxBlockTime"in v&&(U=v.maxBlockTime),o(C,f,h,T,_,U,g)}function o(f,h,v,g,C,T,_){var U=+new Date;do{if(f.bitLength()>h&&(f=u(h,v)),f.isProbablePrime(C))return _(null,f);f.dAddOffset(n[g++%8],0)}while(T<0||+new Date-U<T);Or.util.setImmediate(function(){o(f,h,v,g,C,T,_)})}function c(f,h,v,g){if(typeof Worker=="undefined")return s(f,h,v,g);var C=u(f,h),T=v.workers,_=v.workLoad||100,U=_*30/8,B=v.workerScript||"forge/prime.worker.js";if(T===-1)return Or.util.estimateCores(function(M,q){M&&(q=2),T=q-1,G()});G();function G(){T=Math.max(1,T);for(var M=[],q=0;q<T;++q)M[q]=new Worker(B);for(var J=T,q=0;q<T;++q)M[q].addEventListener("message",j);var re=!1;function j(le){if(!re){--J;var ae=le.data;if(ae.found){for(var ue=0;ue<M.length;++ue)M[ue].terminate();return re=!0,g(null,new t(ae.prime,16))}C.bitLength()>f&&(C=u(f,h));var ke=C.toString(16);le.target.postMessage({hex:ke,workLoad:_}),C.dAddOffset(U,0)}}}}function u(f,h){var v=new t(f,h),g=f-1;return v.testBit(g)||v.bitwiseTo(t.ONE.shiftLeft(g),i,v),v.dAddOffset(31-v.mod(r).byteValue(),0),v}function l(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})()});var Ri=K((TS,ah)=>{var se=me();Ht();Ni();Lr();zo();Yo();Ot();Le();typeof we=="undefined"&&(we=se.jsbn.BigInteger);var we,Qo=se.util.isNodejs?require("crypto"):null,D=se.asn1,Ut=se.util;se.pki=se.pki||{};ah.exports=se.pki.rsa=se.rsa=se.rsa||{};var pe=se.pki,z1=[6,4,2,4,2,4,6,2],W1={name:"PrivateKeyInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Y1={name:"RSAPrivateKey",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Q1={name:"RSAPublicKey",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},J1=se.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:D.Class.UNIVERSAL,type:D.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},X1={name:"DigestInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:D.Class.UNIVERSAL,type:D.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:D.Class.UNIVERSAL,type:D.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Z1=function(e){var t;if(e.algorithm in pe.oids)t=pe.oids[e.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}var r=D.oidToDer(t).getBytes(),i=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]),a=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[]);a.value.push(D.create(D.Class.UNIVERSAL,D.Type.OID,!1,r)),a.value.push(D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,""));var s=D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),D.toDer(i).getBytes()},Z0=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(we.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(we.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var r;do r=new we(se.util.bytesToHex(se.random.getBytes(t.n.bitLength()/8)),16);while(r.compareTo(t.n)>=0||!r.gcd(t.n).equals(we.ONE));e=e.multiply(r.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(r.modInverse(t.n)).mod(t.n),s};pe.rsa.encrypt=function(e,t,n){var r=n,i,a=Math.ceil(t.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=eh(e,t,n)):(i=se.util.createBuffer(),i.putBytes(e));for(var s=new we(i.toHex(),16),o=Z0(s,t,r),c=o.toString(16),u=se.util.createBuffer(),l=a-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(se.util.hexToBytes(c)),u.getBytes()};pe.rsa.decrypt=function(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new we(se.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=Z0(s,t,n),c=o.toString(16),u=se.util.createBuffer(),l=i-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(se.util.hexToBytes(c)),r!==!1?Za(u.getBytes(),t,n):u.getBytes()};pe.rsa.createKeyPairGenerationState=function(e,t,n){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,n=n||{};var r=n.prng||se.random,i={nextBytes:function(o){for(var c=r.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=c.charCodeAt(u)}},a=n.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new we(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};pe.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new we(null);n.fromInt(30);for(var r=0,i=function(f,h){return f|h},a=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,u=c-1;e.pqState===0?(e.num=new we(c,e.rng),e.num.testBit(u)||e.num.bitwiseTo(we.ONE.shiftLeft(u),i,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),r=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(tC(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(z1[r++%8],0):e.pqState===2?e.pqState=e.num.subtract(we.ONE).gcd(e.e).compareTo(we.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(we.ONE),e.q1=e.q.subtract(we.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(we.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var l=e.e.modInverse(e.phi);e.keys={privateKey:pe.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:pe.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-a,a=s}return e.keys!==null};pe.rsa.generateKeyPair=function(e,t,n,r){if(arguments.length===1?typeof e=="object"?(n=e,e=void 0):typeof e=="function"&&(r=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(r=t,t=void 0):typeof t!="number"&&(n=t,t=void 0):(n=e,r=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=t,t=void 0)),n=n||{},e===void 0&&(e=n.bits||2048),t===void 0&&(t=n.e||65537),!se.options.usePureJavaScript&&!n.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(r){if(th("generateKeyPair"))return Qo.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,c,u){if(o)return r(o);r(null,{privateKey:pe.privateKeyFromPem(u),publicKey:pe.publicKeyFromPem(c)})});if(rh("generateKey")&&rh("exportKey"))return Ut.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:ih(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Ut.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){r(o)}).then(function(o){if(o){var c=pe.privateKeyFromAsn1(D.fromDer(se.util.createBuffer(o)));r(null,{privateKey:c,publicKey:pe.setRsaPublicKey(c.n,c.e)})}});if(nh("generateKey")&&nh("exportKey")){var i=Ut.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:ih(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var c=o.target.result,u=Ut.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(l){var f=l.target.result,h=pe.privateKeyFromAsn1(D.fromDer(se.util.createBuffer(f)));r(null,{privateKey:h,publicKey:pe.setRsaPublicKey(h.n,h.e)})},u.onerror=function(l){r(l)}},i.onerror=function(o){r(o)};return}}else if(th("generateKeyPairSync")){var a=Qo.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pe.privateKeyFromPem(a.privateKey),publicKey:pe.publicKeyFromPem(a.publicKey)}}}var s=pe.rsa.createKeyPairGenerationState(e,t,n);if(!r)return pe.rsa.stepKeyPairGenerationState(s,0),s.keys;eC(s,n,r)};pe.setRsaPublicKey=pe.rsa.setPublicKey=function(e,t){var n={n:e,e:t};return n.encrypt=function(r,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,c,u){return eh(o,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,c){return se.pkcs1.encode_rsa_oaep(c,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(r,n,!0);return pe.rsa.encrypt(s,n,!0)},n.verify=function(r,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(c,u){u=Za(u,n,!0);var l=D.fromDer(u,{parseAllBytes:s._parseAllDigestBytes}),f={},h=[];if(!D.validate(l,X1,f,h)){var v=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw v.errors=h,v}var g=D.derToOid(f.algorithmIdentifier);if(!(g===se.oids.md2||g===se.oids.md5||g===se.oids.sha1||g===se.oids.sha224||g===se.oids.sha256||g===se.oids.sha384||g===se.oids.sha512||g===se.oids["sha512-224"]||g===se.oids["sha512-256"])){var v=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw v.oid=g,v}if((g===se.oids.md2||g===se.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===f.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(c,u){return u=Za(u,n,!0),c===u}});var o=pe.rsa.decrypt(i,n,!0,!1);return a.verify(r,o,n.n.bitLength())},n};pe.setRsaPrivateKey=pe.rsa.setPrivateKey=function(e,t,n,r,i,a,s,o){var c={n:e,e:t,d:n,p:r,q:i,dP:a,dQ:s,qInv:o};return c.decrypt=function(u,l,f){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var h=pe.rsa.decrypt(u,c,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:Za};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(v,g){return se.pkcs1.decode_rsa_oaep(g,v,f)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(v){return v}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(h,c,!1)},c.sign=function(u,l){var f=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:Z1},f=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return u}},f=1);var h=l.encode(u,c.n.bitLength());return pe.rsa.encrypt(h,c,f)},c};pe.wrapRsaPrivateKey=function(e){return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(0).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(pe.oids.rsaEncryption).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")]),D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(e).getBytes())])};pe.privateKeyFromAsn1=function(e){var t={},n=[];if(D.validate(e,W1,t,n)&&(e=D.fromDer(se.util.createBuffer(t.privateKey))),t={},n=[],!D.validate(e,Y1,t,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,a,s,o,c,u,l,f;return i=se.util.createBuffer(t.privateKeyModulus).toHex(),a=se.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=se.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=se.util.createBuffer(t.privateKeyPrime1).toHex(),c=se.util.createBuffer(t.privateKeyPrime2).toHex(),u=se.util.createBuffer(t.privateKeyExponent1).toHex(),l=se.util.createBuffer(t.privateKeyExponent2).toHex(),f=se.util.createBuffer(t.privateKeyCoefficient).toHex(),pe.setRsaPrivateKey(new we(i,16),new we(a,16),new we(s,16),new we(o,16),new we(c,16),new we(u,16),new we(l,16),new we(f,16))};pe.privateKeyToAsn1=pe.privateKeyToRSAPrivateKey=function(e){return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(0).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.n)),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.e)),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.d)),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.p)),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.q)),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.dP)),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.dQ)),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.qInv))])};pe.publicKeyFromAsn1=function(e){var t={},n=[];if(D.validate(e,J1,t,n)){var r=D.derToOid(t.publicKeyOid);if(r!==pe.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}e=t.rsaPublicKey}if(n=[],!D.validate(e,Q1,t,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var a=se.util.createBuffer(t.publicKeyModulus).toHex(),s=se.util.createBuffer(t.publicKeyExponent).toHex();return pe.setRsaPublicKey(new we(a,16),new we(s,16))};pe.publicKeyToAsn1=pe.publicKeyToSubjectPublicKeyInfo=function(e){return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(pe.oids.rsaEncryption).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")]),D.create(D.Class.UNIVERSAL,D.Type.BITSTRING,!1,[pe.publicKeyToRSAPublicKey(e)])])};pe.publicKeyToRSAPublicKey=function(e){return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.n)),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,fr(e.e))])};function eh(e,t,n){var r=se.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}r.putByte(0),r.putByte(n);var s=i-3-e.length,o;if(n===0||n===1){o=n===0?0:255;for(var c=0;c<s;++c)r.putByte(o)}else for(;s>0;){for(var u=0,l=se.random.getBytes(s),c=0;c<s;++c)o=l.charCodeAt(c),o===0?++u:r.putByte(o);s=u}return r.putByte(0),r.putBytes(e),r}function Za(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8),a=se.util.createBuffer(e),s=a.getByte(),o=a.getByte();if(s!==0||n&&o!==0&&o!==1||!n&&o!=2||n&&o===0&&typeof r=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(o===0){c=i-3-r;for(var u=0;u<c;++u)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(c=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++c}else if(o===2)for(c=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++c}var l=a.getByte();if(l!==0||c!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function eC(e,t,n){typeof t=="function"&&(n=t,t={}),t=t||{};var r={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(r.prng=t.prng),i();function i(){a(e.pBits,function(o,c){if(o)return n(o);if(e.p=c,e.q!==null)return s(o,e.q);a(e.qBits,s)})}function a(o,c){se.prime.generateProbablePrime(o,r,c)}function s(o,c){if(o)return n(o);if(e.q=c,e.p.compareTo(e.q)<0){var u=e.p;e.p=e.q,e.q=u}if(e.p.subtract(we.ONE).gcd(e.e).compareTo(we.ONE)!==0){e.p=null,i();return}if(e.q.subtract(we.ONE).gcd(e.e).compareTo(we.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(we.ONE),e.q1=e.q.subtract(we.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(we.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var l=e.e.modInverse(e.phi);e.keys={privateKey:pe.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:pe.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}}function fr(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=se.util.hexToBytes(t);return n.length>1&&(n.charCodeAt(0)===0&&(n.charCodeAt(1)&128)==0||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)==128)?n.substr(1):n}function tC(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function th(e){return se.util.isNodejs&&typeof Qo[e]=="function"}function rh(e){return typeof Ut.globalScope!="undefined"&&typeof Ut.globalScope.crypto=="object"&&typeof Ut.globalScope.crypto.subtle=="object"&&typeof Ut.globalScope.crypto.subtle[e]=="function"}function nh(e){return typeof Ut.globalScope!="undefined"&&typeof Ut.globalScope.msCrypto=="object"&&typeof Ut.globalScope.msCrypto.subtle=="object"&&typeof Ut.globalScope.msCrypto.subtle[e]=="function"}function ih(e){for(var t=se.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}});var Jo=K((_S,lh)=>{var ne=me();Rr();Ht();ki();ir();Lr();Wa();Xr();Ot();Go();Ri();Le();typeof sh=="undefined"&&(sh=ne.jsbn.BigInteger);var sh,V=ne.asn1,ge=ne.pki=ne.pki||{};lh.exports=ge.pbe=ne.pbe=ne.pbe||{};var tn=ge.oids,rC={name:"EncryptedPrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},nC={name:"PBES2Algorithms",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},iC={name:"pkcs-12PbeParams",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"iterations"}]};ge.encryptPrivateKeyInfo=function(e,t,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=ne.random.getBytesSync(n.saltSize),i=n.count,a=V.integerToDer(i),s,o,c;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var u,l,f;switch(n.algorithm){case"aes128":s=16,u=16,l=tn["aes128-CBC"],f=ne.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,l=tn["aes192-CBC"],f=ne.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,l=tn["aes256-CBC"],f=ne.aes.createEncryptionCipher;break;case"des":s=8,u=8,l=tn.desCBC,f=ne.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=n.algorithm,h}var v="hmacWith"+n.prfAlgorithm.toUpperCase(),g=uh(v),C=ne.pkcs5.pbkdf2(t,r,i,s,g),T=ne.random.getBytesSync(u),_=f(C);_.start(T),_.update(V.toDer(e)),_.finish(),c=_.output.getBytes();var U=aC(r,a,s,v);o=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(tn.pkcs5PBES2).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(tn.pkcs5PBKDF2).getBytes()),U]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(l).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,T)])])])}else if(n.algorithm==="3des"){s=24;var B=new ne.util.ByteBuffer(r),C=ge.pbe.generatePkcs12Key(t,B,1,i,s),T=ge.pbe.generatePkcs12Key(t,B,2,i,s),_=ne.des.createEncryptionCipher(C);_.start(T),_.update(V.toDer(e)),_.finish(),c=_.output.getBytes(),o=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(tn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,r),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,a.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=n.algorithm,h}var G=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[o,V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,c)]);return G};ge.decryptPrivateKeyInfo=function(e,t){var n=null,r={},i=[];if(!V.validate(e,rC,r,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=V.derToOid(r.encryptionOid),o=ge.pbe.getCipher(s,r.encryptionParams,t),c=ne.util.createBuffer(r.encryptedData);return o.update(c),o.finish()&&(n=V.fromDer(o.output)),n};ge.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:V.toDer(e).getBytes()};return ne.pem.encode(n,{maxline:t})};ge.encryptedPrivateKeyFromPem=function(e){var t=ne.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return V.fromDer(t.body)};ge.encryptRsaPrivateKey=function(e,t,n){if(n=n||{},!n.legacy){var r=ge.wrapRsaPrivateKey(ge.privateKeyToAsn1(e));return r=ge.encryptPrivateKeyInfo(r,t,n),ge.encryptedPrivateKeyToPem(r)}var i,a,s,o;switch(n.algorithm){case"aes128":i="AES-128-CBC",s=16,a=ne.random.getBytesSync(16),o=ne.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=ne.random.getBytesSync(16),o=ne.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=ne.random.getBytesSync(16),o=ne.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=ne.random.getBytesSync(8),o=ne.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=ne.random.getBytesSync(8),o=ne.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw c.algorithm=n.algorithm,c}var u=ne.pbe.opensslDeriveBytes(t,a.substr(0,8),s),l=o(u);l.start(a),l.update(V.toDer(ge.privateKeyToAsn1(e))),l.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:ne.util.bytesToHex(a).toUpperCase()},body:l.output.getBytes()};return ne.pem.encode(f)};ge.decryptRsaPrivateKey=function(e,t){var n=null,r=ne.pem.decode(e)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var a,s;switch(r.dekInfo.algorithm){case"DES-CBC":a=8,s=ne.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=ne.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=ne.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=ne.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=ne.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(f){return ne.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":a=8,s=function(f){return ne.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":a=16,s=function(f){return ne.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var o=ne.util.hexToBytes(r.dekInfo.parameters),c=ne.pbe.opensslDeriveBytes(t,o.substr(0,8),a),u=s(c);if(u.start(o),u.update(ne.util.createBuffer(r.body)),u.finish())n=u.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=ge.decryptPrivateKeyInfo(V.fromDer(n),t):n=V.fromDer(n),n!==null&&(n=ge.privateKeyFromAsn1(n)),n};ge.pbe.generatePkcs12Key=function(e,t,n,r,i,a){var s,o;if(typeof a=="undefined"||a===null){if(!("sha1"in ne.md))throw new Error('"sha1" hash algorithm unavailable.');a=ne.md.sha1.create()}var c=a.digestLength,u=a.blockLength,l=new ne.util.ByteBuffer,f=new ne.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0)}var h=f.length(),v=t.length(),g=new ne.util.ByteBuffer;g.fillWithByte(n,u);var C=u*Math.ceil(v/u),T=new ne.util.ByteBuffer;for(o=0;o<C;o++)T.putByte(t.at(o%v));var _=u*Math.ceil(h/u),U=new ne.util.ByteBuffer;for(o=0;o<_;o++)U.putByte(f.at(o%h));var B=T;B.putBuffer(U);for(var G=Math.ceil(i/c),M=1;M<=G;M++){var q=new ne.util.ByteBuffer;q.putBytes(g.bytes()),q.putBytes(B.bytes());for(var J=0;J<r;J++)a.start(),a.update(q.getBytes()),q=a.digest();var re=new ne.util.ByteBuffer;for(o=0;o<u;o++)re.putByte(q.at(o%c));var j=Math.ceil(v/u)+Math.ceil(h/u),le=new ne.util.ByteBuffer;for(s=0;s<j;s++){var ae=new ne.util.ByteBuffer(B.getBytes(u)),ue=511;for(o=re.length()-1;o>=0;o--)ue=ue>>8,ue+=re.at(o)+ae.at(o),ae.setAt(o,ue&255);le.putBuffer(ae)}B=le,l.putBuffer(q)}return l.truncate(l.length()-i),l};ge.pbe.getCipher=function(e,t,n){switch(e){case ge.oids.pkcs5PBES2:return ge.pbe.getCipherForPBES2(e,t,n);case ge.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ge.oids["pbewithSHAAnd40BitRC2-CBC"]:return ge.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};ge.pbe.getCipherForPBES2=function(e,t,n){var r={},i=[];if(!V.validate(t,nC,r,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=V.derToOid(r.kdfOid),e!==ge.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=V.derToOid(r.encOid),e!==ge.oids["aes128-CBC"]&&e!==ge.oids["aes192-CBC"]&&e!==ge.oids["aes256-CBC"]&&e!==ge.oids["des-EDE3-CBC"]&&e!==ge.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=r.kdfSalt,o=ne.util.createBuffer(r.kdfIterationCount);o=o.getInt(o.length()<<3);var c,u;switch(ge.oids[e]){case"aes128-CBC":c=16,u=ne.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=ne.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=ne.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=ne.des.createDecryptionCipher;break;case"desCBC":c=8,u=ne.des.createDecryptionCipher;break}var l=ch(r.prfOid),f=ne.pkcs5.pbkdf2(n,s,o,c,l),h=r.encIv,v=u(f);return v.start(h),v};ge.pbe.getCipherForPKCS12PBE=function(e,t,n){var r={},i=[];if(!V.validate(t,iC,r,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=ne.util.createBuffer(r.salt),o=ne.util.createBuffer(r.iterations);o=o.getInt(o.length()<<3);var c,u,l;switch(e){case ge.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=ne.des.startDecrypting;break;case ge.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(C,T){var _=ne.rc2.createDecryptionCipher(C,40);return _.start(T,null),_};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var f=ch(r.prfOid),h=ge.pbe.generatePkcs12Key(n,s,1,o,c,f);f.start();var v=ge.pbe.generatePkcs12Key(n,s,2,o,u,f);return l(h,v)};ge.pbe.opensslDeriveBytes=function(e,t,n,r){if(typeof r=="undefined"||r===null){if(!("md5"in ne.md))throw new Error('"md5" hash algorithm unavailable.');r=ne.md.md5.create()}t===null&&(t="");for(var i=[oh(r,e+t)],a=16,s=1;a<n;++s,a+=16)i.push(oh(r,i[s-1]+e+t));return i.join("").substr(0,n)};function oh(e,t){return e.start().update(t).digest().getBytes()}function ch(e){var t;if(!e)t="hmacWithSHA1";else if(t=ge.oids[V.derToOid(e)],!t){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return uh(t)}function uh(e){var t=ne.md;switch(e){case"hmacWithSHA224":t=ne.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function aC(e,t,n,r){var i=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,e),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,t.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,ne.util.hexToBytes(n.toString(16))),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(ge.oids[r]).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])),i}});var Xo=K((xS,dh)=>{var Fn=me();Ht();Le();var te=Fn.asn1,qn=dh.exports=Fn.pkcs7asn1=Fn.pkcs7asn1||{};Fn.pkcs7=Fn.pkcs7||{};Fn.pkcs7.asn1=qn;var fh={name:"ContentInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:te.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};qn.contentInfoValidator=fh;var hh={name:"EncryptedContentInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:te.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:te.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};qn.envelopedDataValidator={name:"EnvelopedData",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:te.Class.UNIVERSAL,type:te.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(hh)};qn.encryptedDataValidator={name:"EncryptedData",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"version"}].concat(hh)};var sC={name:"SignerInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:te.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:te.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:te.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};qn.signedDataValidator={name:"SignedData",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:te.Class.UNIVERSAL,type:te.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},fh,{name:"SignedData.Certificates",tagClass:te.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:te.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:te.Class.UNIVERSAL,type:te.Type.SET,capture:"signerInfos",optional:!0,value:[sC]}]};qn.recipientInfoValidator={name:"RecipientInfo",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:te.Class.UNIVERSAL,type:te.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:te.Class.UNIVERSAL,type:te.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:te.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:te.Class.UNIVERSAL,type:te.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Zo=K((SS,ph)=>{var rn=me();Le();rn.mgf=rn.mgf||{};var oC=ph.exports=rn.mgf.mgf1=rn.mgf1=rn.mgf1||{};oC.create=function(e){var t={generate:function(n,r){for(var i=new rn.util.ByteBuffer,a=Math.ceil(r/e.digestLength),s=0;s<a;s++){var o=new rn.util.ByteBuffer;o.putInt32(s),e.start(),e.update(n+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}};return t}});var yh=K((AS,gh)=>{var es=me();Zo();gh.exports=es.mgf=es.mgf||{};es.mgf.mgf1=es.mgf1});var ts=K((wS,vh)=>{var nn=me();Ot();Le();var cC=vh.exports=nn.pss=nn.pss||{};cC.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,n=e.mgf,r=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=nn.util.createBuffer(i));var a;if("saltLength"in e)a=e.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||nn.random,o={};return o.encode=function(c,u){var l,f=u-1,h=Math.ceil(f/8),v=c.digest().getBytes();if(h<r+a+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=s.getBytesSync(a):g=i.bytes();var C=new nn.util.ByteBuffer;C.fillWithByte(0,8),C.putBytes(v),C.putBytes(g),t.start(),t.update(C.getBytes());var T=t.digest().getBytes(),_=new nn.util.ByteBuffer;_.fillWithByte(0,h-a-r-2),_.putByte(1),_.putBytes(g);var U=_.getBytes(),B=h-r-1,G=n.generate(T,B),M="";for(l=0;l<B;l++)M+=String.fromCharCode(U.charCodeAt(l)^G.charCodeAt(l));var q=65280>>8*h-f&255;return M=String.fromCharCode(M.charCodeAt(0)&~q)+M.substr(1),M+T+String.fromCharCode(188)},o.verify=function(c,u,l){var f,h=l-1,v=Math.ceil(h/8);if(u=u.substr(-v),v<r+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(v-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=v-r-1,C=u.substr(0,g),T=u.substr(g,r),_=65280>>8*v-h&255;if((C.charCodeAt(0)&_)!=0)throw new Error("Bits beyond keysize not zero as expected.");var U=n.generate(T,g),B="";for(f=0;f<g;f++)B+=String.fromCharCode(C.charCodeAt(f)^U.charCodeAt(f));B=String.fromCharCode(B.charCodeAt(0)&~_)+B.substr(1);var G=v-r-a-2;for(f=0;f<G;f++)if(B.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(B.charCodeAt(G)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var M=B.substr(-a),q=new nn.util.ByteBuffer;q.fillWithByte(0,8),q.putBytes(c),q.putBytes(M),t.start(),t.update(q.getBytes());var J=t.digest().getBytes();return T===J},o}});var is=K((bS,_h)=>{var oe=me();Rr();Ht();ki();ir();yh();Lr();Xr();ts();Ri();Le();var d=oe.asn1,Q=_h.exports=oe.pki=oe.pki||{},be=Q.oids,Ze={};Ze.CN=be.commonName;Ze.commonName="CN";Ze.C=be.countryName;Ze.countryName="C";Ze.L=be.localityName;Ze.localityName="L";Ze.ST=be.stateOrProvinceName;Ze.stateOrProvinceName="ST";Ze.O=be.organizationName;Ze.organizationName="O";Ze.OU=be.organizationalUnitName;Ze.organizationalUnitName="OU";Ze.E=be.emailAddress;Ze.emailAddress="E";var mh=oe.pki.rsa.publicKeyValidator,uC={name:"Certificate",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:d.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:d.Class.UNIVERSAL,type:d.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:d.Class.UNIVERSAL,type:d.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:d.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:d.Class.UNIVERSAL,type:d.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:d.Class.UNIVERSAL,type:d.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:d.Class.UNIVERSAL,type:d.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:d.Class.UNIVERSAL,type:d.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},mh,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:d.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:d.Class.UNIVERSAL,type:d.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:d.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:d.Class.UNIVERSAL,type:d.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:d.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:d.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:d.Class.UNIVERSAL,type:d.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},lC={name:"rsapss",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:d.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:d.Class.UNIVERSAL,type:d.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:d.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:d.Class.UNIVERSAL,type:d.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:d.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:d.Class.UNIVERSAL,type:d.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:d.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:d.Class.UNIVERSAL,type:d.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},fC={name:"CertificationRequestInfo",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:d.Class.UNIVERSAL,type:d.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},mh,{name:"CertificationRequestInfo.attributes",tagClass:d.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:d.Class.UNIVERSAL,type:d.Type.SET,constructed:!0}]}]}]},hC={name:"CertificationRequest",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[fC,{name:"CertificationRequest.signatureAlgorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:d.Class.UNIVERSAL,type:d.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:d.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:d.Class.UNIVERSAL,type:d.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Q.RDNAttributesAsArray=function(e,t){for(var n=[],r,i,a,s=0;s<e.value.length;++s){r=e.value[s];for(var o=0;o<r.value.length;++o)a={},i=r.value[o],a.type=d.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in be&&(a.name=be[a.type],a.name in Ze&&(a.shortName=Ze[a.name])),t&&(t.update(a.type),t.update(a.value)),n.push(a)}return n};Q.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=d.derToOid(r.value[0].value),a=r.value[1].value,s=0;s<a.length;++s){var o={};if(o.type=i,o.value=a[s].value,o.valueTagClass=a[s].type,o.type in be&&(o.name=be[o.type],o.name in Ze&&(o.shortName=Ze[o.name])),o.type===be.extensionRequest){o.extensions=[];for(var c=0;c<o.value.length;++c)o.extensions.push(Q.certificateExtensionFromAsn1(o.value[c]))}t.push(o)}return t};function Pr(e,t){typeof t=="string"&&(t={shortName:t});for(var n=null,r,i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}var rs=function(e,t,n){var r={};if(e!==be["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:be.sha1},mgf:{algorithmOid:be.mgf1,hash:{algorithmOid:be.sha1}},saltLength:20});var i={},a=[];if(!d.validate(t,lC,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=d.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=d.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=d.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r},ns=function(e){switch(be[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return oe.md.sha1.create();case"md5WithRSAEncryption":return oe.md.md5.create();case"sha256WithRSAEncryption":return oe.md.sha256.create();case"sha384WithRSAEncryption":return oe.md.sha384.create();case"sha512WithRSAEncryption":return oe.md.sha512.create();case"RSASSA-PSS":return oe.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},Ch=function(e){var t=e.certificate,n;switch(t.signatureOid){case be.sha1WithRSAEncryption:case be.sha1WithRSASignature:break;case be["RSASSA-PSS"]:var r,i;if(r=be[t.signatureParameters.mgf.hash.algorithmOid],r===void 0||oe.md[r]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=r,a}if(i=be[t.signatureParameters.mgf.algorithmOid],i===void 0||oe.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=oe.mgf[i].create(oe.md[r].create()),r=be[t.signatureParameters.hash.algorithmOid],r===void 0||oe.md[r]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=t.signatureParameters.hash.algorithmOid,a.name=r,a}n=oe.pss.create(oe.md[r].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,n)};Q.certificateFromPem=function(e,t,n){var r=oe.pem.decode(e)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=d.fromDer(r.body,n);return Q.certificateFromAsn1(a,t)};Q.certificateToPem=function(e,t){var n={type:"CERTIFICATE",body:d.toDer(Q.certificateToAsn1(e)).getBytes()};return oe.pem.encode(n,{maxline:t})};Q.publicKeyFromPem=function(e){var t=oe.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=d.fromDer(t.body);return Q.publicKeyFromAsn1(r)};Q.publicKeyToPem=function(e,t){var n={type:"PUBLIC KEY",body:d.toDer(Q.publicKeyToAsn1(e)).getBytes()};return oe.pem.encode(n,{maxline:t})};Q.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:"RSA PUBLIC KEY",body:d.toDer(Q.publicKeyToRSAPublicKey(e)).getBytes()};return oe.pem.encode(n,{maxline:t})};Q.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||oe.md.sha1.create(),r=t.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=d.toDer(Q.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=d.toDer(Q.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(i);var a=n.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};Q.certificationRequestFromPem=function(e,t,n){var r=oe.pem.decode(e)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=d.fromDer(r.body,n);return Q.certificationRequestFromAsn1(a,t)};Q.certificationRequestToPem=function(e,t){var n={type:"CERTIFICATE REQUEST",body:d.toDer(Q.certificationRequestToAsn1(e)).getBytes()};return oe.pem.encode(n,{maxline:t})};Q.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Pr(e.issuer,t)},e.issuer.addField=function(t){Ft([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Pr(e.subject,t)},e.subject.addField=function(t){Ft([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){Ft(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){Ft(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)Eh(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var n=null,r,i=0;n===null&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,n){e.md=n||oe.md.sha1.create();var r=be[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.tbsCertificate=Q.getTBSCertificate(e);var a=d.toDer(e.tbsCertificate);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var r=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=r.attributes,a}var s=t.md;if(s===null){s=ns({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||Q.getTBSCertificate(t),c=d.toDer(o);s.update(c.getBytes())}return s!==null&&(n=Ch({certificate:e,md:s,signature:t.signature})),n},e.isIssuer=function(t){var n=!1,r=e.issuer,i=t.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var a,s,o=0;n&&o<r.attributes.length;++o)a=r.attributes[o],s=i.attributes[o],(a.type!==s.type||a.value!==s.value)&&(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return Q.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=be.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var r=e.extensions[n];if(r.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return oe.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},e};Q.certificateFromAsn1=function(e,t){var n={},r=[];if(!d.validate(e,uC,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var a=d.derToOid(n.publicKeyOid);if(a!==Q.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Q.createCertificate();s.version=n.certVersion?n.certVersion.charCodeAt(0):0;var o=oe.util.createBuffer(n.certSerialNumber);s.serialNumber=o.toHex(),s.signatureOid=oe.asn1.derToOid(n.certSignatureOid),s.signatureParameters=rs(s.signatureOid,n.certSignatureParams,!0),s.siginfo.algorithmOid=oe.asn1.derToOid(n.certinfoSignatureOid),s.siginfo.parameters=rs(s.siginfo.algorithmOid,n.certinfoSignatureParams,!1),s.signature=n.certSignature;var c=[];if(n.certValidity1UTCTime!==void 0&&c.push(d.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&c.push(d.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&c.push(d.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&c.push(d.generalizedTimeToDate(n.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=c[0],s.validity.notAfter=c[1],s.tbsCertificate=n.tbsCertificate,t){s.md=ns({signatureOid:s.signatureOid,type:"certificate"});var u=d.toDer(s.tbsCertificate);s.md.update(u.getBytes())}var l=oe.md.sha1.create(),f=d.toDer(n.certIssuer);l.update(f.getBytes()),s.issuer.getField=function(g){return Pr(s.issuer,g)},s.issuer.addField=function(g){Ft([g]),s.issuer.attributes.push(g)},s.issuer.attributes=Q.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(s.issuer.uniqueId=n.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var h=oe.md.sha1.create(),v=d.toDer(n.certSubject);return h.update(v.getBytes()),s.subject.getField=function(g){return Pr(s.subject,g)},s.subject.addField=function(g){Ft([g]),s.subject.attributes.push(g)},s.subject.attributes=Q.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(s.subject.uniqueId=n.certSubjectUniqueId),s.subject.hash=h.digest().toHex(),n.certExtensions?s.extensions=Q.certificateExtensionsFromAsn1(n.certExtensions):s.extensions=[],s.publicKey=Q.publicKeyFromAsn1(n.subjectPublicKeyInfo),s};Q.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var r=e.value[n],i=0;i<r.value.length;++i)t.push(Q.certificateExtensionFromAsn1(r.value[i]));return t};Q.certificateExtensionFromAsn1=function(e){var t={};if(t.id=d.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===d.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in be){if(t.name=be[t.id],t.name==="keyUsage"){var n=d.fromDer(t.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),t.digitalSignature=(r&128)==128,t.nonRepudiation=(r&64)==64,t.keyEncipherment=(r&32)==32,t.dataEncipherment=(r&16)==16,t.keyAgreement=(r&8)==8,t.keyCertSign=(r&4)==4,t.cRLSign=(r&2)==2,t.encipherOnly=(r&1)==1,t.decipherOnly=(i&128)==128}else if(t.name==="basicConstraints"){var n=d.fromDer(t.value);n.value.length>0&&n.value[0].type===d.Type.BOOLEAN?t.cA=n.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;n.value.length>0&&n.value[0].type===d.Type.INTEGER?a=n.value[0].value:n.value.length>1&&(a=n.value[1].value),a!==null&&(t.pathLenConstraint=d.derToInteger(a))}else if(t.name==="extKeyUsage")for(var n=d.fromDer(t.value),s=0;s<n.value.length;++s){var o=d.derToOid(n.value[s].value);o in be?t[be[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var n=d.fromDer(t.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),t.client=(r&128)==128,t.server=(r&64)==64,t.email=(r&32)==32,t.objsign=(r&16)==16,t.reserved=(r&8)==8,t.sslCA=(r&4)==4,t.emailCA=(r&2)==2,t.objCA=(r&1)==1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var c,n=d.fromDer(t.value),u=0;u<n.value.length;++u){c=n.value[u];var l={type:c.type,value:c.value};switch(t.altNames.push(l),c.type){case 1:case 2:case 6:break;case 7:l.ip=oe.util.bytesToIP(c.value);break;case 8:l.oid=d.derToOid(c.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var n=d.fromDer(t.value);t.subjectKeyIdentifier=oe.util.bytesToHex(n.value)}}return t};Q.certificationRequestFromAsn1=function(e,t){var n={},r=[];if(!d.validate(e,hC,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var a=d.derToOid(n.publicKeyOid);if(a!==Q.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=Q.createCertificationRequest();if(s.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,s.signatureOid=oe.asn1.derToOid(n.csrSignatureOid),s.signatureParameters=rs(s.signatureOid,n.csrSignatureParams,!0),s.siginfo.algorithmOid=oe.asn1.derToOid(n.csrSignatureOid),s.siginfo.parameters=rs(s.siginfo.algorithmOid,n.csrSignatureParams,!1),s.signature=n.csrSignature,s.certificationRequestInfo=n.certificationRequestInfo,t){s.md=ns({signatureOid:s.signatureOid,type:"certification request"});var o=d.toDer(s.certificationRequestInfo);s.md.update(o.getBytes())}var c=oe.md.sha1.create();return s.subject.getField=function(u){return Pr(s.subject,u)},s.subject.addField=function(u){Ft([u]),s.subject.attributes.push(u)},s.subject.attributes=Q.RDNAttributesAsArray(n.certificationRequestInfoSubject,c),s.subject.hash=c.digest().toHex(),s.publicKey=Q.publicKeyFromAsn1(n.subjectPublicKeyInfo),s.getAttribute=function(u){return Pr(s,u)},s.addAttribute=function(u){Ft([u]),s.attributes.push(u)},s.attributes=Q.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),s};Q.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Pr(e.subject,t)},e.subject.addField=function(t){Ft([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Pr(e,t)},e.addAttribute=function(t){Ft([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){Ft(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){Ft(t),e.attributes=t},e.sign=function(t,n){e.md=n||oe.md.sha1.create();var r=be[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.certificationRequestInfo=Q.getCertificationRequestInfo(e);var a=d.toDer(e.certificationRequestInfo);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(n===null){n=ns({signatureOid:e.signatureOid,type:"certification request"});var r=e.certificationRequestInfo||Q.getCertificationRequestInfo(e),i=d.toDer(r);n.update(i.getBytes())}return n!==null&&(t=Ch({certificate:e,md:n,signature:e.signature})),t},e};function Mn(e){for(var t=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]),n,r,i=e.attributes,a=0;a<i.length;++a){n=i[a];var s=n.value,o=d.Type.PRINTABLESTRING;"valueTagClass"in n&&(o=n.valueTagClass,o===d.Type.UTF8&&(s=oe.util.encodeUtf8(s))),r=d.create(d.Class.UNIVERSAL,d.Type.SET,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(n.type).getBytes()),d.create(d.Class.UNIVERSAL,o,!1,s)])]),t.value.push(r)}return t}function Ft(e){for(var t,n=0;n<e.length;++n){if(t=e[n],typeof t.name=="undefined"&&(t.type&&t.type in Q.oids?t.name=Q.oids[t.type]:t.shortName&&t.shortName in Ze&&(t.name=Q.oids[Ze[t.shortName]])),typeof t.type=="undefined")if(t.name&&t.name in Q.oids)t.type=Q.oids[t.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=t,r}if(typeof t.shortName=="undefined"&&t.name&&t.name in Ze&&(t.shortName=Ze[t.name]),t.type===be.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=d.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(Q.certificateExtensionToAsn1(Eh(t.extensions[i])))}if(typeof t.value=="undefined"){var r=new Error("Attribute value not specified.");throw r.attribute=t,r}}}function Eh(e,t){if(t=t||{},typeof e.name=="undefined"&&e.id&&e.id in Q.oids&&(e.name=Q.oids[e.id]),typeof e.id=="undefined")if(e.name&&e.name in Q.oids)e.id=Q.oids[e.name];else{var n=new Error("Extension ID not specified.");throw n.extension=e,n}if(typeof e.value!="undefined")return e;if(e.name==="keyUsage"){var r=0,i=0,a=0;e.digitalSignature&&(i|=128,r=7),e.nonRepudiation&&(i|=64,r=6),e.keyEncipherment&&(i|=32,r=5),e.dataEncipherment&&(i|=16,r=4),e.keyAgreement&&(i|=8,r=3),e.keyCertSign&&(i|=4,r=2),e.cRLSign&&(i|=2,r=1),e.encipherOnly&&(i|=1,r=0),e.decipherOnly&&(a|=128,r=7);var s=String.fromCharCode(r);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),e.value=d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(d.create(d.Class.UNIVERSAL,d.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var c in e)e[c]===!0&&(c in be?o.push(d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(be[c]).getBytes())):c.indexOf(".")!==-1&&o.push(d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(c).getBytes())))}else if(e.name==="nsCertType"){var r=0,i=0;e.client&&(i|=128,r=7),e.server&&(i|=64,r=6),e.email&&(i|=32,r=5),e.objsign&&(i|=16,r=4),e.reserved&&(i|=8,r=3),e.sslCA&&(i|=4,r=2),e.emailCA&&(i|=2,r=1),e.objCA&&(i|=1,r=0);var s=String.fromCharCode(r);i!==0&&(s+=String.fromCharCode(i)),e.value=d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,s)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);for(var u,l=0;l<e.altNames.length;++l){u=e.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=oe.util.bytesFromIP(u.ip),s===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else u.type===8&&(u.oid?s=d.oidToDer(d.oidToDer(u.oid)):s=d.oidToDer(s));e.value.value.push(d.create(d.Class.CONTEXT_SPECIFIC,u.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=d.create(d.Class.UNIVERSAL,d.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var h=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var v=[d.create(d.Class.CONTEXT_SPECIFIC,4,!0,[Mn(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(d.create(d.Class.CONTEXT_SPECIFIC,1,!0,v))}if(e.serialNumber){var g=oe.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(d.create(d.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(e.name==="cRLDistributionPoints"){e.value=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);for(var o=e.value.value,C=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]),T=d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[]),u,l=0;l<e.altNames.length;++l){u=e.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=oe.util.bytesFromIP(u.ip),s===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else u.type===8&&(u.oid?s=d.oidToDer(d.oidToDer(u.oid)):s=d.oidToDer(s));T.value.push(d.create(d.Class.CONTEXT_SPECIFIC,u.type,!1,s))}C.value.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[T])),o.push(C)}if(typeof e.value=="undefined"){var n=new Error("Extension value not specified.");throw n.extension=e,n}return e}function ec(e,t){switch(e){case be["RSASSA-PSS"]:var n=[];return t.hash.algorithmOid!==void 0&&n.push(d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.hash.algorithmOid).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&n.push(d.create(d.Class.CONTEXT_SPECIFIC,1,!0,[d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.mgf.algorithmOid).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(t.mgf.hash.algorithmOid).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&n.push(d.create(d.Class.CONTEXT_SPECIFIC,2,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(t.saltLength).getBytes())])),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,n);default:return d.create(d.Class.UNIVERSAL,d.Type.NULL,!1,"")}}function dC(e){var t=d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var n=e.attributes,r=0;r<n.length;++r){var i=n[r],a=i.value,s=d.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===d.Type.UTF8&&(a=oe.util.encodeUtf8(a));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var c=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(i.type).getBytes()),d.create(d.Class.UNIVERSAL,d.Type.SET,!0,[d.create(d.Class.UNIVERSAL,s,o,a)])]);t.value.push(c)}return t}var pC=new Date("1950-01-01T00:00:00Z"),gC=new Date("2050-01-01T00:00:00Z");function Th(e){return e>=pC&&e<gC?d.create(d.Class.UNIVERSAL,d.Type.UTCTIME,!1,d.dateToUtcTime(e)):d.create(d.Class.UNIVERSAL,d.Type.GENERALIZEDTIME,!1,d.dateToGeneralizedTime(e))}Q.getTBSCertificate=function(e){var t=Th(e.validity.notBefore),n=Th(e.validity.notAfter),r=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.CONTEXT_SPECIFIC,0,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.version).getBytes())]),d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,oe.util.hexToBytes(e.serialNumber)),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.siginfo.algorithmOid).getBytes()),ec(e.siginfo.algorithmOid,e.siginfo.parameters)]),Mn(e.issuer),d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[t,n]),Mn(e.subject),Q.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&r.value.push(d.create(d.Class.CONTEXT_SPECIFIC,1,!0,[d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&r.value.push(d.create(d.Class.CONTEXT_SPECIFIC,2,!0,[d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&r.value.push(Q.certificateExtensionsToAsn1(e.extensions)),r};Q.getCertificationRequestInfo=function(e){var t=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.INTEGER,!1,d.integerToDer(e.version).getBytes()),Mn(e.subject),Q.publicKeyToAsn1(e.publicKey),dC(e)]);return t};Q.distinguishedNameToAsn1=function(e){return Mn(e)};Q.certificateToAsn1=function(e){var t=e.tbsCertificate||Q.getTBSCertificate(e);return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[t,d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.signatureOid).getBytes()),ec(e.signatureOid,e.signatureParameters)]),d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};Q.certificateExtensionsToAsn1=function(e){var t=d.create(d.Class.CONTEXT_SPECIFIC,3,!0,[]),n=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r=0;r<e.length;++r)n.value.push(Q.certificateExtensionToAsn1(e[r]));return t};Q.certificateExtensionToAsn1=function(e){var t=d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[]);t.value.push(d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.id).getBytes())),e.critical&&t.value.push(d.create(d.Class.UNIVERSAL,d.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return typeof e.value!="string"&&(n=d.toDer(n).getBytes()),t.value.push(d.create(d.Class.UNIVERSAL,d.Type.OCTETSTRING,!1,n)),t};Q.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||Q.getCertificationRequestInfo(e);return d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[t,d.create(d.Class.UNIVERSAL,d.Type.SEQUENCE,!0,[d.create(d.Class.UNIVERSAL,d.Type.OID,!1,d.oidToDer(e.signatureOid).getBytes()),ec(e.signatureOid,e.signatureParameters)]),d.create(d.Class.UNIVERSAL,d.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};Q.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(s){var o=n(s.issuer);return o},t.addCertificate=function(s){if(typeof s=="string"&&(s=oe.pki.certificateFromPem(s)),r(s.subject),!t.hasCertificate(s))if(s.subject.hash in t.certs){var o=t.certs[s.subject.hash];oe.util.isArray(o)||(o=[o]),o.push(s),t.certs[s.subject.hash]=o}else t.certs[s.subject.hash]=s},t.hasCertificate=function(s){typeof s=="string"&&(s=oe.pki.certificateFromPem(s));var o=n(s.subject);if(!o)return!1;oe.util.isArray(o)||(o=[o]);for(var c=d.toDer(Q.certificateToAsn1(s)).getBytes(),u=0;u<o.length;++u){var l=d.toDer(Q.certificateToAsn1(o[u])).getBytes();if(c===l)return!0}return!1},t.listAllCertificates=function(){var s=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var c=t.certs[o];if(!oe.util.isArray(c))s.push(c);else for(var u=0;u<c.length;++u)s.push(c[u])}return s},t.removeCertificate=function(s){var o;if(typeof s=="string"&&(s=oe.pki.certificateFromPem(s)),r(s.subject),!t.hasCertificate(s))return null;var c=n(s.subject);if(!oe.util.isArray(c))return o=t.certs[s.subject.hash],delete t.certs[s.subject.hash],o;for(var u=d.toDer(Q.certificateToAsn1(s)).getBytes(),l=0;l<c.length;++l){var f=d.toDer(Q.certificateToAsn1(c[l])).getBytes();u===f&&(o=c[l],c.splice(l,1))}return c.length===0&&delete t.certs[s.subject.hash],o};function n(s){return r(s),t.certs[s.hash]||null}function r(s){if(!s.hash){var o=oe.md.sha1.create();s.attributes=Q.RDNAttributesAsArray(Mn(s),o),s.hash=o.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var a=e[i];t.addCertificate(a)}return t};Q.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Q.verifyCertificateChain=function(e,t,n){typeof n=="function"&&(n={verify:n}),n=n||{},t=t.slice(0);var r=t.slice(0),i=n.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,o=0;do{var c=t.shift(),u=null,l=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:Q.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),s===null){if(u=t[0]||e.getIssuer(c),u===null&&c.isIssuer(c)&&(l=!0,u=c),u){var f=u;oe.util.isArray(f)||(f=[f]);for(var h=!1;!h&&f.length>0;){u=f.shift();try{h=u.verify(c)}catch(M){}}h||(s={message:"Certificate signature is invalid.",error:Q.certificateError.bad_certificate})}s===null&&(!u||l)&&!e.hasCertificate(c)&&(s={message:"Certificate is not trusted.",error:Q.certificateError.unknown_ca})}if(s===null&&u&&!c.isIssuer(u)&&(s={message:"Certificate issuer is invalid.",error:Q.certificateError.bad_certificate}),s===null)for(var v={keyUsage:!0,basicConstraints:!0},g=0;s===null&&g<c.extensions.length;++g){var C=c.extensions[g];C.critical&&!(C.name in v)&&(s={message:"Certificate has an unsupported critical extension.",error:Q.certificateError.unsupported_certificate})}if(s===null&&(!a||t.length===0&&(!u||l))){var T=c.getExtension("basicConstraints"),_=c.getExtension("keyUsage");if(_!==null&&(!_.keyCertSign||T===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Q.certificateError.bad_certificate}),s===null&&T!==null&&!T.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Q.certificateError.bad_certificate}),s===null&&_!==null&&"pathLenConstraint"in T){var U=o-1;U>T.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:Q.certificateError.bad_certificate})}}var B=s===null?!0:s.error,G=n.verify?n.verify(B,o,r):B;if(G===!0)s=null;else throw B===!0&&(s={message:"The application rejected the certificate.",error:Q.certificateError.bad_certificate}),(G||G===0)&&(typeof G=="object"&&!oe.util.isArray(G)?(G.message&&(s.message=G.message),G.error&&(s.error=G.error)):typeof G=="string"&&(s.error=G)),s;a=!1,++o}while(t.length>0);return!0}});var rc=K((IS,Sh)=>{var He=me();Ht();Ln();Lr();Xo();Jo();Ot();Ri();Un();Le();is();var S=He.asn1,Te=He.pki,Li=Sh.exports=He.pkcs12=He.pkcs12||{},xh={name:"ContentInfo",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:S.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},yC={name:"PFX",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"version"},xh,{name:"PFX.macData",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:S.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:S.Class.UNIVERSAL,type:S.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:S.Class.UNIVERSAL,type:S.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},vC={name:"SafeBag",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:S.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:S.Class.UNIVERSAL,type:S.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},mC={name:"Attribute",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:S.Class.UNIVERSAL,type:S.Type.SET,constructed:!0,capture:"values"}]},CC={name:"CertBag",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:S.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:S.Class.UNIVERSAL,type:S.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Di(e,t,n,r){for(var i=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var o=e[a].safeBags[s];if(!(r!==void 0&&o.type!==r)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(n)>=0&&i.push(o)}}return i}Li.pkcs12FromAsn1=function(e,t,n){typeof t=="string"?(n=t,t=!0):t===void 0&&(t=!0);var r={},i=[];if(!S.validate(e,yC,r,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:r.version.charCodeAt(0),safeContents:[],getBags:function(T){var _={},U;return"localKeyId"in T?U=T.localKeyId:"localKeyIdHex"in T&&(U=He.util.hexToBytes(T.localKeyIdHex)),U===void 0&&!("friendlyName"in T)&&"bagType"in T&&(_[T.bagType]=Di(s.safeContents,null,null,T.bagType)),U!==void 0&&(_.localKeyId=Di(s.safeContents,"localKeyId",U,T.bagType)),"friendlyName"in T&&(_.friendlyName=Di(s.safeContents,"friendlyName",T.friendlyName,T.bagType)),_},getBagsByFriendlyName:function(T,_){return Di(s.safeContents,"friendlyName",T,_)},getBagsByLocalKeyId:function(T,_){return Di(s.safeContents,"localKeyId",T,_)}};if(r.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=r.version.charCodeAt(0),a}if(S.derToOid(r.contentType)!==Te.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=S.derToOid(r.contentType),a}var o=r.content.value[0];if(o.tagClass!==S.Class.UNIVERSAL||o.type!==S.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=tc(o),r.mac){var c=null,u=0,l=S.derToOid(r.macAlgorithm);switch(l){case Te.oids.sha1:c=He.md.sha1.create(),u=20;break;case Te.oids.sha256:c=He.md.sha256.create(),u=32;break;case Te.oids.sha384:c=He.md.sha384.create(),u=48;break;case Te.oids.sha512:c=He.md.sha512.create(),u=64;break;case Te.oids.md5:c=He.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+l);var f=new He.util.ByteBuffer(r.macSalt),h="macIterations"in r?parseInt(He.util.bytesToHex(r.macIterations),16):1,v=Li.generateKey(n,f,3,h,u,c),g=He.hmac.create();g.start(c,v),g.update(o.value);var C=g.getMac();if(C.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return EC(s,o.value,t,n),s};function tc(e){if(e.composed||e.constructed){for(var t=He.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function EC(e,t,n,r){if(t=S.fromDer(t,n),t.tagClass!==S.Class.UNIVERSAL||t.type!==S.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],s={},o=[];if(!S.validate(a,xh,s,o)){var c=new Error("Cannot read ContentInfo.");throw c.errors=o,c}var u={encrypted:!1},l=null,f=s.content.value[0];switch(S.derToOid(s.contentType)){case Te.oids.data:if(f.tagClass!==S.Class.UNIVERSAL||f.type!==S.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=tc(f).value;break;case Te.oids.encryptedData:l=TC(f,r),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=S.derToOid(s.contentType),c}u.safeBags=_C(l,n,r),e.safeContents.push(u)}}function TC(e,t){var n={},r=[];if(!S.validate(e,He.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var a=S.derToOid(n.contentType);if(a!==Te.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=S.derToOid(n.encAlgorithm);var s=Te.pbe.getCipher(a,n.encParameter,t),o=tc(n.encryptedContentAsn1),c=He.util.createBuffer(o.value);if(s.update(c),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function _C(e,t,n){if(!t&&e.length===0)return[];if(e=S.fromDer(e,t),e.tagClass!==S.Class.UNIVERSAL||e.type!==S.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<e.value.length;i++){var a=e.value[i],s={},o=[];if(!S.validate(a,vC,s,o)){var c=new Error("Cannot read SafeBag.");throw c.errors=o,c}var u={type:S.derToOid(s.bagId),attributes:xC(s.bagAttributes)};r.push(u);var l,f,h=s.bagValue.value[0];switch(u.type){case Te.oids.pkcs8ShroudedKeyBag:if(h=Te.decryptPrivateKeyInfo(h,n),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Te.oids.keyBag:try{u.key=Te.privateKeyFromAsn1(h)}catch(g){u.key=null,u.asn1=h}continue;case Te.oids.certBag:l=CC,f=function(){if(S.derToOid(s.certId)!==Te.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=S.derToOid(s.certId),g}var C=S.fromDer(s.cert,t);try{u.cert=Te.certificateFromAsn1(C,!0)}catch(T){u.cert=null,u.asn1=C}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(l!==void 0&&!S.validate(h,l,s,o)){var c=new Error("Cannot read PKCS#12 "+l.name);throw c.errors=o,c}f()}return r}function xC(e){var t={};if(e!==void 0)for(var n=0;n<e.length;++n){var r={},i=[];if(!S.validate(e[n],mC,r,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=S.derToOid(r.oid);if(Te.oids[s]!==void 0){t[Te.oids[s]]=[];for(var o=0;o<r.values.length;++o)t[Te.oids[s]].push(r.values[o].value)}}return t}Li.toPkcs12Asn1=function(e,t,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,a;if(i!==null)i=He.util.hexToBytes(i);else if(r.generateLocalKeyId)if(t){var s=He.util.isArray(t)?t[0]:t;typeof s=="string"&&(s=Te.certificateFromPem(s));var o=He.md.sha1.create();o.update(S.toDer(Te.certificateToAsn1(s)).getBytes()),i=o.digest().getBytes()}else i=He.random.getBytes(20);var c=[];i!==null&&c.push(S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.localKeyId).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SET,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&c.push(S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.friendlyName).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SET,!0,[S.create(S.Class.UNIVERSAL,S.Type.BMPSTRING,!1,r.friendlyName)])])),c.length>0&&(a=S.create(S.Class.UNIVERSAL,S.Type.SET,!0,c));var u=[],l=[];t!==null&&(He.util.isArray(t)?l=t:l=[t]);for(var f=[],h=0;h<l.length;++h){t=l[h],typeof t=="string"&&(t=Te.certificateFromPem(t));var v=h===0?a:void 0,g=Te.certificateToAsn1(t),C=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.certBag).getBytes()),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.x509Certificate).getBytes()),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,S.toDer(g).getBytes())])])]),v]);f.push(C)}if(f.length>0){var T=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,f),_=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.data).getBytes()),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,S.toDer(T).getBytes())])]);u.push(_)}var U=null;if(e!==null){var B=Te.wrapRsaPrivateKey(Te.privateKeyToAsn1(e));n===null?U=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.keyBag).getBytes()),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[B]),a]):U=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.pkcs8ShroudedKeyBag).getBytes()),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[Te.encryptPrivateKeyInfo(B,n,r)]),a]);var G=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[U]),M=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.data).getBytes()),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,S.toDer(G).getBytes())])]);u.push(M)}var q=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,u),J;if(r.useMac){var o=He.md.sha1.create(),re=new He.util.ByteBuffer(He.random.getBytes(r.saltSize)),j=r.count,e=Li.generateKey(n,re,3,j,20),le=He.hmac.create();le.start(o,e),le.update(S.toDer(q).getBytes());var ae=le.getMac();J=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.sha1).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")]),S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,ae.getBytes())]),S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,re.getBytes()),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(j).getBytes())])}return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(3).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(Te.oids.data).getBytes()),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,S.toDer(q).getBytes())])]),J])};Li.generateKey=He.pbe.generatePkcs12Key});var ic=K((kS,Ah)=>{var Ur=me();Ht();Lr();Jo();Xr();Wa();rc();ts();Ri();Le();is();var nc=Ur.asn1,Vn=Ah.exports=Ur.pki=Ur.pki||{};Vn.pemToDer=function(e){var t=Ur.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Ur.util.createBuffer(t.body)};Vn.privateKeyFromPem=function(e){var t=Ur.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=nc.fromDer(t.body);return Vn.privateKeyFromAsn1(r)};Vn.privateKeyToPem=function(e,t){var n={type:"RSA PRIVATE KEY",body:nc.toDer(Vn.privateKeyToAsn1(e)).getBytes()};return Ur.pem.encode(n,{maxline:t})};Vn.privateKeyInfoToPem=function(e,t){var n={type:"PRIVATE KEY",body:nc.toDer(e).getBytes()};return Ur.pem.encode(n,{maxline:t})}});var lc=K((BS,Lh)=>{var z=me();Ht();Ln();ja();Xr();ic();Ot();Un();Le();var as=function(e,t,n,r){var i=z.util.createBuffer(),a=e.length>>1,s=a+(e.length&1),o=e.substr(0,s),c=e.substr(a,s),u=z.util.createBuffer(),l=z.hmac.create();n=t+n;var f=Math.ceil(r/16),h=Math.ceil(r/20);l.start("MD5",o);var v=z.util.createBuffer();u.putBytes(n);for(var g=0;g<f;++g)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+n),v.putBuffer(l.digest());l.start("SHA1",c);var C=z.util.createBuffer();u.clear(),u.putBytes(n);for(var g=0;g<h;++g)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+n),C.putBuffer(l.digest());return i.putBytes(z.util.xorBytes(v.getBytes(),C.getBytes(),r)),i},SC=function(e,t,n){var r=z.hmac.create();r.start("SHA1",e);var i=z.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},AC=function(e,t,n){var r=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=z.util.createBuffer(i),t.length=i.length,r=!0}catch(a){}return r},wC=function(e,t,n){var r=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=z.util.createBuffer(i),t.length=i.length,r=!0}catch(a){}return r},It=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32();break}return z.util.createBuffer(e.getBytes(n))},qt=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},y={};y.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};y.SupportedVersions=[y.Versions.TLS_1_1,y.Versions.TLS_1_0];y.Version=y.SupportedVersions[0];y.MaxFragment=16384-1024;y.ConnectionEnd={server:0,client:1};y.PRFAlgorithm={tls_prf_sha256:0};y.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};y.CipherType={stream:0,block:1,aead:2};y.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};y.CompressionMethod={none:0,deflate:1};y.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};y.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};y.Alert={};y.Alert.Level={warning:1,fatal:2};y.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};y.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};y.CipherSuites={};y.getCipherSuite=function(e){var t=null;for(var n in y.CipherSuites){var r=y.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t};y.handleUnexpected=function(e,t){var n=!e.open&&e.entity===y.ConnectionEnd.client;n||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.unexpected_message}})};y.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(y.queue(e,y.createAlert(e,{level:y.Alert.Level.warning,description:y.Alert.Description.no_renegotiation})),y.flush(e)),e.process()};y.parseHelloMessage=function(e,t,n){var r=null,i=e.entity===y.ConnectionEnd.client;if(n<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});else{var a=t.fragment,s=a.length();if(r={version:{major:a.getByte(),minor:a.getByte()},random:z.util.createBuffer(a.getBytes(32)),session_id:It(a,1),extensions:[]},i?(r.cipher_suite=a.getBytes(2),r.compression_method=a.getByte()):(r.cipher_suites=It(a,2),r.compression_methods=It(a,1)),s=n-(s-a.length()),s>0){for(var o=It(a,2);o.length()>0;)r.extensions.push({type:[o.getByte(),o.getByte()],data:It(o,2)});if(!i)for(var c=0;c<r.extensions.length;++c){var u=r.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var l=It(u.data,2);l.length()>0;){var f=l.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(It(l,2).getBytes())}}}if(e.session.version&&(r.version.major!==e.session.version.major||r.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=y.getCipherSuite(r.cipher_suite);else for(var h=z.util.createBuffer(r.cipher_suites.bytes());h.length()>0&&(e.session.cipherSuite=y.getCipherSuite(h.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.handshake_failure},cipherSuite:z.util.bytesToHex(r.cipher_suite)});i?e.session.compressionMethod=r.compression_method:e.session.compressionMethod=y.CompressionMethod.none}return r};y.createSecurityParameters=function(e,t){var n=e.entity===y.ConnectionEnd.client,r=t.random.bytes(),i=n?e.session.sp.client_random:r,a=n?r:y.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:y.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};y.handleServerHello=function(e,t,n){var r=y.parseHelloMessage(e,t,n);if(!e.fail){if(r.version.minor<=e.version.minor)e.version.minor=r.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.protocol_version}});e.session.version=e.version;var i=r.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=bh,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=IC,e.session.resuming=!1,y.createSecurityParameters(e,r)),e.session.id=i,e.process()}};y.handleClientHello=function(e,t,n){var r=y.parseHelloMessage(e,t,n);if(!e.fail){var i=r.session_id.bytes(),a=null;if(e.sessionCache&&(a=e.sessionCache.getSession(i),a===null?i="":(a.version.major!==r.version.major||a.version.minor>r.version.minor)&&(a=null,i="")),i.length===0&&(i=z.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=r.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var s,o=1;o<y.SupportedVersions.length&&(s=y.SupportedVersions[o],!(s.minor<=r.version.minor));++o);e.version={major:s.major,minor:s.minor},e.session.version=e.version}a!==null?(e.expect=sc,e.session.resuming=!0,e.session.sp.client_random=r.random.bytes()):(e.expect=e.verifyClient!==!1?OC:ac,e.session.resuming=!1,y.createSecurityParameters(e,r)),e.open=!0,y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createServerHello(e)})),e.session.resuming?(y.queue(e,y.createRecord(e,{type:y.ContentType.change_cipher_spec,data:y.createChangeCipherSpec()})),e.state.pending=y.createConnectionState(e),e.state.current.write=e.state.pending.write,y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createFinished(e)}))):(y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createCertificate(e)})),e.fail||(y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createServerKeyExchange(e)})),e.verifyClient!==!1&&y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createCertificateRequest(e)})),y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createServerHelloDone(e)})))),y.flush(e),e.process()}};y.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_list:It(r,3)},a,s,o=[];try{for(;i.certificate_list.length()>0;)a=It(i.certificate_list,3),s=z.asn1.fromDer(a),a=z.pki.certificateFromAsn1(s,!0),o.push(a)}catch(u){return e.error(e,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.bad_certificate}})}var c=e.entity===y.ConnectionEnd.client;(c||e.verifyClient===!0)&&o.length===0?e.error(e,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}}):o.length===0?e.expect=c?wh:ac:(c?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],y.verifyCertificateChain(e,o)&&(e.expect=c?wh:ac)),e.process()};y.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.unsupported_certificate}});e.expect=kC,e.process()};y.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.unsupported_certificate}});var r=t.fragment,i={enc_pre_master_secret:It(r,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=z.pki.privateKeyFromPem(a)}catch(c){e.error(e,{message:"Could not get private key.",cause:c,send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}})}if(a===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==s.pre_master_secret.charCodeAt(0)||o.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(c){s.pre_master_secret=z.random.getBytes(48)}e.expect=sc,e.session.clientCertificate!==null&&(e.expect=PC),e.process()};y.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_types:It(r,1),certificate_authorities:It(r,2)};e.session.certificateRequest=i,e.expect=BC,e.process()};y.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var a={signature:It(r,2).getBytes()},s=z.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch(c){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.handshake_failure}})}e.expect=sc,e.process()};y.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.record_overflow}});if(e.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.insufficient_security}},i=0,a=e.verify(e,r.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!z.util.isArray(a)?(a.message&&(r.message=a.message),a.alert&&(r.alert.description=a.alert)):typeof a=="number"&&(r.alert.description=a)),e.error(e,r)}e.session.certificateRequest!==null&&(t=y.createRecord(e,{type:y.ContentType.handshake,data:y.createCertificate(e)}),y.queue(e,t)),t=y.createRecord(e,{type:y.ContentType.handshake,data:y.createClientKeyExchange(e)}),y.queue(e,t),e.expect=LC;var s=function(o,c){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&y.queue(o,y.createRecord(o,{type:y.ContentType.handshake,data:y.createCertificateVerify(o,c)})),y.queue(o,y.createRecord(o,{type:y.ContentType.change_cipher_spec,data:y.createChangeCipherSpec()})),o.state.pending=y.createConnectionState(o),o.state.current.write=o.state.pending.write,y.queue(o,y.createRecord(o,{type:y.ContentType.handshake,data:y.createFinished(o)})),o.expect=bh,y.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);y.getClientSignature(e,s)};y.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});var n=e.entity===y.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=y.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?NC:UC,e.process()};y.handleFinished=function(e,t,n){var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var a=t.fragment.getBytes();r=z.util.createBuffer(),r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var s=e.entity===y.ConnectionEnd.client,o=s?"server finished":"client finished",c=e.session.sp,u=12,l=as;if(r=l(c.master_secret,o,r.getBytes(),u),r.getBytes()!==a)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&s||!e.session.resuming&&!s)&&(y.queue(e,y.createRecord(e,{type:y.ContentType.change_cipher_spec,data:y.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createFinished(e)}))),e.expect=s?RC:FC,e.handshaking=!1,++e.handshakes,e.peerCertificate=s?e.session.serverCertificate:e.session.clientCertificate,y.flush(e),e.isConnected=!0,e.connected(e),e.process()};y.handleAlert=function(e,t){var n=t.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case y.Alert.Description.close_notify:i="Connection closed.";break;case y.Alert.Description.unexpected_message:i="Unexpected message.";break;case y.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case y.Alert.Description.decryption_failed:i="Decryption failed.";break;case y.Alert.Description.record_overflow:i="Record overflow.";break;case y.Alert.Description.decompression_failure:i="Decompression failed.";break;case y.Alert.Description.handshake_failure:i="Handshake failure.";break;case y.Alert.Description.bad_certificate:i="Bad certificate.";break;case y.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case y.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case y.Alert.Description.certificate_expired:i="Certificate expired.";break;case y.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case y.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case y.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case y.Alert.Description.access_denied:i="Access denied.";break;case y.Alert.Description.decode_error:i="Decode error.";break;case y.Alert.Description.decrypt_error:i="Decrypt error.";break;case y.Alert.Description.export_restriction:i="Export restriction.";break;case y.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case y.Alert.Description.insufficient_security:i="Insufficient security.";break;case y.Alert.Description.internal_error:i="Internal error.";break;case y.Alert.Description.user_canceled:i="User canceled.";break;case y.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===y.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===y.ConnectionEnd.client?"server":"client",alert:r}),e.process()};y.handleHandshake=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return e.fragmented=t,t.fragment=z.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var a=n.bytes(i+4);n.read+=4,r in os[e.entity][e.expect]?(e.entity===y.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:z.md.md5.create(),sha1:z.md.sha1.create()}),r!==y.HandshakeType.hello_request&&r!==y.HandshakeType.certificate_verify&&r!==y.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),os[e.entity][e.expect][r](e,t,i)):y.handleUnexpected(e,t)};y.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};y.handleHeartbeat=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt16(),a=n.getBytes(i);if(r===y.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();y.queue(e,y.createRecord(e,{type:y.ContentType.heartbeat,data:y.createHeartbeat(y.HeartbeatMessageType.heartbeat_response,a)})),y.flush(e)}else if(r===y.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,z.util.createBuffer(a))}e.process()};var bC=0,IC=1,wh=2,kC=3,BC=4,bh=5,NC=6,RC=7,LC=8,DC=0,OC=1,ac=2,PC=3,sc=4,UC=5,FC=6,p=y.handleUnexpected,Ih=y.handleChangeCipherSpec,ut=y.handleAlert,Ct=y.handleHandshake,kh=y.handleApplicationData,lt=y.handleHeartbeat,oc=[];oc[y.ConnectionEnd.client]=[[p,ut,Ct,p,lt],[p,ut,Ct,p,lt],[p,ut,Ct,p,lt],[p,ut,Ct,p,lt],[p,ut,Ct,p,lt],[Ih,ut,p,p,lt],[p,ut,Ct,p,lt],[p,ut,Ct,kh,lt],[p,ut,Ct,p,lt]];oc[y.ConnectionEnd.server]=[[p,ut,Ct,p,lt],[p,ut,Ct,p,lt],[p,ut,Ct,p,lt],[p,ut,Ct,p,lt],[Ih,ut,p,p,lt],[p,ut,Ct,p,lt],[p,ut,Ct,kh,lt],[p,ut,Ct,p,lt]];var Fr=y.handleHelloRequest,qC=y.handleServerHello,Bh=y.handleCertificate,Nh=y.handleServerKeyExchange,cc=y.handleCertificateRequest,ss=y.handleServerHelloDone,Rh=y.handleFinished,os=[];os[y.ConnectionEnd.client]=[[p,p,qC,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[Fr,p,p,p,p,p,p,p,p,p,p,Bh,Nh,cc,ss,p,p,p,p,p,p],[Fr,p,p,p,p,p,p,p,p,p,p,p,Nh,cc,ss,p,p,p,p,p,p],[Fr,p,p,p,p,p,p,p,p,p,p,p,p,cc,ss,p,p,p,p,p,p],[Fr,p,p,p,p,p,p,p,p,p,p,p,p,p,ss,p,p,p,p,p,p],[Fr,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[Fr,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,Rh],[Fr,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[Fr,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p]];var MC=y.handleClientHello,VC=y.handleClientKeyExchange,GC=y.handleCertificateVerify;os[y.ConnectionEnd.server]=[[p,MC,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,Bh,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,VC,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,GC,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,Rh],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],[p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p]];y.generateKeys=function(e,t){var n=as,r=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,"master secret",r,48).bytes(),t.pre_master_secret=null),r=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===y.Versions.TLS_1_0.major&&e.version.minor===y.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var s=n(t.master_secret,"key expansion",r,i),o={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return a&&(o.client_write_IV=s.getBytes(t.fixed_iv_length),o.server_write_IV=s.getBytes(t.fixed_iv_length)),o};y.createConnectionState=function(e){var t=e.entity===y.ConnectionEnd.client,n=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},r={read:n(),write:n()};if(r.read.update=function(a,s){return r.read.cipherFunction(s,r.read)?r.read.compressFunction(a,s,r.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.bad_record_mac}}),!a.fail},r.write.update=function(a,s){return r.write.compressFunction(a,s,r.write)?r.write.cipherFunction(s,r.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}}),!a.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=y.generateKeys(e,i),r.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(r,e,i),i.compression_algorithm){case y.CompressionMethod.none:break;case y.CompressionMethod.deflate:r.read.compressFunction=wC,r.write.compressFunction=AC;break;default:throw new Error("Unsupported compression algorithm.")}}return r};y.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,n=z.util.createBuffer();return n.putInt32(t),n.putBytes(z.random.getBytes(28)),n};y.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n};y.createAlert=function(e,t){var n=z.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),y.createRecord(e,{type:y.ContentType.alert,data:n})};y.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=z.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var r=e.cipherSuites[n];t.putByte(r.id[0]),t.putByte(r.id[1])}var i=t.length(),a=z.util.createBuffer();a.putByte(y.CompressionMethod.none);var s=a.length(),o=z.util.createBuffer();if(e.virtualHost){var c=z.util.createBuffer();c.putByte(0),c.putByte(0);var u=z.util.createBuffer();u.putByte(0),qt(u,2,z.util.createBuffer(e.virtualHost));var l=z.util.createBuffer();qt(l,2,u),qt(c,2,l),o.putBuffer(c)}var f=o.length();f>0&&(f+=2);var h=e.session.id,v=h.length+1+2+4+28+2+i+1+s+f,g=z.util.createBuffer();return g.putByte(y.HandshakeType.client_hello),g.putInt24(v),g.putByte(e.version.major),g.putByte(e.version.minor),g.putBytes(e.session.sp.client_random),qt(g,1,z.util.createBuffer(h)),qt(g,2,t),qt(g,1,a),f>0&&qt(g,2,o),g};y.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,r=z.util.createBuffer();return r.putByte(y.HandshakeType.server_hello),r.putInt24(n),r.putByte(e.version.major),r.putByte(e.version.minor),r.putBytes(e.session.sp.server_random),qt(r,1,z.util.createBuffer(t)),r.putByte(e.session.cipherSuite.id[0]),r.putByte(e.session.cipherSuite.id[1]),r.putByte(e.session.compressionMethod),r};y.createCertificate=function(e){var t=e.entity===y.ConnectionEnd.client,n=null;if(e.getCertificate){var r;t?r=e.session.certificateRequest:r=e.session.extensions.server_name.serverNameList,n=e.getCertificate(e,r)}var i=z.util.createBuffer();if(n!==null)try{z.util.isArray(n)||(n=[n]);for(var a=null,s=0;s<n.length;++s){var o=z.pem.decode(n[s])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=o.type,c}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=z.util.createBuffer(o.body);a===null&&(a=z.asn1.fromDer(u.bytes(),!1));var l=z.util.createBuffer();qt(l,3,u),i.putBuffer(l)}n=z.pki.certificateFromAsn1(a),t?e.session.clientCertificate=n:e.session.serverCertificate=n}catch(v){return e.error(e,{message:"Could not send certificate list.",cause:v,send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.bad_certificate}})}var f=3+i.length(),h=z.util.createBuffer();return h.putByte(y.HandshakeType.certificate),h.putInt24(f),qt(h,3,i),h};y.createClientKeyExchange=function(e){var t=z.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(z.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var r=e.session.serverCertificate.publicKey;t=r.encrypt(n.pre_master_secret);var i=t.length+2,a=z.util.createBuffer();return a.putByte(y.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(t.length),a.putBytes(t),a};y.createServerKeyExchange=function(e){var t=0,n=z.util.createBuffer();return t>0&&(n.putByte(y.HandshakeType.server_key_exchange),n.putInt24(t)),n};y.getClientSignature=function(e,t){var n=z.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(r,i,a){var s=null;if(r.getPrivateKey)try{s=r.getPrivateKey(r,r.session.clientCertificate),s=z.pki.privateKeyFromPem(s)}catch(o){r.error(r,{message:"Could not get private key.",cause:o,send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}})}s===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}}):i=s.sign(i,null),a(r,i)},e.getSignature(e,n,t)};y.createCertificateVerify=function(e,t){var n=t.length+2,r=z.util.createBuffer();return r.putByte(y.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(t.length),r.putBytes(t),r};y.createCertificateRequest=function(e){var t=z.util.createBuffer();t.putByte(1);var n=z.util.createBuffer();for(var r in e.caStore.certs){var i=e.caStore.certs[r],a=z.pki.distinguishedNameToAsn1(i.subject),s=z.asn1.toDer(a);n.putInt16(s.length()),n.putBuffer(s)}var o=1+t.length()+2+n.length(),c=z.util.createBuffer();return c.putByte(y.HandshakeType.certificate_request),c.putInt24(o),qt(c,1,t),qt(c,2,n),c};y.createServerHelloDone=function(e){var t=z.util.createBuffer();return t.putByte(y.HandshakeType.server_hello_done),t.putInt24(0),t};y.createChangeCipherSpec=function(){var e=z.util.createBuffer();return e.putByte(1),e};y.createFinished=function(e){var t=z.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===y.ConnectionEnd.client,r=e.session.sp,i=12,a=as,s=n?"client finished":"server finished";t=a(r.master_secret,s,t.getBytes(),i);var o=z.util.createBuffer();return o.putByte(y.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};y.createHeartbeat=function(e,t,n){typeof n=="undefined"&&(n=t.length);var r=z.util.createBuffer();r.putByte(e),r.putInt16(n),r.putBytes(t);var i=r.length(),a=Math.max(16,i-n-3);return r.putBytes(z.random.getBytes(a)),r};y.queue=function(e,t){if(!!t&&!(t.fragment.length()===0&&(t.type===y.ContentType.handshake||t.type===y.ContentType.alert||t.type===y.ContentType.change_cipher_spec))){if(t.type===y.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var r;if(t.fragment.length()<=y.MaxFragment)r=[t];else{r=[];for(var i=t.fragment.bytes();i.length>y.MaxFragment;)r.push(y.createRecord(e,{type:t.type,data:z.util.createBuffer(i.slice(0,y.MaxFragment))})),i=i.slice(y.MaxFragment);i.length>0&&r.push(y.createRecord(e,{type:t.type,data:z.util.createBuffer(i)}))}for(var a=0;a<r.length&&!e.fail;++a){var s=r[a],o=e.state.current.write;o.update(e,s)&&e.records.push(s)}}};y.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var uc=function(e){switch(e){case!0:return!0;case z.pki.certificateError.bad_certificate:return y.Alert.Description.bad_certificate;case z.pki.certificateError.unsupported_certificate:return y.Alert.Description.unsupported_certificate;case z.pki.certificateError.certificate_revoked:return y.Alert.Description.certificate_revoked;case z.pki.certificateError.certificate_expired:return y.Alert.Description.certificate_expired;case z.pki.certificateError.certificate_unknown:return y.Alert.Description.certificate_unknown;case z.pki.certificateError.unknown_ca:return y.Alert.Description.unknown_ca;default:return y.Alert.Description.bad_certificate}},KC=function(e){switch(e){case!0:return!0;case y.Alert.Description.bad_certificate:return z.pki.certificateError.bad_certificate;case y.Alert.Description.unsupported_certificate:return z.pki.certificateError.unsupported_certificate;case y.Alert.Description.certificate_revoked:return z.pki.certificateError.certificate_revoked;case y.Alert.Description.certificate_expired:return z.pki.certificateError.certificate_expired;case y.Alert.Description.certificate_unknown:return z.pki.certificateError.certificate_unknown;case y.Alert.Description.unknown_ca:return z.pki.certificateError.unknown_ca;default:return z.pki.certificateError.bad_certificate}};y.verifyCertificateChain=function(e,t){try{var n={};for(var r in e.verifyOptions)n[r]=e.verifyOptions[r];n.verify=function(a,s,o){var c=uc(a),u=e.verify(e,a,s,o);if(u!==!0){if(typeof u=="object"&&!z.util.isArray(u)){var l=new Error("The application rejected the certificate.");throw l.send=!0,l.alert={level:y.Alert.Level.fatal,description:y.Alert.Description.bad_certificate},u.message&&(l.message=u.message),u.alert&&(l.alert.description=u.alert),l}u!==a&&(u=KC(u))}return u},z.pki.verifyCertificateChain(e.caStore,t,n)}catch(a){var i=a;(typeof i!="object"||z.util.isArray(i))&&(i={send:!0,alert:{level:y.Alert.Level.fatal,description:uc(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:y.Alert.Level.fatal,description:uc(i.error)}),e.error(e,i)}return!e.fail};y.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{n={},n.cache=e||{},n.capacity=Math.max(t||100,1),n.order=[];for(var r in e)n.order.length<=t?n.order.push(r):delete e[r];n.getSession=function(i){var a=null,s=null;if(i?s=z.util.bytesToHex(i):n.order.length>0&&(s=n.order[0]),s!==null&&s in n.cache){a=n.cache[s],delete n.cache[s];for(var o in n.order)if(n.order[o]===s){n.order.splice(o,1);break}}return a},n.setSession=function(i,a){if(n.order.length===n.capacity){var s=n.order.shift();delete n.cache[s]}var s=z.util.bytesToHex(i);n.order.push(s),n.cache[s]=a}}return n};y.createConnection=function(e){var t=null;e.caStore?z.util.isArray(e.caStore)?t=z.pki.createCaStore(e.caStore):t=e.caStore:t=z.pki.createCaStore();var n=e.cipherSuites||null;if(n===null){n=[];for(var r in y.CipherSuites)n.push(y.CipherSuites[r])}var i=e.server?y.ConnectionEnd.server:y.ConnectionEnd.client,a=e.sessionCache?y.createSessionCache(e.sessionCache):null,s={version:{major:y.Version.major,minor:y.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(l,f,h,v){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:z.util.createBuffer(),tlsData:z.util.createBuffer(),data:z.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(l,f){f.origin=f.origin||(l.entity===y.ConnectionEnd.client?"client":"server"),f.send&&(y.queue(l,y.createAlert(l,f.alert)),y.flush(l));var h=f.fatal!==!1;h&&(l.fail=!0),e.error(l,f),h&&l.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};s.reset=function(l){s.version={major:y.Version.major,minor:y.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===y.ConnectionEnd.client?bC:DC,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(l||typeof l=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=y.createConnectionState(s)},s.reset();var o=function(l,f){var h=f.type-y.ContentType.change_cipher_spec,v=oc[l.entity][l.expect];h in v?v[h](l,f):y.handleUnexpected(l,f)},c=function(l){var f=0,h=l.input,v=h.length();if(v<5)f=5-v;else{l.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:z.util.createBuffer(),ready:!1};var g=l.record.version.major===l.version.major;g&&l.session&&l.session.version&&(g=l.record.version.minor===l.version.minor),g||l.error(l,{message:"Incompatible TLS version.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.protocol_version}})}return f},u=function(l){var f=0,h=l.input,v=h.length();if(v<l.record.length)f=l.record.length-v;else{l.record.fragment.putBytes(h.getBytes(l.record.length)),h.compact();var g=l.state.current.read;g.update(l,l.record)&&(l.fragmented!==null&&(l.fragmented.type===l.record.type?(l.fragmented.fragment.putBuffer(l.record.fragment),l.record=l.fragmented):l.error(l,{message:"Invalid fragmented record.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.unexpected_message}})),l.record.ready=!0)}return f};return s.handshake=function(l){if(s.entity!==y.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,l=l||"";var f=null;l.length>0&&(s.sessionCache&&(f=s.sessionCache.getSession(l)),f===null&&(l="")),l.length===0&&s.sessionCache&&(f=s.sessionCache.getSession(),f!==null&&(l=f.id)),s.session={id:l,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:z.md.md5.create(),sha1:z.md.sha1.create()},f&&(s.version=f.version,s.session.sp=f.sp),s.session.sp.client_random=y.createRandom().getBytes(),s.open=!0,y.queue(s,y.createRecord(s,{type:y.ContentType.handshake,data:y.createClientHello(s)})),y.flush(s)}},s.process=function(l){var f=0;return l&&s.input.putBytes(l),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(f=c(s)),!s.fail&&s.record!==null&&!s.record.ready&&(f=u(s)),!s.fail&&s.record!==null&&s.record.ready&&o(s,s.record)),f},s.prepare=function(l){return y.queue(s,y.createRecord(s,{type:y.ContentType.application_data,data:z.util.createBuffer(l)})),y.flush(s)},s.prepareHeartbeatRequest=function(l,f){return l instanceof z.util.ByteBuffer&&(l=l.bytes()),typeof f=="undefined"&&(f=l.length),s.expectedHeartbeatPayload=l,y.queue(s,y.createRecord(s,{type:y.ContentType.heartbeat,data:y.createHeartbeat(y.HeartbeatMessageType.heartbeat_request,l,f)})),y.flush(s)},s.close=function(l){if(!s.fail&&s.sessionCache&&s.session){var f={id:s.session.id,version:s.session.version,sp:s.session.sp};f.sp.keys=null,s.sessionCache.setSession(f.id,f)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,y.queue(s,y.createAlert(s,{level:y.Alert.Level.warning,description:y.Alert.Description.close_notify})),y.flush(s)),s.closed(s)),s.reset(l)},s};Lh.exports=z.tls=z.tls||{};for(cs in y)typeof y[cs]!="function"&&(z.tls[cs]=y[cs]);var cs;z.tls.prf_tls1=as;z.tls.hmac_sha1=SC;z.tls.createSessionCache=y.createSessionCache;z.tls.createConnection=y.createConnection});var Ph=K((NS,Oh)=>{var qr=me();Rr();lc();var Mt=Oh.exports=qr.tls;Mt.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Mt.BulkCipherAlgorithm.aes,e.cipher_type=Mt.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Mt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:Dh};Mt.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Mt.BulkCipherAlgorithm.aes,e.cipher_type=Mt.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Mt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:Dh};function Dh(e,t,n){var r=t.entity===qr.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:qr.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},e.write.cipherState={init:!1,cipher:qr.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},e.read.cipherFunction=zC,e.write.cipherFunction=jC,e.read.macLength=e.write.macLength=n.mac_length,e.read.macFunction=e.write.macFunction=Mt.hmac_sha1}function jC(e,t){var n=!1,r=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(r),t.updateSequenceNumber();var i;e.version.minor===Mt.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=qr.random.getBytesSync(16),t.cipherState.init=!0;var a=t.cipherState.cipher;return a.start({iv:i}),e.version.minor>=Mt.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(e.fragment),a.finish(HC)&&(e.fragment=a.output,e.length=e.fragment.length(),n=!0),n}function HC(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function $C(e,t,n){var r=!0;if(n){for(var i=t.length(),a=t.last(),s=i-1-a;s<i-1;++s)r=r&&t.at(s)==a;r&&t.truncate(a+1)}return r}function zC(e,t){var n=!1,r;e.version.minor===Mt.Versions.TLS_1_0.minor?r=t.cipherState.init?null:t.cipherState.iv:r=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),n=i.finish($C);var a=t.macLength,s=qr.random.getBytesSync(a),o=i.output.length();o>=a?(e.fragment=i.output.getBytes(o-a),s=i.output.getBytes(a)):e.fragment=i.output.getBytes(),e.fragment=qr.util.createBuffer(e.fragment),e.length=e.fragment.length();var c=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),n=WC(t.macKey,s,c)&&n,n}function WC(e,t,n){var r=qr.hmac.create();return r.start("SHA1",e),r.update(t),t=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),t===n}});var dc=K((RS,Mh)=>{var We=me();ir();Le();var Oi=Mh.exports=We.sha512=We.sha512||{};We.md.sha512=We.md.algorithms.sha512=Oi;var Uh=We.sha384=We.sha512.sha384=We.sha512.sha384||{};Uh.create=function(){return Oi.create("SHA-384")};We.md.sha384=We.md.algorithms.sha384=Uh;We.sha512.sha256=We.sha512.sha256||{create:function(){return Oi.create("SHA-512/256")}};We.md["sha512/256"]=We.md.algorithms["sha512/256"]=We.sha512.sha256;We.sha512.sha224=We.sha512.sha224||{create:function(){return Oi.create("SHA-512/224")}};We.md["sha512/224"]=We.md.algorithms["sha512/224"]=We.sha512.sha224;Oi.create=function(e){if(Fh||YC(),typeof e=="undefined"&&(e="SHA-512"),!(e in an))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=an[e],n=null,r=We.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var c=o.messageLengthSize/4,u=0;u<c;++u)o.fullMessageLength.push(0);r=We.util.createBuffer(),n=new Array(t.length);for(var u=0;u<t.length;++u)n[u]=t[u].slice(0);return o},o.start(),o.update=function(c,u){u==="utf8"&&(c=We.util.encodeUtf8(c));var l=c.length;o.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=l[1],l[1]=l[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,l[0]=l[1]/4294967296>>>0;return r.putBytes(c),qh(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),o},o.digest=function(){var c=We.util.createBuffer();c.putBytes(r.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,l=u&o.blockLength-1;c.putBytes(fc.substr(0,o.blockLength-l));for(var f,h,v=o.fullMessageLength[0]*8,g=0;g<o.fullMessageLength.length-1;++g)f=o.fullMessageLength[g+1]*8,h=f/4294967296>>>0,v+=h,c.putInt32(v>>>0),v=f>>>0;c.putInt32(v);for(var C=new Array(n.length),g=0;g<n.length;++g)C[g]=n[g].slice(0);qh(C,i,c);var T=We.util.createBuffer(),_;e==="SHA-512"?_=C.length:e==="SHA-384"?_=C.length-2:_=C.length-4;for(var g=0;g<_;++g)T.putInt32(C[g][0]),(g!==_-1||e!=="SHA-512/224")&&T.putInt32(C[g][1]);return T},o};var fc=null,Fh=!1,hc=null,an=null;function YC(){fc=String.fromCharCode(128),fc+=We.util.fillString(String.fromCharCode(0),128),hc=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],an={},an["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],an["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],an["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],an["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Fh=!0}function qh(e,t,n){for(var r,i,a,s,o,c,u,l,f,h,v,g,C,T,_,U,B,G,M,q,J,re,j,le,ae,ue,ke,Be,fe,Ce,X,ye,qe,ve,Se,Ae=n.length();Ae>=128;){for(fe=0;fe<16;++fe)t[fe][0]=n.getInt32()>>>0,t[fe][1]=n.getInt32()>>>0;for(;fe<80;++fe)ye=t[fe-2],Ce=ye[0],X=ye[1],r=((Ce>>>19|X<<13)^(X>>>29|Ce<<3)^Ce>>>6)>>>0,i=((Ce<<13|X>>>19)^(X<<3|Ce>>>29)^(Ce<<26|X>>>6))>>>0,ve=t[fe-15],Ce=ve[0],X=ve[1],a=((Ce>>>1|X<<31)^(Ce>>>8|X<<24)^Ce>>>7)>>>0,s=((Ce<<31|X>>>1)^(Ce<<24|X>>>8)^(Ce<<25|X>>>7))>>>0,qe=t[fe-7],Se=t[fe-16],X=i+qe[1]+s+Se[1],t[fe][0]=r+qe[0]+a+Se[0]+(X/4294967296>>>0)>>>0,t[fe][1]=X>>>0;for(C=e[0][0],T=e[0][1],_=e[1][0],U=e[1][1],B=e[2][0],G=e[2][1],M=e[3][0],q=e[3][1],J=e[4][0],re=e[4][1],j=e[5][0],le=e[5][1],ae=e[6][0],ue=e[6][1],ke=e[7][0],Be=e[7][1],fe=0;fe<80;++fe)u=((J>>>14|re<<18)^(J>>>18|re<<14)^(re>>>9|J<<23))>>>0,l=((J<<18|re>>>14)^(J<<14|re>>>18)^(re<<23|J>>>9))>>>0,f=(ae^J&(j^ae))>>>0,h=(ue^re&(le^ue))>>>0,o=((C>>>28|T<<4)^(T>>>2|C<<30)^(T>>>7|C<<25))>>>0,c=((C<<4|T>>>28)^(T<<30|C>>>2)^(T<<25|C>>>7))>>>0,v=(C&_|B&(C^_))>>>0,g=(T&U|G&(T^U))>>>0,X=Be+l+h+hc[fe][1]+t[fe][1],r=ke+u+f+hc[fe][0]+t[fe][0]+(X/4294967296>>>0)>>>0,i=X>>>0,X=c+g,a=o+v+(X/4294967296>>>0)>>>0,s=X>>>0,ke=ae,Be=ue,ae=j,ue=le,j=J,le=re,X=q+i,J=M+r+(X/4294967296>>>0)>>>0,re=X>>>0,M=B,q=G,B=_,G=U,_=C,U=T,X=i+s,C=r+a+(X/4294967296>>>0)>>>0,T=X>>>0;X=e[0][1]+T,e[0][0]=e[0][0]+C+(X/4294967296>>>0)>>>0,e[0][1]=X>>>0,X=e[1][1]+U,e[1][0]=e[1][0]+_+(X/4294967296>>>0)>>>0,e[1][1]=X>>>0,X=e[2][1]+G,e[2][0]=e[2][0]+B+(X/4294967296>>>0)>>>0,e[2][1]=X>>>0,X=e[3][1]+q,e[3][0]=e[3][0]+M+(X/4294967296>>>0)>>>0,e[3][1]=X>>>0,X=e[4][1]+re,e[4][0]=e[4][0]+J+(X/4294967296>>>0)>>>0,e[4][1]=X>>>0,X=e[5][1]+le,e[5][0]=e[5][0]+j+(X/4294967296>>>0)>>>0,e[5][1]=X>>>0,X=e[6][1]+ue,e[6][0]=e[6][0]+ae+(X/4294967296>>>0)>>>0,e[6][1]=X>>>0,X=e[7][1]+Be,e[7][0]=e[7][0]+ke+(X/4294967296>>>0)>>>0,e[7][1]=X>>>0,Ae-=128}}});var Vh=K(pc=>{var QC=me();Ht();var ot=QC.asn1;pc.privateKeyValidator={name:"PrivateKeyInfo",tagClass:ot.Class.UNIVERSAL,type:ot.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:ot.Class.UNIVERSAL,type:ot.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:ot.Class.UNIVERSAL,type:ot.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ot.Class.UNIVERSAL,type:ot.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:ot.Class.UNIVERSAL,type:ot.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};pc.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:ot.Class.UNIVERSAL,type:ot.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:ot.Class.UNIVERSAL,type:ot.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ot.Class.UNIVERSAL,type:ot.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:ot.Class.UNIVERSAL,type:ot.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var ed=K((DS,Zh)=>{var ft=me();Ni();Ot();dc();Le();var Gh=Vh(),JC=Gh.publicKeyValidator,XC=Gh.privateKeyValidator;typeof Kh=="undefined"&&(Kh=ft.jsbn.BigInteger);var Kh,gc=ft.util.ByteBuffer,At=typeof Buffer=="undefined"?Uint8Array:Buffer;ft.pki=ft.pki||{};Zh.exports=ft.pki.ed25519=ft.ed25519=ft.ed25519||{};var _e=ft.ed25519;_e.constants={};_e.constants.PUBLIC_KEY_BYTE_LENGTH=32;_e.constants.PRIVATE_KEY_BYTE_LENGTH=64;_e.constants.SEED_BYTE_LENGTH=32;_e.constants.SIGN_BYTE_LENGTH=64;_e.constants.HASH_BYTE_LENGTH=64;_e.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=ft.random.getBytesSync(_e.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==_e.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+_e.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Er({message:t,encoding:"binary"});for(var n=new At(_e.constants.PUBLIC_KEY_BYTE_LENGTH),r=new At(_e.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=t[i];return rE(n,r),{publicKey:n,privateKey:r}};_e.privateKeyFromAsn1=function(e){var t={},n=[],r=ft.asn1.validate(e,XC,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var a=ft.asn1.derToOid(t.privateKeyOid),s=ft.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.privateKey,c=Er({message:ft.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:c}};_e.publicKeyFromAsn1=function(e){var t={},n=[],r=ft.asn1.validate(e,JC,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var a=ft.asn1.derToOid(t.publicKeyOid),s=ft.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.ed25519PublicKey;if(o.length!==_e.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Er({message:o,encoding:"binary"})};_e.publicKeyFromPrivateKey=function(e){e=e||{};var t=Er({message:e.privateKey,encoding:"binary"});if(t.length!==_e.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+_e.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new At(_e.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=t[32+r];return n};_e.sign=function(e){e=e||{};var t=Er(e),n=Er({message:e.privateKey,encoding:"binary"});if(n.length===_e.constants.SEED_BYTE_LENGTH){var r=_e.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==_e.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+_e.constants.SEED_BYTE_LENGTH+" or "+_e.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new At(_e.constants.SIGN_BYTE_LENGTH+t.length);nE(i,t,t.length,n);for(var a=new At(_e.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};_e.verify=function(e){e=e||{};var t=Er(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=Er({message:e.signature,encoding:"binary"});if(n.length!==_e.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+_e.constants.SIGN_BYTE_LENGTH);var r=Er({message:e.publicKey,encoding:"binary"});if(r.length!==_e.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+_e.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new At(_e.constants.SIGN_BYTE_LENGTH+t.length),a=new At(_e.constants.SIGN_BYTE_LENGTH+t.length),s;for(s=0;s<_e.constants.SIGN_BYTE_LENGTH;++s)i[s]=n[s];for(s=0;s<t.length;++s)i[s+_e.constants.SIGN_BYTE_LENGTH]=t[s];return iE(a,i,i.length,r)>=0};function Er(e){var t=e.message;if(t instanceof Uint8Array||t instanceof At)return t;var n=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer!="undefined")return Buffer.from(t,n);t=new gc(t,n)}else if(!(t instanceof gc))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new At(t.length()),i=0;i<r.length;++i)r[i]=t.at(i);return r}var yc=he(),us=he([1]),ZC=he([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),eE=he([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),jh=he([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Hh=he([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),vc=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),tE=he([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Pi(e,t){var n=ft.md.sha512.create(),r=new gc(e);n.update(r.getBytes(t),"binary");var i=n.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new At(_e.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function rE(e,t){var n=[he(),he(),he(),he()],r,i=Pi(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Tc(n,i),Ec(e,n),r=0;r<32;++r)t[r+32]=e[r];return 0}function nE(e,t,n,r){var i,a,s=new Float64Array(64),o=[he(),he(),he(),he()],c=Pi(r,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=n+64;for(i=0;i<n;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=c[32+i];var l=Pi(e.subarray(32),n+32);for(mc(l),Tc(o,l),Ec(e,o),i=32;i<64;++i)e[i]=r[i];var f=Pi(e,n+64);for(mc(f),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=l[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=f[i]*c[a];return $h(e.subarray(32),s),u}function iE(e,t,n,r){var i,a,s=new At(32),o=[he(),he(),he(),he()],c=[he(),he(),he(),he()];if(a=-1,n<64||aE(c,r))return-1;for(i=0;i<n;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=r[i];var u=Pi(e,n);if(mc(u),Jh(o,c,u),Tc(c,t.subarray(32)),Cc(o,c),Ec(s,o),n-=64,Yh(t,0,s,0)){for(i=0;i<n;++i)e[i]=0;return-1}for(i=0;i<n;++i)e[i]=t[i+64];return a=n,a}function $h(e,t){var n,r,i,a;for(r=63;r>=32;--r){for(n=0,i=r-32,a=r-12;i<a;++i)t[i]+=n-16*t[r]*vc[i-(r-32)],n=t[i]+128>>8,t[i]-=n*256;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;++i)t[i]+=n-(t[31]>>4)*vc[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=n*vc[i];for(r=0;r<32;++r)t[r+1]+=t[r]>>8,e[r]=t[r]&255}function mc(e){for(var t=new Float64Array(64),n=0;n<64;++n)t[n]=e[n],e[n]=0;$h(e,t)}function Cc(e,t){var n=he(),r=he(),i=he(),a=he(),s=he(),o=he(),c=he(),u=he(),l=he();Kn(n,e[1],e[0]),Kn(l,t[1],t[0]),Ve(n,n,l),Gn(r,e[0],e[1]),Gn(l,t[0],t[1]),Ve(r,r,l),Ve(i,e[3],t[3]),Ve(i,i,eE),Ve(a,e[2],t[2]),Gn(a,a,a),Kn(s,r,n),Kn(o,a,i),Gn(c,a,i),Gn(u,r,n),Ve(e[0],s,o),Ve(e[1],u,c),Ve(e[2],c,o),Ve(e[3],s,u)}function zh(e,t,n){for(var r=0;r<4;++r)Xh(e[r],t[r],n)}function Ec(e,t){var n=he(),r=he(),i=he();uE(i,t[2]),Ve(n,t[0],i),Ve(r,t[1],i),ls(e,r),e[31]^=Qh(n)<<7}function ls(e,t){var n,r,i,a=he(),s=he();for(n=0;n<16;++n)s[n]=t[n];for(_c(s),_c(s),_c(s),r=0;r<2;++r){for(a[0]=s[0]-65517,n=1;n<15;++n)a[n]=s[n]-65535-(a[n-1]>>16&1),a[n-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,Xh(s,a,1-i)}for(n=0;n<16;n++)e[2*n]=s[n]&255,e[2*n+1]=s[n]>>8}function aE(e,t){var n=he(),r=he(),i=he(),a=he(),s=he(),o=he(),c=he();return Mr(e[2],us),sE(e[1],t),sn(i,e[1]),Ve(a,i,ZC),Kn(i,i,e[2]),Gn(a,e[2],a),sn(s,a),sn(o,s),Ve(c,o,s),Ve(n,c,i),Ve(n,n,a),oE(n,n),Ve(n,n,i),Ve(n,n,a),Ve(n,n,a),Ve(e[0],n,a),sn(r,e[0]),Ve(r,r,a),Wh(r,i)&&Ve(e[0],e[0],tE),sn(r,e[0]),Ve(r,r,a),Wh(r,i)?-1:(Qh(e[0])===t[31]>>7&&Kn(e[0],yc,e[0]),Ve(e[3],e[0],e[1]),0)}function sE(e,t){var n;for(n=0;n<16;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function oE(e,t){var n=he(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=250;r>=0;--r)sn(n,n),r!==1&&Ve(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function Wh(e,t){var n=new At(32),r=new At(32);return ls(n,e),ls(r,t),Yh(n,0,r,0)}function Yh(e,t,n,r){return cE(e,t,n,r,32)}function cE(e,t,n,r,i){var a,s=0;for(a=0;a<i;++a)s|=e[t+a]^n[r+a];return(1&s-1>>>8)-1}function Qh(e){var t=new At(32);return ls(t,e),t[0]&1}function Jh(e,t,n){var r,i;for(Mr(e[0],yc),Mr(e[1],us),Mr(e[2],us),Mr(e[3],yc),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,zh(e,t,r),Cc(t,e),Cc(e,e),zh(e,t,r)}function Tc(e,t){var n=[he(),he(),he(),he()];Mr(n[0],jh),Mr(n[1],Hh),Mr(n[2],us),Ve(n[3],jh,Hh),Jh(e,n,t)}function Mr(e,t){var n;for(n=0;n<16;n++)e[n]=t[n]|0}function uE(e,t){var n=he(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=253;r>=0;--r)sn(n,n),r!==2&&r!==4&&Ve(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function _c(e){var t,n,r=1;for(t=0;t<16;++t)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-r*65536;e[0]+=r-1+37*(r-1)}function Xh(e,t,n){for(var r,i=~(n-1),a=0;a<16;++a)r=i&(e[a]^t[a]),e[a]^=r,t[a]^=r}function he(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;++t)n[t]=e[t];return n}function Gn(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]+n[r]}function Kn(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]-n[r]}function sn(e,t){Ve(e,t,t)}function Ve(e,t,n){var r,i,a=0,s=0,o=0,c=0,u=0,l=0,f=0,h=0,v=0,g=0,C=0,T=0,_=0,U=0,B=0,G=0,M=0,q=0,J=0,re=0,j=0,le=0,ae=0,ue=0,ke=0,Be=0,fe=0,Ce=0,X=0,ye=0,qe=0,ve=n[0],Se=n[1],Ae=n[2],H=n[3],de=n[4],$e=n[5],tt=n[6],Fe=n[7],Ge=n[8],m=n[9],E=n[10],x=n[11],R=n[12],b=n[13],N=n[14],O=n[15];r=t[0],a+=r*ve,s+=r*Se,o+=r*Ae,c+=r*H,u+=r*de,l+=r*$e,f+=r*tt,h+=r*Fe,v+=r*Ge,g+=r*m,C+=r*E,T+=r*x,_+=r*R,U+=r*b,B+=r*N,G+=r*O,r=t[1],s+=r*ve,o+=r*Se,c+=r*Ae,u+=r*H,l+=r*de,f+=r*$e,h+=r*tt,v+=r*Fe,g+=r*Ge,C+=r*m,T+=r*E,_+=r*x,U+=r*R,B+=r*b,G+=r*N,M+=r*O,r=t[2],o+=r*ve,c+=r*Se,u+=r*Ae,l+=r*H,f+=r*de,h+=r*$e,v+=r*tt,g+=r*Fe,C+=r*Ge,T+=r*m,_+=r*E,U+=r*x,B+=r*R,G+=r*b,M+=r*N,q+=r*O,r=t[3],c+=r*ve,u+=r*Se,l+=r*Ae,f+=r*H,h+=r*de,v+=r*$e,g+=r*tt,C+=r*Fe,T+=r*Ge,_+=r*m,U+=r*E,B+=r*x,G+=r*R,M+=r*b,q+=r*N,J+=r*O,r=t[4],u+=r*ve,l+=r*Se,f+=r*Ae,h+=r*H,v+=r*de,g+=r*$e,C+=r*tt,T+=r*Fe,_+=r*Ge,U+=r*m,B+=r*E,G+=r*x,M+=r*R,q+=r*b,J+=r*N,re+=r*O,r=t[5],l+=r*ve,f+=r*Se,h+=r*Ae,v+=r*H,g+=r*de,C+=r*$e,T+=r*tt,_+=r*Fe,U+=r*Ge,B+=r*m,G+=r*E,M+=r*x,q+=r*R,J+=r*b,re+=r*N,j+=r*O,r=t[6],f+=r*ve,h+=r*Se,v+=r*Ae,g+=r*H,C+=r*de,T+=r*$e,_+=r*tt,U+=r*Fe,B+=r*Ge,G+=r*m,M+=r*E,q+=r*x,J+=r*R,re+=r*b,j+=r*N,le+=r*O,r=t[7],h+=r*ve,v+=r*Se,g+=r*Ae,C+=r*H,T+=r*de,_+=r*$e,U+=r*tt,B+=r*Fe,G+=r*Ge,M+=r*m,q+=r*E,J+=r*x,re+=r*R,j+=r*b,le+=r*N,ae+=r*O,r=t[8],v+=r*ve,g+=r*Se,C+=r*Ae,T+=r*H,_+=r*de,U+=r*$e,B+=r*tt,G+=r*Fe,M+=r*Ge,q+=r*m,J+=r*E,re+=r*x,j+=r*R,le+=r*b,ae+=r*N,ue+=r*O,r=t[9],g+=r*ve,C+=r*Se,T+=r*Ae,_+=r*H,U+=r*de,B+=r*$e,G+=r*tt,M+=r*Fe,q+=r*Ge,J+=r*m,re+=r*E,j+=r*x,le+=r*R,ae+=r*b,ue+=r*N,ke+=r*O,r=t[10],C+=r*ve,T+=r*Se,_+=r*Ae,U+=r*H,B+=r*de,G+=r*$e,M+=r*tt,q+=r*Fe,J+=r*Ge,re+=r*m,j+=r*E,le+=r*x,ae+=r*R,ue+=r*b,ke+=r*N,Be+=r*O,r=t[11],T+=r*ve,_+=r*Se,U+=r*Ae,B+=r*H,G+=r*de,M+=r*$e,q+=r*tt,J+=r*Fe,re+=r*Ge,j+=r*m,le+=r*E,ae+=r*x,ue+=r*R,ke+=r*b,Be+=r*N,fe+=r*O,r=t[12],_+=r*ve,U+=r*Se,B+=r*Ae,G+=r*H,M+=r*de,q+=r*$e,J+=r*tt,re+=r*Fe,j+=r*Ge,le+=r*m,ae+=r*E,ue+=r*x,ke+=r*R,Be+=r*b,fe+=r*N,Ce+=r*O,r=t[13],U+=r*ve,B+=r*Se,G+=r*Ae,M+=r*H,q+=r*de,J+=r*$e,re+=r*tt,j+=r*Fe,le+=r*Ge,ae+=r*m,ue+=r*E,ke+=r*x,Be+=r*R,fe+=r*b,Ce+=r*N,X+=r*O,r=t[14],B+=r*ve,G+=r*Se,M+=r*Ae,q+=r*H,J+=r*de,re+=r*$e,j+=r*tt,le+=r*Fe,ae+=r*Ge,ue+=r*m,ke+=r*E,Be+=r*x,fe+=r*R,Ce+=r*b,X+=r*N,ye+=r*O,r=t[15],G+=r*ve,M+=r*Se,q+=r*Ae,J+=r*H,re+=r*de,j+=r*$e,le+=r*tt,ae+=r*Fe,ue+=r*Ge,ke+=r*m,Be+=r*E,fe+=r*x,Ce+=r*R,X+=r*b,ye+=r*N,qe+=r*O,a+=38*M,s+=38*q,o+=38*J,c+=38*re,u+=38*j,l+=38*le,f+=38*ae,h+=38*ue,v+=38*ke,g+=38*Be,C+=38*fe,T+=38*Ce,_+=38*X,U+=38*ye,B+=38*qe,i=1,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=f+i+65535,i=Math.floor(r/65536),f=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=C+i+65535,i=Math.floor(r/65536),C=r-i*65536,r=T+i+65535,i=Math.floor(r/65536),T=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=U+i+65535,i=Math.floor(r/65536),U=r-i*65536,r=B+i+65535,i=Math.floor(r/65536),B=r-i*65536,r=G+i+65535,i=Math.floor(r/65536),G=r-i*65536,a+=i-1+37*(i-1),i=1,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=f+i+65535,i=Math.floor(r/65536),f=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=C+i+65535,i=Math.floor(r/65536),C=r-i*65536,r=T+i+65535,i=Math.floor(r/65536),T=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=U+i+65535,i=Math.floor(r/65536),U=r-i*65536,r=B+i+65535,i=Math.floor(r/65536),B=r-i*65536,r=G+i+65535,i=Math.floor(r/65536),G=r-i*65536,a+=i-1+37*(i-1),e[0]=a,e[1]=s,e[2]=o,e[3]=c,e[4]=u,e[5]=l,e[6]=f,e[7]=h,e[8]=v,e[9]=g,e[10]=C,e[11]=T,e[12]=_,e[13]=U,e[14]=B,e[15]=G}});var id=K((OS,nd)=>{var kt=me();Le();Ot();Ni();nd.exports=kt.kem=kt.kem||{};var td=kt.jsbn.BigInteger;kt.kem.rsa={};kt.kem.rsa.create=function(e,t){t=t||{};var n=t.prng||kt.random,r={};return r.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),o;do o=new td(kt.util.bytesToHex(n.getBytesSync(s)),16).mod(i.n);while(o.compareTo(td.ONE)<=0);o=kt.util.hexToBytes(o.toString(16));var c=s-o.length;c>0&&(o=kt.util.fillString(String.fromCharCode(0),c)+o);var u=i.encrypt(o,"NONE"),l=e.generate(o,a);return{encapsulation:u,key:l}},r.decrypt=function(i,a,s){var o=i.decrypt(a,"NONE");return e.generate(o,s)},r};kt.kem.kdf1=function(e,t){rd(this,e,0,t||e.digestLength)};kt.kem.kdf2=function(e,t){rd(this,e,1,t||e.digestLength)};function rd(e,t,n,r){e.generate=function(i,a){for(var s=new kt.util.ByteBuffer,o=Math.ceil(a/r)+n,c=new kt.util.ByteBuffer,u=n;u<o;++u){c.putInt32(u),t.start(),t.update(i+c.getBytes());var l=t.digest();s.putBytes(l.getBytes(r))}return s.truncate(s.length()-a),s.getBytes()}}});var cd=K((PS,od)=>{var xe=me();Le();od.exports=xe.log=xe.log||{};xe.log.levels=["none","error","warning","info","debug","verbose","max"];var fs={},xc=[],Ui=null;xe.log.LEVEL_LOCKED=1<<1;xe.log.NO_LEVEL_CHECK=1<<2;xe.log.INTERPOLATE=1<<3;for(hr=0;hr<xe.log.levels.length;++hr)Sc=xe.log.levels[hr],fs[Sc]={index:hr,name:Sc.toUpperCase()};var Sc,hr;xe.log.logMessage=function(e){for(var t=fs[e.level].index,n=0;n<xc.length;++n){var r=xc[n];if(r.flags&xe.log.NO_LEVEL_CHECK)r.f(e);else{var i=fs[r.level].index;t<=i&&r.f(r,e)}}};xe.log.prepareStandard=function(e){"standard"in e||(e.standard=fs[e.level].name+" ["+e.category+"] "+e.message)};xe.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=xe.util.format.apply(this,t)}};xe.log.prepareStandardFull=function(e){"standardFull"in e||(xe.log.prepareStandard(e),e.standardFull=e.standard)};for(Ac=["error","warning","info","debug","verbose"],hr=0;hr<Ac.length;++hr)(function(t){xe.log[t]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:n,message:r,arguments:i};xe.log.logMessage(a)}})(Ac[hr]);var Ac,hr;xe.log.makeLogger=function(e){var t={flags:0,f:e};return xe.log.setLevel(t,"none"),t};xe.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&xe.log.LEVEL_LOCKED))for(var r=0;r<xe.log.levels.length;++r){var i=xe.log.levels[r];if(t==i){e.level=t,n=!0;break}}return n};xe.log.lock=function(e,t){typeof t=="undefined"||t?e.flags|=xe.log.LEVEL_LOCKED:e.flags&=~xe.log.LEVEL_LOCKED};xe.log.addLogger=function(e){xc.push(e)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(ad={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Fi=function(e,t){xe.log.prepareStandard(t);var n=ad[t.level],r=[t.standard];r=r.concat(t.arguments.slice()),n.apply(console,r)},jn=xe.log.makeLogger(Fi)):(Fi=function(t,n){xe.log.prepareStandardFull(n),console.log(n.standardFull)},jn=xe.log.makeLogger(Fi)),xe.log.setLevel(jn,"debug"),xe.log.addLogger(jn),Ui=jn):console={log:function(){}};var jn,ad,Fi;Ui!==null&&typeof window!="undefined"&&window.location&&(qi=new URL(window.location.href).searchParams,qi.has("console.level")&&xe.log.setLevel(Ui,qi.get("console.level").slice(-1)[0]),qi.has("console.lock")&&(sd=qi.get("console.lock").slice(-1)[0],sd=="true"&&xe.log.lock(Ui)));var qi,sd;xe.log.consoleLogger=Ui});var ld=K((US,ud)=>{ud.exports=ir();ja();Un();Fo();dc()});var dd=K((FS,hd)=>{var Z=me();Rr();Ht();ki();Lr();Xr();Xo();Ot();Le();is();var A=Z.asn1,Et=hd.exports=Z.pkcs7=Z.pkcs7||{};Et.messageFromPem=function(e){var t=Z.pem.decode(e)[0];if(t.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=A.fromDer(t.body);return Et.messageFromAsn1(r)};Et.messageToPem=function(e,t){var n={type:"PKCS7",body:A.toDer(e.toAsn1()).getBytes()};return Z.pem.encode(n,{maxline:t})};Et.messageFromAsn1=function(e){var t={},n=[];if(!A.validate(e,Et.asn1.contentInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=A.derToOid(t.contentType),a;switch(i){case Z.pki.oids.envelopedData:a=Et.createEnvelopedData();break;case Z.pki.oids.encryptedData:a=Et.createEncryptedData();break;case Z.pki.oids.signedData:a=Et.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a};Et.createSignedData=function(){var e=null;return e={type:Z.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(r){if(bc(e,r,Et.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,a=0;a<i.length;++a)e.certificates.push(Z.pki.certificateFromAsn1(i[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var r=[],i=0;i<e.certificates.length;++i)r.push(Z.pki.certificateToAsn1(e.certificates[i]));var a=[],s=A.create(A.Class.CONTEXT_SPECIFIC,0,!0,[A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,A.integerToDer(e.version).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return r.length>0&&s.value[0].value.push(A.create(A.Class.CONTEXT_SPECIFIC,0,!0,r)),a.length>0&&s.value[0].value.push(A.create(A.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(A.create(A.Class.UNIVERSAL,A.Type.SET,!0,e.signerInfos)),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(e.type).getBytes()),s])},addSigner:function(r){var i=r.issuer,a=r.serialNumber;if(r.certificate){var s=r.certificate;typeof s=="string"&&(s=Z.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var o=r.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=Z.pki.privateKeyFromPem(o));var c=r.digestAlgorithm||Z.pki.oids.sha1;switch(c){case Z.pki.oids.sha1:case Z.pki.oids.sha256:case Z.pki.oids.sha384:case Z.pki.oids.sha512:case Z.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=r.authenticatedAttributes||[];if(u.length>0){for(var l=!1,f=!1,h=0;h<u.length;++h){var v=u[h];if(!l&&v.type===Z.pki.oids.contentType){if(l=!0,f)break;continue}if(!f&&v.type===Z.pki.oids.messageDigest){if(f=!0,l)break;continue}}if(!l||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:a,digestAlgorithm:c,signatureAlgorithm:Z.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(r){if(r=r||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(Z.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof Z.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=Z.util.encodeUtf8(e.content)),r.detached?e.detachedContent=A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(A.create(A.Class.CONTEXT_SPECIFIC,0,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var a=t();n(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(r){typeof r=="string"&&(r=Z.pki.certificateFromPem(r)),e.certificates.push(r)},addCertificateRevokationList:function(r){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var r={},i=0;i<e.signers.length;++i){var a=e.signers[i],s=a.digestAlgorithm;s in r||(r[s]=Z.md[Z.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=r[s]:a.md=Z.md[Z.pki.oids[s]].create()}e.digestAlgorithmIdentifiers=[];for(var s in r)e.digestAlgorithmIdentifiers.push(A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(s).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")]));return r}function n(r){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=A.derToOid(e.contentInfo.value[0].value),s=A.toDer(i);s.getByte(),A.getBerValueLength(s),s=s.getBytes();for(var o in r)r[o].start().update(s);for(var c=new Date,u=0;u<e.signers.length;++u){var l=e.signers[u];if(l.authenticatedAttributes.length===0){if(a!==Z.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=A.create(A.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=A.create(A.Class.UNIVERSAL,A.Type.SET,!0,[]),h=0;h<l.authenticatedAttributes.length;++h){var v=l.authenticatedAttributes[h];v.type===Z.pki.oids.messageDigest?v.value=r[l.digestAlgorithm].digest():v.type===Z.pki.oids.signingTime&&(v.value||(v.value=c)),f.value.push(wc(v)),l.authenticatedAttributesAsn1.value.push(wc(v))}s=A.toDer(f).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=gE(e.signers)}};Et.createEncryptedData=function(){var e=null;return e={type:Z.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Z.pki.oids["aes256-CBC"]},fromAsn1:function(t){bc(e,t,Et.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),fd(e)}},e};Et.createEnvelopedData=function(){var e=null;return e={type:Z.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Z.pki.oids["aes256-CBC"]},fromAsn1:function(t){var n=bc(e,t,Et.asn1.envelopedDataValidator);e.recipients=hE(n.recipientInfos.value)},toAsn1:function(){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(e.type).getBytes()),A.create(A.Class.CONTEXT_SPECIFIC,0,!0,[A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,A.integerToDer(e.version).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SET,!0,dE(e.recipients)),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,yE(e.encryptedContent))])])])},findRecipient:function(t){for(var n=t.issuer.attributes,r=0;r<e.recipients.length;++r){var i=e.recipients[r],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===n.length){for(var s=!0,o=0;o<n.length;++o)if(a[o].type!==n[o].type||a[o].value!==n[o].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,n){if(e.encryptedContent.key===void 0&&t!==void 0&&n!==void 0)switch(t.encryptedContent.algorithm){case Z.pki.oids.rsaEncryption:case Z.pki.oids.desCBC:var r=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=Z.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}fd(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:Z.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(e.encryptedContent.content===void 0){n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var r,i,a;switch(n){case Z.pki.oids["aes128-CBC"]:r=16,i=16,a=Z.aes.createEncryptionCipher;break;case Z.pki.oids["aes192-CBC"]:r=24,i=16,a=Z.aes.createEncryptionCipher;break;case Z.pki.oids["aes256-CBC"]:r=32,i=16,a=Z.aes.createEncryptionCipher;break;case Z.pki.oids["des-EDE3-CBC"]:r=24,i=8,a=Z.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(t===void 0)t=Z.util.createBuffer(Z.random.getBytes(r));else if(t.length()!=r)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+r+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=Z.util.createBuffer(Z.random.getBytes(i));var s=a(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var o=0;o<e.recipients.length;++o){var c=e.recipients[o];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Z.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e};function lE(e){var t={},n=[];if(!A.validate(e,Et.asn1.recipientInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:t.version.charCodeAt(0),issuer:Z.pki.RDNAttributesAsArray(t.issuer),serialNumber:Z.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:A.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function fE(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,A.integerToDer(e.version).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[Z.pki.distinguishedNameToAsn1({attributes:e.issuer}),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,Z.util.hexToBytes(e.serialNumber))]),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(e.encryptedContent.algorithm).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")]),A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function hE(e){for(var t=[],n=0;n<e.length;++n)t.push(lE(e[n]));return t}function dE(e){for(var t=[],n=0;n<e.length;++n)t.push(fE(e[n]));return t}function pE(e){var t=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,A.integerToDer(e.version).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[Z.pki.distinguishedNameToAsn1({attributes:e.issuer}),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,Z.util.hexToBytes(e.serialNumber))]),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(e.digestAlgorithm).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(e.signatureAlgorithm).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")])),t.value.push(A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=A.create(A.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<e.unauthenticatedAttributes.length;++r){var i=e.unauthenticatedAttributes[r];n.values.push(wc(i))}t.value.push(n)}return t}function gE(e){for(var t=[],n=0;n<e.length;++n)t.push(pE(e[n]));return t}function wc(e){var t;if(e.type===Z.pki.oids.contentType)t=A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(e.value).getBytes());else if(e.type===Z.pki.oids.messageDigest)t=A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===Z.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=A.utcTimeToDate(i):i=A.generalizedTimeToDate(i):i=new Date(a)}i>=n&&i<r?t=A.create(A.Class.UNIVERSAL,A.Type.UTCTIME,!1,A.dateToUtcTime(i)):t=A.create(A.Class.UNIVERSAL,A.Type.GENERALIZEDTIME,!1,A.dateToGeneralizedTime(i))}return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(e.type).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SET,!0,[t])])}function yE(e){return[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(Z.pki.oids.data).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(e.algorithm).getBytes()),e.parameter?A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),A.create(A.Class.CONTEXT_SPECIFIC,0,!0,[A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,e.content.getBytes())])]}function bc(e,t,n){var r={},i=[];if(!A.validate(t,n,r,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=A.derToOid(r.contentType);if(s!==Z.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var o="";if(Z.util.isArray(r.encryptedContent))for(var c=0;c<r.encryptedContent.length;++c){if(r.encryptedContent[c].type!==A.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=r.encryptedContent[c].value}else o=r.encryptedContent;e.encryptedContent={algorithm:A.derToOid(r.encAlgorithm),parameter:Z.util.createBuffer(r.encParameter.value),content:Z.util.createBuffer(o)}}if(r.content){var o="";if(Z.util.isArray(r.content))for(var c=0;c<r.content.length;++c){if(r.content[c].type!==A.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=r.content[c].value}else o=r.content;e.content=Z.util.createBuffer(o)}return e.version=r.version.charCodeAt(0),e.rawCapture=r,r}function fd(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case Z.pki.oids["aes128-CBC"]:case Z.pki.oids["aes192-CBC"]:case Z.pki.oids["aes256-CBC"]:t=Z.aes.createDecryptionCipher(e.encryptedContent.key);break;case Z.pki.oids.desCBC:case Z.pki.oids["des-EDE3-CBC"]:t=Z.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var gd=K((qS,pd)=>{var rt=me();Rr();Ln();ja();Un();Le();var hs=pd.exports=rt.ssh=rt.ssh||{};hs.privateKeyToPutty=function(e,t,n){n=n||"",t=t||"";var r="ssh-rsa",i=t===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+r+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+n+`\r
`;var s=rt.util.createBuffer();Hn(s,r),dr(s,e.e),dr(s,e.n);var o=rt.util.encode64(s.bytes(),64),c=Math.floor(o.length/66)+1;a+="Public-Lines: "+c+`\r
`,a+=o;var u=rt.util.createBuffer();dr(u,e.d),dr(u,e.p),dr(u,e.q),dr(u,e.qInv);var l;if(!t)l=rt.util.encode64(u.bytes(),64);else{var f=u.length()+16-1;f-=f%16;var h=ds(u.bytes());h.truncate(h.length()-f+u.length()),u.putBuffer(h);var v=rt.util.createBuffer();v.putBuffer(ds("\0\0\0\0",t)),v.putBuffer(ds("\0\0\0",t));var g=rt.aes.createEncryptionCipher(v.truncate(8),"CBC");g.start(rt.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var C=g.output;C.truncate(16),l=rt.util.encode64(C.bytes(),64)}c=Math.floor(l.length/66)+1,a+=`\r
Private-Lines: `+c+`\r
`,a+=l;var T=ds("putty-private-key-file-mac-key",t),_=rt.util.createBuffer();Hn(_,r),Hn(_,i),Hn(_,n),_.putInt32(s.length()),_.putBuffer(s),_.putInt32(u.length()),_.putBuffer(u);var U=rt.hmac.create();return U.start("sha1",T),U.update(_.bytes()),a+=`\r
Private-MAC: `+U.digest().toHex()+`\r
`,a};hs.publicKeyToOpenSSH=function(e,t){var n="ssh-rsa";t=t||"";var r=rt.util.createBuffer();return Hn(r,n),dr(r,e.e),dr(r,e.n),n+" "+rt.util.encode64(r.bytes())+" "+t};hs.privateKeyToOpenSSH=function(e,t){return t?rt.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):rt.pki.privateKeyToPem(e)};hs.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||rt.md.md5.create(),r="ssh-rsa",i=rt.util.createBuffer();Hn(i,r),dr(i,e.e),dr(i,e.n),n.start(),n.update(i.getBytes());var a=n.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};function dr(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var r=rt.util.hexToBytes(n);e.putInt32(r.length),e.putBytes(r)}function Hn(e,t){e.putInt32(t.length),e.putString(t)}function ds(){for(var e=rt.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}});var vd=K((MS,yd)=>{yd.exports=me();Rr();Ph();Ht();Ua();ki();ed();Ln();id();cd();ld();Zo();Wa();Xr();zo();rc();dd();ic();Yo();qo();ts();Ot();Go();gd();lc();Le()});var Cd=K(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.getPem=void 0;var vE=require("fs"),ps=vd(),mE=require("util"),CE=mE.promisify(vE.readFile);function EE(e,t){if(t)md(e).then(n=>t(null,n)).catch(n=>t(n,null));else return md(e)}gs.getPem=EE;function md(e){return CE(e,{encoding:"base64"}).then(t=>TE(t))}function TE(e){let t=ps.util.decode64(e),n=ps.asn1.fromDer(t),i=ps.pkcs12.pkcs12FromAsn1(n,"notasecret").getBags({friendlyName:"privatekey"});if(i.friendlyName){let a=i.friendlyName[0].key;return ps.pki.privateKeyToPem(a).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}});var Ad=K(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.GoogleToken=void 0;var Ed=require("fs"),Td=fa(),_E=So(),xE=require("path"),SE=require("util"),_d=Ed.readFile?SE.promisify(Ed.readFile):()=>I(Vi,null,function*(){throw new Mi("use key rather than keyFile.","MISSING_CREDENTIALS")}),xd="https://www.googleapis.com/oauth2/v4/token",AE="https://accounts.google.com/o/oauth2/revoke?token=",Mi=class extends Error{constructor(t,n){super(t);this.code=n}},Ic,Sd=class{constructor(t){this.configure(t)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){let t=new Date().getTime();return this.rawToken&&this.expiresAt?t>=this.expiresAt:!0}isTokenExpiring(){var t;let n=new Date().getTime(),r=(t=this.eagerRefreshThresholdMillis)!==null&&t!==void 0?t:0;return this.rawToken&&this.expiresAt?this.expiresAt<=n+r:!0}getToken(t,n={}){if(typeof t=="object"&&(n=t,t=void 0),n=Object.assign({forceRefresh:!1},n),t){let r=t;this.getTokenAsync(n).then(i=>r(null,i),t);return}return this.getTokenAsync(n)}getCredentials(t){return I(this,null,function*(){switch(xE.extname(t)){case".json":{let r=yield _d(t,"utf8"),i=JSON.parse(r),a=i.private_key,s=i.client_email;if(!a||!s)throw new Mi("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:a,clientEmail:s}}case".der":case".crt":case".pem":return{privateKey:yield _d(t,"utf8")};case".p12":case".pfx":return Ic||(Ic=(yield Promise.resolve().then(()=>Cd())).getPem),{privateKey:yield Ic(t)};default:throw new Mi("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}})}getTokenAsync(t){return I(this,null,function*(){if(this.inFlightRequest&&!t.forceRefresh)return this.inFlightRequest;try{return yield this.inFlightRequest=this.getTokenAsyncInner(t)}finally{this.inFlightRequest=void 0}})}getTokenAsyncInner(t){return I(this,null,function*(){if(this.isTokenExpiring()===!1&&t.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){let n=yield this.getCredentials(this.keyFile);this.key=n.privateKey,this.iss=n.clientEmail||this.iss,n.clientEmail||this.ensureEmail()}return this.requestToken()})}ensureEmail(){if(!this.iss)throw new Mi("email is required.","MISSING_CREDENTIALS")}revokeToken(t){if(t){this.revokeTokenAsync().then(()=>t(),t);return}return this.revokeTokenAsync()}revokeTokenAsync(){return I(this,null,function*(){if(!this.accessToken)throw new Error("No token to revoke.");let t=AE+this.accessToken;yield Td.request({url:t}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})})}configure(t={}){this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,typeof t.scope=="object"?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis}requestToken(){return I(this,null,function*(){let t=Math.floor(new Date().getTime()/1e3),n=this.additionalClaims||{},r=Object.assign({iss:this.iss,scope:this.scope,aud:xd,exp:t+3600,iat:t,sub:this.sub},n),i=_E.sign({header:{alg:"RS256"},payload:r,secret:this.key});try{let a=yield Td.request({method:"POST",url:xd,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(t+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;let s=a.response&&a.response.data?a.response.data:{};if(s.error){let o=s.error_description?`: ${s.error_description}`:"";a.message=`${s.error}${o}`}throw a}})}};Vi.GoogleToken=Sd});var bd=K((KS,wd)=>{"use strict";wd.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var kd=K((jS,Id)=>{"use strict";Id.exports=Pe;Pe.Node=on;Pe.create=Pe;function Pe(e){var t=this;if(t instanceof Pe||(t=new Pe),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Pe.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Pe.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Pe.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Pe.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)bE(this,arguments[e]);return this.length};Pe.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)IE(this,arguments[e]);return this.length};Pe.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Pe.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Pe.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Pe.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Pe.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Pe.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Pe.prototype.map=function(e,t){t=t||this;for(var n=new Pe,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Pe.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Pe,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Pe.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Pe.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Pe.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Pe.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Pe.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Pe;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Pe.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Pe;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Pe.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var a=[],r=0;i&&r<t;r++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=wE(this,i,n[r]);return a};Pe.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function wE(e,t,n){var r=t===e.head?new on(n,null,t,e):new on(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function bE(e,t){e.tail=new on(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function IE(e,t){e.head=new on(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function on(e,t,n,r){if(!(this instanceof on))return new on(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{bd()(Pe)}catch(e){}});var Pd=K((HS,Od)=>{"use strict";var kE=kd(),cn=Symbol("max"),Tr=Symbol("length"),$n=Symbol("lengthCalculator"),Gi=Symbol("allowStale"),un=Symbol("maxAge"),_r=Symbol("dispose"),Bd=Symbol("noDisposeOnSet"),ct=Symbol("lruList"),zt=Symbol("cache"),Nd=Symbol("updateAgeOnGet"),kc=()=>1,Rd=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let n=this[cn]=t.max||1/0,r=t.length||kc;if(this[$n]=typeof r!="function"?kc:r,this[Gi]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[un]=t.maxAge||0,this[_r]=t.dispose,this[Bd]=t.noDisposeOnSet||!1,this[Nd]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[cn]=t||1/0,Ki(this)}get max(){return this[cn]}set allowStale(t){this[Gi]=!!t}get allowStale(){return this[Gi]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[un]=t,Ki(this)}get maxAge(){return this[un]}set lengthCalculator(t){typeof t!="function"&&(t=kc),t!==this[$n]&&(this[$n]=t,this[Tr]=0,this[ct].forEach(n=>{n.length=this[$n](n.value,n.key),this[Tr]+=n.length})),Ki(this)}get lengthCalculator(){return this[$n]}get length(){return this[Tr]}get itemCount(){return this[ct].length}rforEach(t,n){n=n||this;for(let r=this[ct].tail;r!==null;){let i=r.prev;Dd(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[ct].head;r!==null;){let i=r.next;Dd(this,t,r,n),r=i}}keys(){return this[ct].toArray().map(t=>t.key)}values(){return this[ct].toArray().map(t=>t.value)}reset(){this[_r]&&this[ct]&&this[ct].length&&this[ct].forEach(t=>this[_r](t.key,t.value)),this[zt]=new Map,this[ct]=new kE,this[Tr]=0}dump(){return this[ct].map(t=>ys(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ct]}set(t,n,r){if(r=r||this[un],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let i=r?Date.now():0,a=this[$n](n,t);if(this[zt].has(t)){if(a>this[cn])return zn(this,this[zt].get(t)),!1;let c=this[zt].get(t).value;return this[_r]&&(this[Bd]||this[_r](t,c.value)),c.now=i,c.maxAge=r,c.value=n,this[Tr]+=a-c.length,c.length=a,this.get(t),Ki(this),!0}let s=new Ld(t,n,a,i,r);return s.length>this[cn]?(this[_r]&&this[_r](t,n),!1):(this[Tr]+=s.length,this[ct].unshift(s),this[zt].set(t,this[ct].head),Ki(this),!0)}has(t){if(!this[zt].has(t))return!1;let n=this[zt].get(t).value;return!ys(this,n)}get(t){return Bc(this,t,!0)}peek(t){return Bc(this,t,!1)}pop(){let t=this[ct].tail;return t?(zn(this,t),t.value):null}del(t){zn(this,this[zt].get(t))}load(t){this.reset();let n=Date.now();for(let r=t.length-1;r>=0;r--){let i=t[r],a=i.e||0;if(a===0)this.set(i.k,i.v);else{let s=a-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[zt].forEach((t,n)=>Bc(this,n,!1))}},Bc=(e,t,n)=>{let r=e[zt].get(t);if(r){let i=r.value;if(ys(e,i)){if(zn(e,r),!e[Gi])return}else n&&(e[Nd]&&(r.value.now=Date.now()),e[ct].unshiftNode(r));return i.value}},ys=(e,t)=>{if(!t||!t.maxAge&&!e[un])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[un]&&n>e[un]},Ki=e=>{if(e[Tr]>e[cn])for(let t=e[ct].tail;e[Tr]>e[cn]&&t!==null;){let n=t.prev;zn(e,t),t=n}},zn=(e,t)=>{if(t){let n=t.value;e[_r]&&e[_r](n.key,n.value),e[Tr]-=n.length,e[zt].delete(n.key),e[ct].removeNode(t)}},Ld=class{constructor(t,n,r,i,a){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=a||0}},Dd=(e,t,n,r)=>{let i=n.value;ys(e,i)&&(zn(e,n),e[Gi]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};Od.exports=Rd});var Nc=K(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.JWTAccess=void 0;var BE=So(),NE=Pd(),Ud={alg:"RS256",typ:"JWT"},vs=class{constructor(t,n,r,i){this.cache=new NE({max:500,maxAge:60*60*1e3}),this.email=t,this.key=n,this.keyId=r,this.eagerRefreshThresholdMillis=i!=null?i:5*60*1e3}getCachedKey(t,n){let r=t;if(n&&Array.isArray(n)&&n.length?r=t?`${t}_${n.join("_")}`:`${n.join("_")}`:typeof n=="string"&&(r=t?`${t}_${n}`:n),!r)throw Error("Scopes or url must be provided");return r}getRequestHeaders(t,n,r){let i=this.getCachedKey(t,r),a=this.cache.get(i),s=Date.now();if(a&&a.expiration-s>this.eagerRefreshThresholdMillis)return a.headers;let o=Math.floor(Date.now()/1e3),c=vs.getExpirationTime(o),u;if(Array.isArray(r)&&(r=r.join(" ")),r?u={iss:this.email,sub:this.email,scope:r,exp:c,iat:o}:u={iss:this.email,sub:this.email,aud:t,exp:c,iat:o},n){for(let g in u)if(n[g])throw new Error(`The '${g}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let l=this.keyId?Vt(Rt({},Ud),{kid:this.keyId}):Ud,f=Object.assign(u,n),v={Authorization:`Bearer ${BE.sign({header:l,payload:f,secret:this.key})}`};return this.cache.set(i,{expiration:c*1e3,headers:v}),v}static getExpirationTime(t){return t+3600}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!t.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!t.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=t.client_email,this.key=t.private_key,this.keyId=t.private_key_id,this.projectId=t.project_id}fromStream(t,n){if(n)this.fromStreamAsync(t).then(()=>n(),n);else return this.fromStreamAsync(t)}fromStreamAsync(t){return new Promise((n,r)=>{t||r(new Error("Must pass in a stream containing the service account auth settings."));let i="";t.setEncoding("utf8").on("data",a=>i+=a).on("error",r).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),n()}catch(a){r(a)}})})}};ms.JWTAccess=vs});var Rc=K(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.JWT=void 0;var Fd=Ad(),RE=Nc(),LE=Qr(),Cs=class extends LE.OAuth2Client{constructor(t,n,r,i,a,s){let o=t&&typeof t=="object"?t:{email:t,keyFile:n,key:r,keyId:s,scopes:i,subject:a};super({eagerRefreshThresholdMillis:o.eagerRefreshThresholdMillis,forceRefreshOnFailure:o.forceRefreshOnFailure});this.email=o.email,this.keyFile=o.keyFile,this.key=o.key,this.keyId=o.keyId,this.scopes=o.scopes,this.subject=o.subject,this.additionalClaims=o.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(t){return new Cs({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:t,subject:this.subject,additionalClaims:this.additionalClaims})}getRequestMetadataAsync(t){var n=r=>super[r];return I(this,null,function*(){t=this.defaultServicePath?`https://${this.defaultServicePath}/`:t;let i=!this.hasUserScopes()&&t||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&i)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=yield this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new RE.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:t||(a=this.defaultScopes);let s=yield this.access.getRequestHeaders(t!=null?t:void 0,this.additionalClaims,this.useJWTAccessWithScope?a:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?n("getRequestMetadataAsync").call(this,t):{headers:{}}})}fetchIdToken(t){return I(this,null,function*(){let n=new Fd.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:t}});if(yield n.getToken({forceRefresh:!0}),!n.idToken)throw new Error("Unknown error: Failed to fetch ID token");return n.idToken})}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(t){if(t)this.authorizeAsync().then(n=>t(null,n),t);else return this.authorizeAsync()}authorizeAsync(){return I(this,null,function*(){let t=yield this.refreshToken();if(!t)throw new Error("No result returned");return this.credentials=t.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,t.tokens})}refreshTokenNoCache(t){return I(this,null,function*(){let n=this.createGToken(),i={access_token:(yield n.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:n.expiresAt,id_token:n.idToken};return this.emit("tokens",i),{res:null,tokens:i}})}createGToken(){return this.gtoken||(this.gtoken=new Fd.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!t.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!t.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=t.client_email,this.key=t.private_key,this.keyId=t.private_key_id,this.projectId=t.project_id,this.quotaProjectId=t.quota_project_id}fromStream(t,n){if(n)this.fromStreamAsync(t).then(()=>n(),n);else return this.fromStreamAsync(t)}fromStreamAsync(t){return new Promise((n,r)=>{if(!t)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";t.setEncoding("utf8").on("error",r).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),n()}catch(a){r(a)}})})}fromAPIKey(t){if(typeof t!="string")throw new Error("Must provide an API Key string.");this.apiKey=t}getCredentials(){return I(this,null,function*(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let n=yield this.createGToken().getCredentials(this.keyFile);return{private_key:n.privateKey,client_email:n.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")})}};Es.JWT=Cs});var Lc=K(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.UserRefreshClient=void 0;var DE=Qr(),qd=class extends DE.OAuth2Client{constructor(t,n,r,i,a){let s=t&&typeof t=="object"?t:{clientId:t,clientSecret:n,refreshToken:r,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:a};super({clientId:s.clientId,clientSecret:s.clientSecret,eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure});this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}refreshTokenNoCache(t){var n=r=>super[r];return I(this,null,function*(){return n("refreshTokenNoCache").call(this,this._refreshToken)})}fromJSON(t){if(!t)throw new Error("Must pass in a JSON object containing the user refresh token");if(t.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!t.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!t.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!t.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=t.client_id,this._clientSecret=t.client_secret,this._refreshToken=t.refresh_token,this.credentials.refresh_token=t.refresh_token,this.quotaProjectId=t.quota_project_id}fromStream(t,n){if(n)this.fromStreamAsync(t).then(()=>n(),n);else return this.fromStreamAsync(t)}fromStreamAsync(t){return I(this,null,function*(){return new Promise((n,r)=>{if(!t)return r(new Error("Must pass in a stream containing the user refresh token."));let i="";t.setEncoding("utf8").on("error",r).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);return this.fromJSON(a),n()}catch(a){return r(a)}})})})}};Ts.UserRefreshClient=qd});var Gd=K(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});Wn.getErrorFromOAuthErrorResponse=Wn.OAuthClientAuthHandler=void 0;var Md=require("querystring"),OE=Sn(),PE=["PUT","POST","PATCH"],Vd=class{constructor(t){this.clientAuthentication=t,this.crypto=OE.createCrypto()}applyClientAuthenticationOptions(t,n){this.injectAuthenticatedHeaders(t,n),n||this.injectAuthenticatedRequestBody(t)}injectAuthenticatedHeaders(t,n){var r;if(n)t.headers=t.headers||{},Object.assign(t.headers,{Authorization:`Bearer ${n}}`});else if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="basic"){t.headers=t.headers||{};let i=this.clientAuthentication.clientId,a=this.clientAuthentication.clientSecret||"",s=this.crypto.encodeBase64StringUtf8(`${i}:${a}`);Object.assign(t.headers,{Authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(t){var n;if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="request-body"){let r=(t.method||"GET").toUpperCase();if(PE.indexOf(r)!==-1){let i,a=t.headers||{};for(let s in a)if(s.toLowerCase()==="content-type"&&a[s]){i=a[s].toLowerCase();break}if(i==="application/x-www-form-urlencoded"){t.data=t.data||"";let s=Md.parse(t.data);Object.assign(s,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),t.data=Md.stringify(s)}else if(i==="application/json")t.data=t.data||{},Object.assign(t.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${r} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}};Wn.OAuthClientAuthHandler=Vd;function UE(e,t){let n=e.error,r=e.error_description,i=e.error_uri,a=`Error code ${n}`;typeof r!="undefined"&&(a+=`: ${r}`),typeof i!="undefined"&&(a+=` - ${i}`);let s=new Error(a);if(t){let o=Object.keys(t);t.stack&&o.push("stack"),o.forEach(c=>{c!=="message"&&Object.defineProperty(s,c,{value:t[c],writable:!1,enumerable:!0})})}return s}Wn.getErrorFromOAuthErrorResponse=UE});var Dc=K(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.StsCredentials=void 0;var FE=require("querystring"),qE=Ci(),Kd=Gd(),jd=class extends Kd.OAuthClientAuthHandler{constructor(t,n){super(n);this.tokenExchangeEndpoint=t,this.transporter=new qE.DefaultTransporter}exchangeToken(t,n,r){return I(this,null,function*(){var i,a,s;let o={grant_type:t.grantType,resource:t.resource,audience:t.audience,scope:(i=t.scope)===null||i===void 0?void 0:i.join(" "),requested_token_type:t.requestedTokenType,subject_token:t.subjectToken,subject_token_type:t.subjectTokenType,actor_token:(a=t.actingParty)===null||a===void 0?void 0:a.actorToken,actor_token_type:(s=t.actingParty)===null||s===void 0?void 0:s.actorTokenType,options:r&&JSON.stringify(r)};Object.keys(o).forEach(l=>{typeof o[l]=="undefined"&&delete o[l]});let c={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(c,n||{});let u={url:this.tokenExchangeEndpoint,method:"POST",headers:c,data:FE.stringify(o),responseType:"json"};this.applyClientAuthenticationOptions(u);try{let l=yield this.transporter.request(u),f=l.data;return f.res=l,f}catch(l){throw l.response?Kd.getErrorFromOAuthErrorResponse(l.response.data,l):l}})}};_s.StsCredentials=jd});var Yn=K(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.BaseExternalAccountClient=wt.CLOUD_RESOURCE_MANAGER=wt.EXTERNAL_ACCOUNT_TYPE=wt.EXPIRATION_TIME_OFFSET=void 0;var ME=require("stream"),VE=Ei(),GE=Dc(),KE="urn:ietf:params:oauth:grant-type:token-exchange",jE="urn:ietf:params:oauth:token-type:access_token",Oc="https://www.googleapis.com/auth/cloud-platform",xs="\\.googleapis\\.com$",Pc="[^\\.\\s\\/\\\\]+";wt.EXPIRATION_TIME_OFFSET=5*60*1e3;wt.EXTERNAL_ACCOUNT_TYPE="external_account";wt.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var HE="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",Hd=class extends VE.AuthClient{constructor(t,n){super();if(t.type!==wt.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${wt.EXTERNAL_ACCOUNT_TYPE}" type but received "${t.type}"`);if(this.clientAuth=t.client_id?{confidentialClientType:"basic",clientId:t.client_id,clientSecret:t.client_secret}:void 0,!this.validateGoogleAPIsUrl("sts",t.token_url))throw new Error(`"${t.token_url}" is not a valid token url.`);this.stsCredential=new GE.StsCredentials(t.token_url,this.clientAuth),this.scopes=[Oc],this.cachedAccessToken=null,this.audience=t.audience,this.subjectTokenType=t.subject_token_type,this.quotaProjectId=t.quota_project_id,this.workforcePoolUserProject=t.workforce_pool_user_project;let r=new RegExp(HE);if(this.workforcePoolUserProject&&!this.audience.match(r))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(typeof t.service_account_impersonation_url!="undefined"&&!this.validateGoogleAPIsUrl("iamcredentials",t.service_account_impersonation_url))throw new Error(`"${t.service_account_impersonation_url}" is not a valid service account impersonation url.`);this.serviceAccountImpersonationUrl=t.service_account_impersonation_url,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=wt.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n==null?void 0:n.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var t;if(this.serviceAccountImpersonationUrl){let r=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((t=r==null?void 0:r.groups)===null||t===void 0?void 0:t.email)||null}return null}setCredentials(t){super.setCredentials(t),this.cachedAccessToken=t}getAccessToken(){return I(this,null,function*(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}})}getRequestHeaders(){return I(this,null,function*(){let n={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(n)})}request(t,n){if(n)this.requestAsync(t).then(r=>n(null,r),r=>n(r,r.response));else return this.requestAsync(t)}getProjectId(){return I(this,null,function*(){let t=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(t){let n=yield this.getRequestHeaders(),r=yield this.transporter.request({headers:n,url:`${wt.CLOUD_RESOURCE_MANAGER}${t}`,responseType:"json"});return this.projectId=r.data.projectId,this.projectId}return null})}requestAsync(t,n=!1){return I(this,null,function*(){let r;try{let i=yield this.getRequestHeaders();t.headers=t.headers||{},i&&i["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(t.headers.Authorization=i.Authorization),r=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,o=a.config.data instanceof ME.Readable;if(!n&&(s===401||s===403)&&!o&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(t,!0)}throw i}return r})}refreshAccessTokenAsync(){return I(this,null,function*(){let t=yield this.retrieveSubjectToken(),n={grantType:KE,audience:this.audience,requestedTokenType:jE,subjectToken:t,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[Oc]:this.getScopesArray()},r=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=yield this.stsCredential.exchangeToken(n,void 0,r);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=yield this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken})}getProjectNumber(t){let n=t.match(/\/projects\/([^/]+)/);return n?n[1]:null}getImpersonatedAccessToken(t){return I(this,null,function*(){let n={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},data:{scope:this.getScopesArray()},responseType:"json"},r=yield this.transporter.request(n),i=r.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:r}})}isExpired(t){let n=new Date().getTime();return t.expiry_date?n>=t.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes=="undefined"?[Oc]:this.scopes}validateGoogleAPIsUrl(t,n){let r;try{r=new URL(n)}catch(s){return!1}let i=r.hostname;if(r.protocol!=="https:")return!1;let a=[new RegExp("^"+Pc+"\\."+t+xs),new RegExp("^"+t+xs),new RegExp("^"+t+"\\."+Pc+xs),new RegExp("^"+Pc+"\\-"+t+xs)];for(let s of a)if(i.match(s))return!0;return!1}};wt.BaseExternalAccountClient=Hd});var Gc=K(Ss=>{"use strict";var Uc,Fc,qc;Object.defineProperty(Ss,"__esModule",{value:!0});Ss.IdentityPoolClient=void 0;var Mc=require("fs"),Vc=require("util"),$E=Yn(),zE=Vc.promisify((Uc=Mc.readFile)!==null&&Uc!==void 0?Uc:()=>{}),WE=Vc.promisify((Fc=Mc.realpath)!==null&&Fc!==void 0?Fc:()=>{}),YE=Vc.promisify((qc=Mc.lstat)!==null&&qc!==void 0?qc:()=>{}),$d=class extends $E.BaseExternalAccountClient{constructor(t,n){var r,i;super(t,n);if(this.file=t.credential_source.file,this.url=t.credential_source.url,this.headers=t.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((r=t.credential_source.format)===null||r===void 0?void 0:r.type)||"text",this.formatSubjectTokenFieldName=(i=t.credential_source.format)===null||i===void 0?void 0:i.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}retrieveSubjectToken(){return I(this,null,function*(){return this.file?yield this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):yield this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)})}getTokenFromFile(t,n,r){return I(this,null,function*(){try{if(t=yield WE(t),!(yield YE(t)).isFile())throw new Error}catch(s){throw s.message=`The file at ${t} does not exist, or it is not a file. ${s.message}`,s}let i,a=yield zE(t,{encoding:"utf8"});if(n==="text"?i=a:n==="json"&&r&&(i=JSON.parse(a)[r]),!i)throw new Error("Unable to parse the subject_token from the credential_source file");return i})}getTokenFromUrl(t,n,r,i){return I(this,null,function*(){let a={url:t,method:"GET",headers:i,responseType:n},s;if(n==="text"?s=(yield this.transporter.request(a)).data:n==="json"&&r&&(s=(yield this.transporter.request(a)).data[r]),!s)throw new Error("Unable to parse the subject_token from the credential_source URL");return s})}};Ss.IdentityPoolClient=$d});var Qd=K(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.AwsRequestSigner=void 0;var zd=Sn(),Wd="AWS4-HMAC-SHA256",QE="aws4_request",Yd=class{constructor(t,n){this.getCredentials=t,this.region=n,this.crypto=zd.createCrypto()}getRequestOptions(t){return I(this,null,function*(){if(!t.url)throw new Error('"url" is required in "amzOptions"');let n=typeof t.data=="object"?JSON.stringify(t.data):t.data,r=t.url,i=t.method||"GET",a=t.body||n,s=t.headers,o=yield this.getCredentials(),c=new URL(r),u=yield XE({crypto:this.crypto,host:c.host,canonicalUri:c.pathname,canonicalQuerystring:c.search.substr(1),method:i,region:this.region,securityCredentials:o,requestPayload:a,additionalAmzHeaders:s}),l=Object.assign(u.amzDate?{"x-amz-date":u.amzDate}:{},{Authorization:u.authorizationHeader,host:c.host},s||{});o.token&&Object.assign(l,{"x-amz-security-token":o.token});let f={url:r,method:i,headers:l};return typeof a!="undefined"&&(f.body=a),f})}};As.AwsRequestSigner=Yd;function ji(e,t,n){return I(this,null,function*(){return yield e.signWithHmacSha256(t,n)})}function JE(e,t,n,r,i){return I(this,null,function*(){let a=yield ji(e,`AWS4${t}`,n),s=yield ji(e,a,r),o=yield ji(e,s,i);return yield ji(e,o,"aws4_request")})}function XE(e){return I(this,null,function*(){let t=e.additionalAmzHeaders||{},n=e.requestPayload||"",r=e.host.split(".")[0],i=new Date,a=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=i.toISOString().replace(/[-]/g,"").replace(/T.*/,""),o={};Object.keys(t).forEach(B=>{o[B.toLowerCase()]=t[B]}),e.securityCredentials.token&&(o["x-amz-security-token"]=e.securityCredentials.token);let c=Object.assign({host:e.host},o.date?{}:{"x-amz-date":a},o),u="",l=Object.keys(c).sort();l.forEach(B=>{u+=`${B}:${c[B]}
`});let f=l.join(";"),h=yield e.crypto.sha256DigestHex(n),v=`${e.method}
${e.canonicalUri}
${e.canonicalQuerystring}
${u}
${f}
${h}`,g=`${s}/${e.region}/${r}/${QE}`,C=`${Wd}
${a}
${g}
`+(yield e.crypto.sha256DigestHex(v)),T=yield JE(e.crypto,e.securityCredentials.secretAccessKey,s,e.region,r),_=yield ji(e.crypto,T,C),U=`${Wd} Credential=${e.securityCredentials.accessKeyId}/${g}, SignedHeaders=${f}, Signature=${zd.fromArrayBufferToHex(_)}`;return{amzDate:o.date?void 0:a,authorizationHeader:U,canonicalQuerystring:e.canonicalQuerystring}})}});var Kc=K(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.AwsClient=void 0;var ZE=Qd(),eT=Yn(),Jd=class extends eT.BaseExternalAccountClient{constructor(t,n){var r;super(t,n);this.environmentId=t.credential_source.environment_id,this.regionUrl=t.credential_source.region_url,this.securityCredentialsUrl=t.credential_source.url,this.regionalCredVerificationUrl=t.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=t.credential_source.imdsv2_session_token_url;let i=(r=this.environmentId)===null||r===void 0?void 0:r.match(/^(aws)(\d+)$/);if(!i||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(i[2],10)!==1)throw new Error(`aws version "${i[2]}" is not supported in the current build.`);this.awsRequestSigner=null,this.region=""}retrieveSubjectToken(){return I(this,null,function*(){if(!this.awsRequestSigner){let i={};this.imdsV2SessionTokenUrl&&(i["x-aws-ec2-metadata-token"]=yield this.getImdsV2SessionToken()),this.region=yield this.getAwsRegion(i),this.awsRequestSigner=new ZE.AwsRequestSigner(()=>I(this,null,function*(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};let a=yield this.getAwsRoleName(i),s=yield this.getAwsSecurityCredentials(a,i);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}),this.region)}let t=yield this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),n=[],r=Object.assign({"x-goog-cloud-target-resource":this.audience},t.headers);for(let i in r)n.push({key:i,value:r[i]});return encodeURIComponent(JSON.stringify({url:t.url,method:t.method,headers:n}))})}getImdsV2SessionToken(){return I(this,null,function*(){let t={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(yield this.transporter.request(t)).data})}getAwsRegion(t){return I(this,null,function*(){if(process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION)return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');let n={url:this.regionUrl,method:"GET",responseType:"text",headers:t},r=yield this.transporter.request(n);return r.data.substr(0,r.data.length-1)})}getAwsRoleName(t){return I(this,null,function*(){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let n={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:t};return(yield this.transporter.request(n)).data})}getAwsSecurityCredentials(t,n){return I(this,null,function*(){return(yield this.transporter.request({url:`${this.securityCredentialsUrl}/${t}`,responseType:"json",headers:n})).data})}};ws.AwsClient=Jd});var jc=K(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.ExternalAccountClient=void 0;var tT=Yn(),rT=Gc(),nT=Kc(),Xd=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options) or via new GoogleAuth(options).getClient()")}static fromJSON(t,n){var r;return t&&t.type===tT.EXTERNAL_ACCOUNT_TYPE?((r=t.credential_source)===null||r===void 0?void 0:r.environment_id)?new nT.AwsClient(t,n):new rT.IdentityPoolClient(t,n):null}};bs.ExternalAccountClient=Xd});var tp=K(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.GoogleAuth=Jn.CLOUD_SDK_CLIENT_ID=void 0;var iT=require("child_process"),Hi=require("fs"),Hc=ya(),aT=require("os"),$c=require("path"),sT=Sn(),oT=Ci(),cT=po(),uT=go(),lT=yo(),ln=Rc(),Zd=Lc(),ep=jc(),Qn=Yn();Jn.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";var zc=class{constructor(t){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,t=t||{},this._cachedProjectId=t.projectId||null,this.cachedCredential=t.authClient||null,this.keyFilename=t.keyFilename||t.keyFile,this.scopes=t.scopes,this.jsonContent=t.credentials||null,this.clientOptions=t.clientOptions}get isGCE(){return this.checkIsGCE}setGapicJWTValues(t){t.defaultServicePath=this.defaultServicePath,t.useJWTAccessWithScope=this.useJWTAccessWithScope,t.defaultScopes=this.defaultScopes}getProjectId(t){if(t)this.getProjectIdAsync().then(n=>t(null,n),t);else return this.getProjectIdAsync()}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((t,n)=>I(this,null,function*(){try{let r=this.getProductionProjectId()||(yield this.getFileProjectId())||(yield this.getDefaultServiceProjectId())||(yield this.getGCEProjectId())||(yield this.getExternalAccountClientProjectId());if(this._cachedProjectId=r,!r)throw new Error(`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`);t(r)}catch(r){n(r)}}))),this._getDefaultProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(t={},n){let r;if(typeof t=="function"?n=t:r=t,n)this.getApplicationDefaultAsync(r).then(i=>n(null,i.credential,i.projectId),n);else return this.getApplicationDefaultAsync(r)}getApplicationDefaultAsync(){return I(this,arguments,function*(t={}){if(this.cachedCredential)return{credential:this.cachedCredential,projectId:yield this.getProjectIdAsync()};let n,r;if(n=yield this._tryGetApplicationCredentialsFromEnvironmentVariable(t),n)return n instanceof ln.JWT?n.scopes=this.scopes:n instanceof Qn.BaseExternalAccountClient&&(n.scopes=this.getAnyScopes()),this.cachedCredential=n,r=yield this.getProjectId(),{credential:n,projectId:r};if(n=yield this._tryGetApplicationCredentialsFromWellKnownFile(t),n)return n instanceof ln.JWT?n.scopes=this.scopes:n instanceof Qn.BaseExternalAccountClient&&(n.scopes=this.getAnyScopes()),this.cachedCredential=n,r=yield this.getProjectId(),{credential:n,projectId:r};let i;try{i=yield this._checkIsGCE()}catch(a){throw a instanceof Error&&(a.message=`Unexpected error determining execution environment: ${a.message}`),a}if(!i)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return t.scopes=this.getAnyScopes(),this.cachedCredential=new cT.Compute(t),r=yield this.getProjectId(),{projectId:r,credential:this.cachedCredential}})}_checkIsGCE(){return I(this,null,function*(){return this.checkIsGCE===void 0&&(this.checkIsGCE=yield Hc.isAvailable()),this.checkIsGCE})}_tryGetApplicationCredentialsFromEnvironmentVariable(t){return I(this,null,function*(){let n=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!n||n.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(n,t)}catch(r){throw r instanceof Error&&(r.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${r.message}`),r}})}_tryGetApplicationCredentialsFromWellKnownFile(t){return I(this,null,function*(){let n=null;if(this._isWindows())n=process.env.APPDATA;else{let i=process.env.HOME;i&&(n=$c.join(i,".config"))}return n&&(n=$c.join(n,"gcloud","application_default_credentials.json"),Hi.existsSync(n)||(n=null)),n?yield this._getApplicationCredentialsFromFilePath(n,t):null})}_getApplicationCredentialsFromFilePath(r){return I(this,arguments,function*(t,n={}){if(!t||t.length===0)throw new Error("The file path is invalid.");try{if(t=Hi.realpathSync(t),!Hi.lstatSync(t).isFile())throw new Error}catch(a){throw a instanceof Error&&(a.message=`The file at ${t} does not exist, or it is not a file. ${a.message}`),a}let i=Hi.createReadStream(t);return this.fromStream(i,n)})}fromJSON(t,n){let r;if(!t)throw new Error("Must pass in a JSON object containing the Google auth settings.");return n=n||{},t.type==="authorized_user"?(r=new Zd.UserRefreshClient(n),r.fromJSON(t)):t.type===Qn.EXTERNAL_ACCOUNT_TYPE?(r=ep.ExternalAccountClient.fromJSON(t,n),r.scopes=this.getAnyScopes()):(n.scopes=this.scopes,r=new ln.JWT(n),this.setGapicJWTValues(r),r.fromJSON(t)),r}_cacheClientFromJSON(t,n){let r;return n=n||{},t.type==="authorized_user"?(r=new Zd.UserRefreshClient(n),r.fromJSON(t)):t.type===Qn.EXTERNAL_ACCOUNT_TYPE?(r=ep.ExternalAccountClient.fromJSON(t,n),r.scopes=this.getAnyScopes()):(n.scopes=this.scopes,r=new ln.JWT(n),this.setGapicJWTValues(r),r.fromJSON(t)),this.jsonContent=t,this.cachedCredential=r,r}fromStream(t,n={},r){let i={};if(typeof n=="function"?r=n:i=n,r)this.fromStreamAsync(t,i).then(a=>r(null,a),r);else return this.fromStreamAsync(t,i)}fromStreamAsync(t,n){return new Promise((r,i)=>{if(!t)throw new Error("Must pass in a stream containing the Google auth settings.");let a="";t.setEncoding("utf8").on("error",i).on("data",s=>a+=s).on("end",()=>{try{try{let s=JSON.parse(a),o=this._cacheClientFromJSON(s,n);return r(o)}catch(s){if(!this.keyFilename)throw s;let o=new ln.JWT(Vt(Rt({},this.clientOptions),{keyFile:this.keyFilename}));return this.cachedCredential=o,this.setGapicJWTValues(o),r(o)}}catch(s){return i(s)}})})}fromAPIKey(t,n){n=n||{};let r=new ln.JWT(n);return r.fromAPIKey(t),r}_isWindows(){let t=aT.platform();return!!(t&&t.length>=3&&t.substring(0,3).toLowerCase()==="win")}getDefaultServiceProjectId(){return I(this,null,function*(){return new Promise(t=>{iT.exec("gcloud config config-helper --format json",(n,r)=>{if(!n&&r)try{let i=JSON.parse(r).configuration.properties.core.project;t(i);return}catch(i){}t(null)})})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}getFileProjectId(){return I(this,null,function*(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let n=yield this.getClient();if(n&&n.projectId)return n.projectId}let t=yield this._tryGetApplicationCredentialsFromEnvironmentVariable();return t?t.projectId:null})}getExternalAccountClientProjectId(){return I(this,null,function*(){return!this.jsonContent||this.jsonContent.type!==Qn.EXTERNAL_ACCOUNT_TYPE?null:yield(yield this.getClient()).getProjectId()})}getGCEProjectId(){return I(this,null,function*(){try{return yield Hc.project("project-id")}catch(t){return null}})}getCredentials(t){if(t)this.getCredentialsAsync().then(n=>t(null,n),t);else return this.getCredentialsAsync()}getCredentialsAsync(){return I(this,null,function*(){if(yield this.getClient(),this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!(yield this._checkIsGCE()))throw new Error("Unknown error.");let n=yield Hc.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}})}getClient(t){return I(this,null,function*(){if(t)throw new Error("Passing options to getClient is forbidden in v5.0.0. Use new GoogleAuth(opts) instead.");if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let n=$c.resolve(this.keyFilename),r=Hi.createReadStream(n);yield this.fromStreamAsync(r,this.clientOptions)}else yield this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential})}getIdTokenClient(t){return I(this,null,function*(){let n=yield this.getClient();if(!("fetchIdToken"in n))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new uT.IdTokenClient({targetAudience:t,idTokenProvider:n})})}getAccessToken(){return I(this,null,function*(){return(yield(yield this.getClient()).getAccessToken()).token})}getRequestHeaders(t){return I(this,null,function*(){return(yield this.getClient()).getRequestHeaders(t)})}authorizeRequest(t){return I(this,null,function*(){t=t||{};let n=t.url||t.uri,i=yield(yield this.getClient()).getRequestHeaders(n);return t.headers=Object.assign(t.headers||{},i),t})}request(t){return I(this,null,function*(){return(yield this.getClient()).request(t)})}getEnv(){return lT.getEnv()}sign(t){return I(this,null,function*(){let n=yield this.getClient(),r=sT.createCrypto();if(n instanceof ln.JWT&&n.key)return yield r.sign(n.key,t);if(n instanceof Qn.BaseExternalAccountClient&&n.getServiceAccountEmail())return this.signBlob(r,n.getServiceAccountEmail(),t);if(!(yield this.getProjectId()))throw new Error("Cannot sign data without a project ID.");let a=yield this.getCredentials();if(!a.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(r,a.client_email,t)})}signBlob(t,n,r){return I(this,null,function*(){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${n}:signBlob`;return(yield this.request({method:"POST",url:i,data:{payload:t.encodeBase64StringUtf8(r)}})).data.signedBlob})}};Jn.GoogleAuth=zc;zc.DefaultTransporter=oT.DefaultTransporter});var np=K(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.IAMAuth=void 0;var rp=class{constructor(t,n){this.selector=t,this.token=n,this.selector=t,this.token=n}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};Is.IAMAuth=rp});var sp=K(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.Impersonated=void 0;var ip=Qr(),ap=class extends ip.OAuth2Client{constructor(t={}){var n,r,i,a,s,o;super(t);this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(n=t.sourceClient)!==null&&n!==void 0?n:new ip.OAuth2Client,this.targetPrincipal=(r=t.targetPrincipal)!==null&&r!==void 0?r:"",this.delegates=(i=t.delegates)!==null&&i!==void 0?i:[],this.targetScopes=(a=t.targetScopes)!==null&&a!==void 0?a:[],this.lifetime=(s=t.lifetime)!==null&&s!==void 0?s:3600,this.endpoint=(o=t.endpoint)!==null&&o!==void 0?o:"https://iamcredentials.googleapis.com"}refreshToken(t){return I(this,null,function*(){var n,r,i,a,s,o;try{yield this.sourceClient.getAccessToken();let c="projects/-/serviceAccounts/"+this.targetPrincipal,u=`${this.endpoint}/v1/${c}:generateAccessToken`,l={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},f=yield this.sourceClient.request({url:u,data:l,method:"POST"}),h=f.data;return this.credentials.access_token=h.accessToken,this.credentials.expiry_date=Date.parse(h.expireTime),{tokens:this.credentials,res:f}}catch(c){let u=(i=(r=(n=c==null?void 0:c.response)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r.error)===null||i===void 0?void 0:i.status,l=(o=(s=(a=c==null?void 0:c.response)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s.error)===null||o===void 0?void 0:o.message;throw u&&l?(c.message=`${u}: unable to impersonate: ${l}`,c):(c.message=`unable to impersonate: ${c}`,c)}})}};ks.Impersonated=ap});var cp=K(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.DownscopedClient=Wt.EXPIRATION_TIME_OFFSET=Wt.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var fT=require("stream"),hT=Ei(),dT=Dc(),pT="urn:ietf:params:oauth:grant-type:token-exchange",gT="urn:ietf:params:oauth:token-type:access_token",yT="urn:ietf:params:oauth:token-type:access_token",vT="https://sts.googleapis.com/v1/token";Wt.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;Wt.EXPIRATION_TIME_OFFSET=5*60*1e3;var op=class extends hT.AuthClient{constructor(t,n,r,i){super();if(this.authClient=t,this.credentialAccessBoundary=n,n.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(n.accessBoundary.accessBoundaryRules.length>Wt.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${Wt.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of n.accessBoundary.accessBoundaryRules)if(a.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new dT.StsCredentials(vT),this.cachedDownscopedAccessToken=null,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Wt.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r==null?void 0:r.forceRefreshOnFailure),this.quotaProjectId=i}setCredentials(t){if(!t.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(t),this.cachedDownscopedAccessToken=t}getAccessToken(){return I(this,null,function*(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}})}getRequestHeaders(){return I(this,null,function*(){let n={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(n)})}request(t,n){if(n)this.requestAsync(t).then(r=>n(null,r),r=>n(r,r.response));else return this.requestAsync(t)}requestAsync(t,n=!1){return I(this,null,function*(){let r;try{let i=yield this.getRequestHeaders();t.headers=t.headers||{},i&&i["x-goog-user-project"]&&(t.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(t.headers.Authorization=i.Authorization),r=yield this.transporter.request(t)}catch(i){let a=i.response;if(a){let s=a.status,o=a.config.data instanceof fT.Readable;if(!n&&(s===401||s===403)&&!o&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(t,!0)}throw i}return r})}refreshAccessTokenAsync(){return I(this,null,function*(){var t;let n=(yield this.authClient.getAccessToken()).token,r={grantType:pT,requestedTokenType:gT,subjectToken:n,subjectTokenType:yT},i=yield this.stsCredential.exchangeToken(r,void 0,this.credentialAccessBoundary),a=((t=this.authClient.credentials)===null||t===void 0?void 0:t.expiry_date)||null,s=i.expires_in?new Date().getTime()+i.expires_in*1e3:a;return this.cachedDownscopedAccessToken={access_token:i.access_token,expiry_date:s,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken})}isExpired(t){let n=new Date().getTime();return t.expiry_date?n>=t.expiry_date-this.eagerRefreshThresholdMillis:!1}};Wt.DownscopedClient=op});var fp=K(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.GoogleAuth=Qe.auth=void 0;var up=tp();Object.defineProperty(Qe,"GoogleAuth",{enumerable:!0,get:function(){return up.GoogleAuth}});var mT=Ei();Object.defineProperty(Qe,"AuthClient",{enumerable:!0,get:function(){return mT.AuthClient}});var CT=po();Object.defineProperty(Qe,"Compute",{enumerable:!0,get:function(){return CT.Compute}});var ET=yo();Object.defineProperty(Qe,"GCPEnv",{enumerable:!0,get:function(){return ET.GCPEnv}});var TT=np();Object.defineProperty(Qe,"IAMAuth",{enumerable:!0,get:function(){return TT.IAMAuth}});var _T=go();Object.defineProperty(Qe,"IdTokenClient",{enumerable:!0,get:function(){return _T.IdTokenClient}});var xT=Nc();Object.defineProperty(Qe,"JWTAccess",{enumerable:!0,get:function(){return xT.JWTAccess}});var ST=Rc();Object.defineProperty(Qe,"JWT",{enumerable:!0,get:function(){return ST.JWT}});var AT=sp();Object.defineProperty(Qe,"Impersonated",{enumerable:!0,get:function(){return AT.Impersonated}});var lp=Qr();Object.defineProperty(Qe,"CodeChallengeMethod",{enumerable:!0,get:function(){return lp.CodeChallengeMethod}});Object.defineProperty(Qe,"OAuth2Client",{enumerable:!0,get:function(){return lp.OAuth2Client}});var wT=fo();Object.defineProperty(Qe,"LoginTicket",{enumerable:!0,get:function(){return wT.LoginTicket}});var bT=Lc();Object.defineProperty(Qe,"UserRefreshClient",{enumerable:!0,get:function(){return bT.UserRefreshClient}});var IT=Kc();Object.defineProperty(Qe,"AwsClient",{enumerable:!0,get:function(){return IT.AwsClient}});var kT=Gc();Object.defineProperty(Qe,"IdentityPoolClient",{enumerable:!0,get:function(){return kT.IdentityPoolClient}});var BT=jc();Object.defineProperty(Qe,"ExternalAccountClient",{enumerable:!0,get:function(){return BT.ExternalAccountClient}});var NT=Yn();Object.defineProperty(Qe,"BaseExternalAccountClient",{enumerable:!0,get:function(){return NT.BaseExternalAccountClient}});var RT=cp();Object.defineProperty(Qe,"DownscopedClient",{enumerable:!0,get:function(){return RT.DownscopedClient}});var LT=Ci();Object.defineProperty(Qe,"DefaultTransporter",{enumerable:!0,get:function(){return LT.DefaultTransporter}});var DT=new up.GoogleAuth;Qe.auth=DT});var Yc=K((oA,dp)=>{"use strict";var hp=require("fs"),Wc;function OT(){try{return hp.statSync("/.dockerenv"),!0}catch(e){return!1}}function PT(){try{return hp.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}dp.exports=()=>(Wc===void 0&&(Wc=OT()||PT()),Wc)});var yp=K((cA,Qc)=>{"use strict";var UT=require("os"),FT=require("fs"),pp=Yc(),gp=()=>{if(process.platform!=="linux")return!1;if(UT.release().toLowerCase().includes("microsoft"))return!pp();try{return FT.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!pp():!1}catch(e){return!1}};process.env.__IS_WSL_TEST__?Qc.exports=gp:Qc.exports=gp()});var mp=K((uA,vp)=>{"use strict";vp.exports=(e,t,n)=>{let r=i=>Object.defineProperty(e,t,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let i=n();return r(i),i},set(i){r(i)}}),e}});var Ap=K((tu,Sp)=>{var qT=require("path"),MT=require("child_process"),{promises:Jc,constants:Cp}=require("fs"),Bs=yp(),VT=Yc(),Xc=mp(),Ep=qT.join(__dirname,"xdg-open"),{platform:Xn,arch:Tp}=process,GT=(()=>{let e="/mnt/",t;return function(){return I(this,null,function*(){if(t)return t;let n="/etc/wsl.conf",r=!1;try{yield Jc.access(n,Cp.F_OK),r=!0}catch(s){}if(!r)return e;let i=yield Jc.readFile(n,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return a?(t=a.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e})}})(),_p=(e,t)=>I(tu,null,function*(){let n;for(let r of e)try{return yield t(r)}catch(i){n=i}throw n}),Ns=e=>I(tu,null,function*(){if(e=Rt({wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1},e),Array.isArray(e.app))return _p(e.app,o=>Ns(Vt(Rt({},e),{app:o})));let{name:t,arguments:n=[]}=e.app||{};if(n=[...n],Array.isArray(t))return _p(t,o=>Ns(Vt(Rt({},e),{app:{name:o,arguments:n}})));let r,i=[],a={};if(Xn==="darwin")r="open",e.wait&&i.push("--wait-apps"),e.background&&i.push("--background"),e.newInstance&&i.push("--new"),t&&i.push("-a",t);else if(Xn==="win32"||Bs&&!VT()){let o=yield GT();r=Bs?`${o}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),Bs||(a.windowsVerbatimArguments=!0);let c=["Start"];e.wait&&c.push("-Wait"),t?(c.push(`"\`"${t}\`""`,"-ArgumentList"),e.target&&n.unshift(e.target)):e.target&&c.push(`"${e.target}"`),n.length>0&&(n=n.map(u=>`"\`"${u}\`""`),c.push(n.join(","))),e.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(t)r=t;else{let o=!__dirname||__dirname==="/",c=!1;try{yield Jc.access(Ep,Cp.X_OK),c=!0}catch(l){}r=process.versions.electron||Xn==="android"||o||!c?"xdg-open":Ep}n.length>0&&i.push(...n),e.wait||(a.stdio="ignore",a.detached=!0)}e.target&&i.push(e.target),Xn==="darwin"&&n.length>0&&i.push("--args",...n);let s=MT.spawn(r,i,a);return e.wait?new Promise((o,c)=>{s.once("error",c),s.once("close",u=>{if(e.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}o(s)})}):(s.unref(),s)}),Zc=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return Ns(Vt(Rt({},t),{target:e}))},KT=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:n=[]}=t||{};if(n!=null&&!Array.isArray(n))throw new TypeError("Expected `appArguments` as Array type");return Ns(Vt(Rt({},t),{app:{name:e,arguments:n}}))};function xp(e){if(typeof e=="string"||Array.isArray(e))return e;let{[Tp]:t}=e;if(!t)throw new Error(`${Tp} is not supported`);return t}function eu({[Xn]:e},{wsl:t}){if(t&&Bs)return xp(t);if(!e)throw new Error(`${Xn} is not supported`);return xp(e)}var Rs={};Xc(Rs,"chrome",()=>eu({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Xc(Rs,"firefox",()=>eu({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Xc(Rs,"edge",()=>eu({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Zc.apps=Rs;Zc.openApp=KT;Sp.exports=Zc});var bp=K((lA,wp)=>{wp.exports=jT;function jT(e){var t={};e.on("connection",function(n){var r=n.remoteAddress+":"+n.remotePort;t[r]=n,n.on("close",function(){delete t[r]})}),e.destroy=function(n){e.close(n);for(var r in t)t[r].destroy()}}});tg(exports,{default:()=>pu});var Cu=()=>{var e;return(e=window.localStorage.getItem("googleTaskAccessToken"))!=null?e:""},pr=()=>{var e;return(e=window.localStorage.getItem("googleTaskRefreshToken"))!=null?e:""},si=()=>{var t;let e=(t=window.localStorage.getItem("googleTaskExpirationTime"))!=null?t:"0";return parseInt(e,10)},oi=e=>{window.localStorage.setItem("googleTaskAccessToken",e)},ci=e=>{window.localStorage.setItem("googleTaskRefreshToken",e)},ui=e=>{window.localStorage.setItem("googleTaskExpirationTime",e+"")};var ni=yt(require("obsidian"));var Ip=yt(Ks());var Ku=yt(require("obsidian"));function Tt(e,t,n=!0){e.settings.showNotice&&n&&new Ku.Notice(t)}var xt=yt(require("obsidian"));function pn(e,t,n){let r=e.createDiv({cls:"setting-item"}),i=r.createDiv({cls:"setting-item-info"}),a=i.createDiv({cls:"setting-item-name",text:t}),s=i.createDiv({cls:"setting-item-description",text:n});return r.createDiv({cls:"setting-item-control"})}var Jt=yt(require("obsidian")),di=yt(Ks());var li=yt(require("obsidian")),js=class extends li.Modal{constructor(t,n){super(t.app);this.plugin=t,this.onSubmit=n}onOpen(){let{contentEl:t}=this,n=t.createDiv({cls:"googleTaskConfirmContainer"});n.createEl("h3",{cls:"googleTaskConfirmTitle",text:"Are you sure you want to delete this task?"}),n.createEl("hr");let r=n.createDiv({cls:"googleTaskConfirmButtonContainer"});new li.ButtonComponent(r).setClass("googleTaskConfirmCancel").setButtonText("Cancel").onClick(()=>{this.close()}),new li.ButtonComponent(r).setClass("googleTaskConfirmAccept").setButtonText("Confirm").onClick(()=>{this.onSubmit(),this.close()})}onClose(){let{contentEl:t}=this;t.empty()}};var jr=yt(require("obsidian"));function ju(e,t){return I(this,null,function*(){let n=new Headers;n.append("Authorization","Bearer "+(yield _t(e))),n.append("Content-Type","application/json");let r={title:t.title,notes:t.details,due:t.due};t.due&&(r.due=new Date(t.due).toISOString());try{let i=yield fetch(`https://tasks.googleapis.com/tasks/v1/lists/${t.taskListId}/tasks`,{method:"POST",headers:n,body:JSON.stringify(r)});if(i.status==200){Tt(e,"New task created");let a=yield i.json();return a.due&&(a.due=window.moment(a.due).add(12,"hour").toISOString()),e.app.workspace.getLeavesOfType(pt).forEach(s=>{s.view instanceof Lt&&(s.view.addTodo(a),s.view.loadTaskView())}),a}}catch(i){console.error(i)}})}function Hu(e,t){return I(this,null,function*(){let n=new Headers;n.append("Authorization","Bearer "+(yield _t(e))),n.append("Content-Type","application/json");let r=t.parent;delete t.parent,t.due&&(t.due=new Date(t.due).toISOString());try{let i=yield fetch(`https://tasks.googleapis.com/tasks/v1/lists/${r}/tasks`,{method:"POST",headers:n,body:JSON.stringify(t)});i.status==200&&(Tt(e,"Task updated"),yield i.json(),e.app.workspace.getLeavesOfType(pt).forEach(a=>{a.view instanceof Lt&&a.view.onOpen()}))}catch(i){console.error(i)}})}var gn=e=>{let t="-----------";return e.due&&(t=window.moment.utc(e.due).local().format("YYYY-MM-DD")),`- [${e.status=="completed"?"x":" "}] ${t} ${e.title}  %%${e.id}%%
`};var yn=class extends jr.Modal{constructor(t,n=null){super(t.app);this.plugin=t,this.editor=n}onOpen(){return I(this,null,function*(){let t=yield Ar(this.plugin);this.taskList=t[0].id;let{contentEl:n}=this;n.createEl("h1",{text:"Add a new Task"}),new jr.Setting(n).setName("Title").addText(a=>a.onChange(s=>{this.taskTitle=s})).settingEl.querySelector("input").focus(),new jr.Setting(n).setName("Details").addText(a=>a.onChange(s=>{this.taskDetails=s}));let r=pn(n,"Due date","").createEl("input",{type:"date"});r.addEventListener("input",a=>{this.taskDue=r.value});let i=new jr.Setting(n);i.setName("Categorie"),i.addDropdown(a=>{a.onChange(s=>{this.taskList=s});for(let s=0;s<t.length;s++)a.addOption(t[s].id,t[s].title);return a}),new jr.Setting(n).addButton(a=>a.setButtonText("Create").onClick(()=>I(this,null,function*(){let s={title:this.taskTitle,details:this.taskDetails,due:this.taskDue,taskListId:this.taskList};this.createdTask=yield ju(this.plugin,s),this.close()})))})}onClose(){let{contentEl:t}=this;if(t.empty(),this.editor){let n=this.editor.getCursor();this.editor.setLine(n.line,gn(this.createdTask))}}};function Hr(e,t){return I(this,null,function*(){var r;(r=t.children)==null||r.forEach(i=>Hr(e,i));let n=new Headers;n.append("Authorization","Bearer "+(yield _t(e))),n.append("Content-Type","application/json"),t.status="completed",t.completed=new Date().toISOString(),delete t.taskListName;try{yield(yield fetch(t.selfLink,{method:"PUT",headers:n,body:JSON.stringify(t)})).json()}catch(i){return Tt(e,"Could not complete task"),!1}return!0})}function $u(e,t){return I(this,null,function*(){let n=yield hi(e,t);return yield Hr(e,n)})}function fi(e,t){return I(this,null,function*(){var r;let n=new Headers;n.append("Authorization","Bearer "+(yield _t(e))),n.append("Content-Type","application/json"),t.status="needsAction",delete t.completed,delete t.taskListName;try{yield(yield fetch(t.selfLink,{method:"PUT",headers:n,body:JSON.stringify(t)})).json()}catch(i){return Tt(e,"Could not complete task"),!1}return(r=t.children)==null||r.forEach(i=>fi(e,i)),!0})}function zu(e,t){return I(this,null,function*(){let n=yield hi(e,t);return yield fi(e,n)})}function ta(e,t,n=!0){return I(this,null,function*(){let r=new Headers;r.append("Authorization","Bearer "+(yield _t(e))),r.append("Content-Type","application/json");try{return(yield fetch(t,{method:"DELETE",headers:r})).status==204?(n&&Tt(e,"Task updated"),!0):!1}catch(i){return console.error(i),!1}})}var Qt=yt(require("obsidian"));function Wu(e,t){return I(this,null,function*(){var r;let n=new Headers;n.append("Authorization","Bearer "+(yield _t(e))),n.append("Content-Type","application/json");try{let i=yield fetch(`${t.selfLink}`,{method:"PATCH",headers:n,body:JSON.stringify({title:t.title,notes:(r=t.notes)!=null?r:"",due:t.due,updated:new Date().toDateString()})});i.status==200&&(Tt(e,"Task updated"),yield i.json(),e.app.workspace.getLeavesOfType(pt).forEach(a=>{a.view instanceof Lt&&a.view.onOpen()}))}catch(i){return console.log(i),Tt(e,"Could not update task"),!1}return!0})}var Hs=class extends Qt.Modal{constructor(t,n){super(t.app);this.plugin=t,this.newTask=n,this.oldTaskSelfLInk=n.selfLink}onOpen(){return I(this,null,function*(){let t=yield Ar(this.plugin),{contentEl:n}=this;n.createEl("h1",{text:"Edit Task"}),new Qt.Setting(n).setName("Title").addText(s=>{s.onChange(o=>{this.newTask.title=o}),s.setValue(this.newTask.title),s.inputEl.focus()}),new Qt.Setting(n).setName("Details").addText(s=>{s.onChange(o=>{this.newTask.notes=o}),s.setValue(this.newTask.notes)});let r=pn(n,"Due date","").createEl("input",{type:"date"});r.addEventListener("input",s=>{this.newTask.due=r.value}),this.newTask.due&&(r.value=Qt.moment.utc(this.newTask.due).local().format("YYYY-MM-DD"));let i=new Qt.Setting(n);i.setName("Categorie"),i.addDropdown(s=>{s.onChange(o=>{this.newTask.parent=o});for(let o=0;o<t.length;o++)s.addOption(t[o].id,t[o].title);return s.setValue(ra(this.newTask)),this.newTask.parent=ra(this.newTask),s});let a=n.createDiv({cls:"googleButtonContainer"});new Qt.Setting(a).addButton(s=>s.setButtonText("Update Categorie").onClick(()=>{Hu(this.plugin,this.newTask),ta(this.plugin,this.oldTaskSelfLInk,!1),this.close()})),new Qt.Setting(a).addButton(s=>s.setButtonText("Update").onClick(()=>{Wu(this.plugin,this.newTask),this.close()}))})}onClose(){let{contentEl:t}=this;t.empty()}};var pt="googleTaskView",Lt=class extends Jt.ItemView{constructor(t,n){super(t);this.todoTasksGroups=new di.default;this.doneTasksGroups=new di.default;this.showDone=!1;this.showTodo=!0;this.currentListId="000";this.currentListIndex=0;this.plugin=n}getViewType(){return pt}getIcon(){return"check-in-circle"}getDisplayText(){return"Google Tasks"}displayTaskGroupList(t,n,r){return I(this,null,function*(){r?t=di.default.fromMap(t):t=di.default.fromMap(t,(i,a)=>new Date(a).getTime()-new Date(i).getTime()),t.forEach((i,a)=>{if(!i.length)return;let s="No due date";this.currentListId!="000"&&(i=i.filter(o=>ra(o)==this.currentListId),i.length==0)||(window.moment(a).isValid()&&(s=Jt.moment.utc(a).local().calendar(null,{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"[last] dddd",nextWeek:"dddd",sameElse:"L"})),n.createEl("h6",{text:s}),i.forEach(o=>this.createTaskElement(o,n,r,!1)))})})}createTaskElement(t,n,r,i){var h,v,g;let a=(h=t.due)!=null?h:"No due date",s=n.createDiv({cls:"googleTaskContainer"}),o=0,c=0,u=!1;if(s.addEventListener("mousedown",()=>{o=new Date().getTime()}),s.addEventListener("mouseup",()=>{c=new Date().getTime(),u=!(c-o<500)}),s.addEventListener("click",()=>{u&&(u=!1,new Hs(this.plugin,t).open())}),!r){let C=new Jt.ButtonComponent(s);C.setClass("googleTaskTrash"),C.setIcon("cross"),C.onClick(()=>{this.plugin.settings.askConfirmation?new js(this.plugin,()=>I(this,null,function*(){return this.deleteTask(t)})).open():this.deleteTask(t)})}let l=s.createEl("input",{type:"checkbox"});(!r||i&&t.completed)&&(l.checked=!0),l.addEventListener("click",C=>I(this,null,function*(){if(t.parent)l.checked?yield Hr(this.plugin,t):yield fi(this.plugin,t);else if(r){if(!(yield Hr(this.plugin,t)))return;this.doneTasksGroups.has(a)?this.doneTasksGroups.get(a).push(t):this.doneTasksGroups.set(a,[t]),this.todoTasksGroups.get(a).remove(t),this.todoTasksGroups.get(a).length==0&&this.todoTasksGroups.delete(a),this.loadTaskView()}else{if(!(yield fi(this.plugin,t)))return;this.todoTasksGroups.has(a)?this.todoTasksGroups.get(a).push(t):this.todoTasksGroups.set(a,[t]),this.doneTasksGroups.get(a).remove(t),this.doneTasksGroups.get(a).length==0&&this.doneTasksGroups.delete(a),this.loadTaskView()}}));let f=s.createDiv({cls:"googleTaskTextContainer"});if(f.createEl("span",{cls:"googleTaskTitle",text:t.title}),a!="No due date"&&r&&Jt.moment.utc(a).local().isBefore(window.moment(),"date")&&(f.style.color="red"),f.createEl("span",{cls:"googleTaskDetails",text:t.notes}),!i&&((v=t.children)==null?void 0:v.length)){let C=s.createEl("span",{cls:"googleTaskArrowDown",text:"^"});C.addEventListener("click",T=>{let _=C.parentElement.nextSibling;_ instanceof HTMLDivElement&&(_.classList.contains("hideSubTasks")?(_.classList.remove("hideSubTasks"),C.textContent="^"):(_.classList.add("hideSubTasks"),C.textContent="\u02C5"))})}if(!i&&((g=t.children)==null?void 0:g.length)){let C=n.createDiv({cls:"googleSubTaskContainer"});t.children.forEach(T=>this.createTaskElement(T,C,r,!0))}}loadTaskView(){return I(this,null,function*(){let t=this.containerEl.children[1];t.empty();let n=t.createDiv({cls:"googleTaskMainContainer"}),r=n.createDiv({cls:"googleTaskTitleContainer"});new Jt.Setting(r).addButton(o=>{o.setIcon("plus"),o.setClass("googleTaskAddButton"),o.onClick(c=>{new yn(this.plugin).open()})}),r.createEl("h4",{text:"Google Tasks"}).addEventListener("click",()=>{this.updateFromServer()}),new Jt.Setting(r).addDropdown(o=>{let c=[o.addOption("000","Combined")];this.taskLists.forEach(u=>{c.push(o.addOption(u.id,u.title))}),o.onChange(u=>{this.currentListId=u,this.loadTaskView()}),o.setValue(this.currentListId)}),n.createEl("hr"),n.createEl("h5",{text:"Todo"}).addEventListener("click",()=>I(this,null,function*(){this.showTodo=!this.showTodo,this.showTodo?a.addClass("googleTaskForceShow"):a.removeClass("googleTaskForceShow")})),n.createEl("hr");let a=n.createDiv({cls:"googleTaskTodoContainer"});this.displayTaskGroupList(this.todoTasksGroups,a,!0),n.createEl("h5",{text:"Done"}).addEventListener("click",()=>I(this,null,function*(){this.showDone=!this.showDone,this.plugin.showHidden=!this.plugin.showHidden,this.showDone?(s.addClass("googleTaskForceShow"),this.onOpen()):s.removeClass("googleTaskForceShow")})),n.createEl("hr");let s=n.createDiv({cls:"googleTaskDoneContainer"});this.showDone?s.addClass("googleTaskForceShow"):s.removeClass("googleTaskForceShow"),this.showTodo?a.addClass("googleTaskForceShow"):a.removeClass("googleTaskForceShow"),this.displayTaskGroupList(this.doneTasksGroups,s,!1)})}deleteTask(t){return I(this,null,function*(){var i;let n=(i=t.due)!=null?i:"No due date";(yield ta(this.plugin,t.selfLink))&&(this.doneTasksGroups.get(n).remove(t),this.doneTasksGroups.get(n).length==0&&this.doneTasksGroups.delete(n),this.loadTaskView())})}setRefreshInterval(){this.intervalId&&window.clearInterval(this.intervalId),this.registerInterval(this.intervalId=window.setInterval(()=>{this.updateFromServer()},this.plugin.settings.refreshInterval*1e3))}onOpen(){return I(this,null,function*(){yield this.updateFromServer(),yield this.setRefreshInterval()})}addTodo(t){var r;let n=(r=t.due)!=null?r:"No due date";this.todoTasksGroups.has(n)?this.todoTasksGroups.get(n).push(t):this.todoTasksGroups.set(n,[t])}removeTodo(t){var i;let n=(i=t.due)!=null?i:"No due date",r=this.todoTasksGroups.get(n).find(a=>a.id==t.id);this.todoTasksGroups.get(n).remove(r),this.todoTasksGroups.get(n).length==0&&this.todoTasksGroups.delete(n)}addDone(t){var r;let n=(r=t.due)!=null?r:"No due date";this.doneTasksGroups.has(n)?this.doneTasksGroups.get(n).push(t):this.doneTasksGroups.set(n,[t])}updateFromServer(){return I(this,null,function*(){if(Gt(this.plugin))this.taskLists=yield Ar(this.plugin),this.todoTasksGroups=yield Yu(this.plugin),this.doneTasksGroups=yield Qu(this.plugin),this.loadTaskView();else{let t=this.containerEl.children[1];t.empty(),t.createEl("h4",{text:"Google Tasks"}),t.createEl("hr"),t.createEl("h5",{text:"Missing settings"})}})}onClose(){return I(this,null,function*(){})}};function ra(e){let t=e.selfLink,n="https://www.googleapis.com/tasks/v1/lists/".length,r=t.indexOf("/",n);return t.substring(n,r)}var $s=class extends xt.PluginSettingTab{constructor(t,n){super(t,n);this.plugin=n}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Settings for Google Tasks"}),new xt.Setting(t).setName("ClientId").setDesc("Google client id").addText(a=>a.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(s=>I(this,null,function*(){this.plugin.settings.googleClientId=s,yield this.plugin.saveSettings()}))),new xt.Setting(t).setName("ClientSecret").setDesc("Google client secret").addText(a=>a.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(s=>I(this,null,function*(){this.plugin.settings.googleClientSecret=s,yield this.plugin.saveSettings()})));let n=new xt.Setting(t),r=a=>{a.setButtonText("Logout"),a.onClick(s=>I(this,null,function*(){ci(""),oi(""),ui(0),a.buttonEl.remove(),n.setName("Login"),n.setDesc("Login to your Google Account"),n.addButton(o=>{o.setButtonText("Login"),o.onClick(c=>I(this,null,function*(){Ju(this.plugin)&&Ws(this.plugin)}))})}))};xt.Platform.isDesktop?pr()?(n.setName("Logout"),n.setDesc("Logout off your Google Account"),n.addButton(r)):(n.setName("Login"),n.setDesc("Login to your Google Account"),n.addButton(a=>{a.setButtonText("Login"),a.onClick(s=>I(this,null,function*(){if(Ju(this.plugin)){Ws(this.plugin);let o=0,c=setInterval(()=>{o++,o>900?clearInterval(c):pr()&&(clearInterval(c),a.buttonEl.remove(),n.setName("Logout"),n.setDesc("Logout off your Google Account"),n.addButton(r))},200)}}))})):new xt.Setting(t).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").addText(a=>a.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(s=>I(this,null,function*(){this.plugin.settings.googleRefreshToken=s,ci(s)}))),new xt.Setting(t).setName("Confirmations").setDesc("Ask for confirmations when deleting a task").addToggle(a=>{a.setValue(this.plugin.settings.askConfirmation),a.onChange(s=>I(this,null,function*(){this.plugin.settings.askConfirmation=s,yield this.plugin.saveSettings()}))}),new xt.Setting(t).setName("Notifications").setDesc("Show notifications of info and errors").addToggle(a=>{a.setValue(this.plugin.settings.showNotice),a.onChange(s=>I(this,null,function*(){this.plugin.settings.showNotice=s,yield this.plugin.saveSettings()}))});let i=pn(t,"Refresh Interval","Time in seconds between refresh request from google server").createEl("input",{type:"number"});i.value=this.plugin.settings.refreshInterval+"",i.min="10",i.step="1",i.addEventListener("input",()=>I(this,null,function*(){this.plugin.settings.refreshInterval=parseInt(i.value),this.app.workspace.getLeavesOfType(pt).forEach(a=>{a.view instanceof Lt&&a.view.setRefreshInterval()}),yield this.plugin.saveSettings()}))}};function zs(e,t=!0){return e.settings.googleClientId==""||e.settings.googleClientSecret==""?(Tt(e,"Google Tasks missing settings",t),!1):!0}function Ju(e){return/^[0-9a-zA-z-]*\.apps\.googleusercontent\.com$/.test(e.settings.googleClientId)==!1?(new xt.Notice("Client ID Token is not the correct format"),!1):/^[0-9a-zA-z-]*$/.test(e.settings.googleClientSecret)==!1?(new xt.Notice("Client Secret is not the correct format"),!1):!0}function Gt(e,t=!0){return!zs(e,!1)||pr()==""?(Tt(e,"Google Tasks missing settings or not logged in",t),!1):!0}var Ls=yt(require("obsidian"));function _t(e){return I(this,null,function*(){if(!!Gt(e)){if((si()==0||si()==null||isNaN(si())||si()<+new Date)&&pr()!=""){let t={client_id:e.settings.googleClientId,client_secret:e.settings.googleClientSecret,grant_type:"refresh_token",refresh_token:pr()},r=yield(yield fetch("https://oauth2.googleapis.com/token",{method:"POST",body:JSON.stringify(t)})).json();oi(r.access_token),ui(+new Date+r.expires_in)}return Cu()}})}function Ws(e){return I(this,null,function*(){if(Ls.Platform.isDesktop){if(!zs(e))return;let{OAuth2Client:t}=fp(),n=require("http"),r=Ap(),i=require("url"),a=bp(),s=new t(e.settings.googleClientId,e.settings.googleClientSecret,"http://127.0.0.1:42813/callback"),o=s.generateAuthUrl({scope:"https://www.googleapis.com/auth/tasks",access_type:"offline",prompt:"consent"}),c=n.createServer((u,l)=>I(this,null,function*(){try{if(u.url.indexOf("/callback")>-1){let h=new i.URL(u.url,"http://localhost:42813").searchParams.get("code");l.end("Authentication successful! Please return to obsidian."),c.destroy();let v=yield s.getToken(h);ci(v.tokens.refresh_token),oi(v.tokens.access_token),ui(v.tokens.expiry_date),console.info("Tokens acquired.")}}catch(f){console.error("Error getting Tokens.")}})).listen(42813,()=>{r(o,{wait:!1}).then(u=>u.unref())});a(c)}else new Ls.Notice("Can't use OAuth on this device")})}function hi(e,t){return I(this,null,function*(){let n=yield Ar(e),r=new Headers;r.append("Authorization","Bearer "+(yield _t(e))),r.append("Content-Type","application/json");for(let i=0;i<n.length;i++)try{let a=yield fetch(`https://tasks.googleapis.com/tasks/v1/lists/${n[i].id}/tasks/${t}`,{method:"GET",headers:r});if(a.status==200){let s=yield a.json();return s.due&&(s.due=window.moment(s.due).add(12,"hour").toISOString()),s}}catch(a){console.error(a)}})}function Ar(e){return I(this,null,function*(){let t=new Headers;t.append("Authorization","Bearer "+(yield _t(e))),t.append("Content-Type","application/json");try{return(yield(yield fetch("https://tasks.googleapis.com/tasks/v1/users/@me/lists",{method:"GET",headers:t,redirect:"follow"})).json()).items}catch(n){return console.error(n),[]}})}function HT(e,t,n=null,r=null){return I(this,null,function*(){try{let i=[],a;do{let s=`https://tasks.googleapis.com/tasks/v1/lists/${t}/tasks?`;s+="maxResults=100",s+="&showCompleted=true",s+="&showDeleted=false",n&&n.isValid()&&(s+=`&dueMin=${n.local().startOf("day").toISOString()}`),r&&r.isValid()&&r.endOf("day").isAfter(n,"hour")&&(s+=`&dueMax=${r.add(1,"day").local().endOf("day").toISOString()}`),e.showHidden&&(s+="&showHidden=true"),a!=null&&(s+=`&pageToken=${a.nextPageToken}`);let o=new Headers;o.append("Authorization","Bearer "+(yield _t(e))),o.append("Content-Type","application/json"),a=yield(yield fetch(s,{method:"GET",headers:o})).json(),a.items&&a.items.length&&(i=[...i,...a.items])}while(a.nextPageToken);return i.forEach(s=>{s.due&&(s.due=window.moment(s.due).add(12,"hour").toISOString()),s.children=i.filter(o=>o.parent==s.id),s.children.length&&s.children.sort((o,c)=>parseInt(o.position)-parseInt(c.position))}),i=i.filter(s=>!s.parent),i}catch(i){return console.error(i),[]}})}function fn(e,t=null,n=null){return I(this,null,function*(){let r=[],i=yield Ar(e);for(let a=0;a<i.length;a++){let s=yield HT(e,i[a].id,t,n);s.forEach(o=>{o.taskListName=i[a].title}),r=[...r,...s]}return r})}function ru(e){return I(this,null,function*(){let t=yield fn(e);t=t.filter(r=>!r.completed);let n=t.filter(r=>!r.due);return t=t.filter(r=>r.due),t=t.sort((r,i)=>new Date(r.due).valueOf()-new Date(i.due).valueOf()),[...t,...n]})}var kp=function(t){let n=new Ip.default;return t.forEach(r=>{n.has(r.due)?n.get(r.due).push(r):n.set(r.due,[r])}),n};function Yu(e){return I(this,null,function*(){let t=yield fn(e);t=t.filter(i=>!i.completed);let n=t.filter(i=>!i.due);t=t.filter(i=>i.due),t=t.sort((i,a)=>new Date(i.due).valueOf()-new Date(a.due).valueOf());let r=kp(t);return r.set("No due date",n),r})}function Qu(e){return I(this,null,function*(){let t=yield fn(e);t=t.filter(i=>i.completed);let n=t.filter(i=>!i.due);t=t.filter(i=>i.due),t=t.sort((i,a)=>new Date(i.due).valueOf()-new Date(a.due).valueOf());let r=kp(t);return r.set("No due date",n),r})}var Ds=yt(require("obsidian"));var nu=class extends Ds.FuzzySuggestModal{constructor(t,n){super(t.app);this.plugin=t,this.taskList=n,this.setPlaceholder("Select a task to complete it")}getItems(){return this.taskList}getItemText(t){let n="		";return t.due&&(n=Ds.moment.utc(t.due).local().format("YYYY-MM-DD")),`${n}	`+t.title}onChooseItem(t,n){return I(this,null,function*(){!(yield Hr(this.plugin,t))||this.app.workspace.getLeavesOfType(pt).forEach(i=>{i.view instanceof Lt&&(i.view.removeTodo(t),i.view.addDone(t),i.view.loadTaskView())})})}};var du=yt(require("path"));var zp=yt(require("obsidian"));function Vr(){}function iu(e){return e()}function Bp(){return Object.create(null)}function Gr(e){e.forEach(iu)}function Os(e){return typeof e=="function"}function Np(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Rp(e){return Object.keys(e).length===0}var CA=new Set;var Lp=!1;function $T(){Lp=!0}function zT(){Lp=!1}function Ie(e,t){e.appendChild(t)}function Ps(e,t,n){e.insertBefore(t,n||null)}function $i(e){e.parentNode&&e.parentNode.removeChild(e)}function au(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function et(e){return document.createElement(e)}function Zn(e){return document.createTextNode(e)}function Bt(){return Zn(" ")}function xr(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function ht(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function WT(e){return Array.from(e.childNodes)}function su(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ou(e,t,n){for(let r=0;r<e.options.length;r+=1){let i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Dp(e){let t=e.querySelector(":checked");return t&&t.__value}var EA=new Map;var zi;function Wi(e){zi=e}function YT(){if(!zi)throw new Error("Function called outside component initialization");return zi}function cu(e){YT().$$.on_mount.push(e)}var ei=[];var Op=[],ti=[],Pp=[],QT=Promise.resolve(),uu=!1;function JT(){uu||(uu=!0,QT.then(Up))}function Yi(e){ti.push(e)}var lu=new Set,ri=0;function Up(){if(ri!==0)return;let e=zi;do{try{for(;ri<ei.length;){let t=ei[ri];ri++,Wi(t),XT(t.$$)}}catch(t){throw ei.length=0,ri=0,t}for(Wi(null),ei.length=0,ri=0;Op.length;)Op.pop()();for(let t=0;t<ti.length;t+=1){let n=ti[t];lu.has(n)||(lu.add(n),n())}ti.length=0}while(ei.length);for(;Pp.length;)Pp.pop()();uu=!1,lu.clear(),Wi(e)}function XT(e){if(e.fragment!==null){e.update(),Gr(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Yi)}}function ZT(e){let t=[],n=[];ti.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),ti=t}var e_=new Set;function t_(e,t){e&&e.i&&(e_.delete(e),e.i(t))}var TA=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var r_=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],_A=new Set([...r_]);function n_(e,t,n,r){let{fragment:i,after_update:a}=e.$$;i&&i.m(t,n),r||Yi(()=>{let s=e.$$.on_mount.map(iu).filter(Os);e.$$.on_destroy?e.$$.on_destroy.push(...s):Gr(s),e.$$.on_mount=[]}),a.forEach(Yi)}function Fp(e,t){let n=e.$$;n.fragment!==null&&(ZT(n.after_update),Gr(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function i_(e,t){e.$$.dirty[0]===-1&&(ei.push(e),JT(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qp(e,t,n,r,i,a,s,o=[-1]){let c=zi;Wi(e);let u=e.$$={fragment:null,ctx:[],props:a,update:Vr,not_equal:i,bound:Bp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Bp(),dirty:o,skip_bound:!1,root:t.target||c.$$.root};s&&s(u.root);let l=!1;if(u.ctx=n?n(e,t.props||{},(f,h,...v)=>{let g=v.length?v[0]:h;return u.ctx&&i(u.ctx[f],u.ctx[f]=g)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](g),l&&i_(e,f)),h}):[],u.update(),l=!0,Gr(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){$T();let f=WT(t.target);u.fragment&&u.fragment.l(f),f.forEach($i)}else u.fragment&&u.fragment.c();t.intro&&t_(e.$$.fragment),n_(e,t.target,t.anchor,t.customElement),zT(),Up()}Wi(c)}var a_;typeof HTMLElement=="function"&&(a_=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(iu).filter(Os);for(let t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){Gr(this.$$.on_disconnect)}$destroy(){Fp(this,1),this.$destroy=Vr}$on(e,t){if(!Os(t))return Vr;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!Rp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});var fu=class{$destroy(){Fp(this,1),this.$destroy=Vr}$on(t,n){if(!Os(n))return Vr;let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{let i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Rp(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var Mp=yt(Vs()),{__extends:SA,__assign:AA,__rest:wA,__decorate:bA,__param:IA,__metadata:kA,__awaiter:Us,__generator:BA,__exportStar:NA,__createBinding:RA,__values:LA,__read:DA,__spread:OA,__spreadArrays:PA,__spreadArray:UA,__await:FA,__asyncGenerator:qA,__asyncDelegator:MA,__asyncValues:VA,__makeTemplateObject:GA,__importStar:KA,__importDefault:jA,__classPrivateFieldGet:HA,__classPrivateFieldSet:$A}=Mp.default;var fw=yt(require("obsidian"));function Vp(e,t,n){let r=e.slice();return r[16]=t[n][0],r[17]=t[n][1],r[18]=t,r[19]=n,r}function Gp(e,t,n){let r=e.slice();return r[20]=t[n][0],r[17]=t[n][1],r[21]=t,r[22]=n,r}function Kp(e){let t,n,r,i,a,s=e[20]+"",o,c,u;function l(){e[14].call(n,e[21],e[22])}return{c(){t=et("div"),n=et("input"),i=Bt(),a=et("label"),o=Zn(s),ht(n,"type","checkbox"),ht(n,"name",r=e[20]),ht(a,"for","taskList")},m(f,h){Ps(f,t,h),Ie(t,n),n.checked=e[17],Ie(t,i),Ie(t,a),Ie(a,o),c||(u=[xr(n,"change",l),xr(n,"change",e[9])],c=!0)},p(f,h){e=f,h&64&&r!==(r=e[20])&&ht(n,"name",r),h&64&&(n.checked=e[17]),h&64&&s!==(s=e[20]+"")&&su(o,s)},d(f){f&&$i(t),c=!1,Gr(u)}}}function jp(e){let t,n,r,i,a=e[16].title+"",s,o,c,u;function l(){e[15].call(n,e[18],e[19])}return{c(){t=et("div"),n=et("input"),r=Bt(),i=et("label"),s=Zn(a),o=Bt(),ht(n,"type","checkbox"),ht(n,"name","task"),ht(n,"id",""),ht(i,"for","task")},m(f,h){Ps(f,t,h),Ie(t,n),n.checked=e[17],Ie(t,r),Ie(t,i),Ie(i,s),Ie(t,o),c||(u=xr(n,"change",l),c=!0)},p(f,h){e=f,h&32&&(n.checked=e[17]),h&32&&a!==(a=e[16].title+"")&&su(s,a)},d(f){f&&$i(t),c=!1,u()}}}function s_(e){let t,n,r,i,a,s,o,c,u,l,f,h,v,g,C,T,_,U,B,G,M,q,J,re,j,le,ae,ue,ke,Be=e[6],fe=[];for(let ye=0;ye<Be.length;ye+=1)fe[ye]=Kp(Gp(e,Be,ye));let Ce=e[5],X=[];for(let ye=0;ye<Ce.length;ye+=1)X[ye]=jp(Vp(e,Ce,ye));return{c(){var ye,qe,ve,Se;t=et("div"),n=et("h1"),n.textContent="Task Selection",r=Bt(),i=et("button"),i.textContent="Insert selected Tasks",a=Bt(),s=et("h3"),s.textContent="Date Range",o=Bt(),c=et("label"),u=Zn(`Start Date
        `),l=et("input"),h=Bt(),v=et("label"),g=Zn(`End Date
        `),C=et("input"),_=Bt(),U=et("select"),B=et("option"),B.textContent="All",G=et("option"),G.textContent="Completed",M=et("option"),M.textContent="Not Completed",q=Bt(),J=et("h3"),J.textContent="Lists",re=Bt();for(let Ae=0;Ae<fe.length;Ae+=1)fe[Ae].c();j=Bt(),le=et("h3"),le.textContent="Tasks",ae=Bt();for(let Ae=0;Ae<X.length;Ae+=1)X[Ae].c();ht(l,"type","date"),ht(l,"name","startDate"),l.value=f=(qe=(ye=e[2])==null?void 0:ye.format("YYYY-MM-DD"))!=null?qe:"",ht(c,"for","startDate"),ht(C,"type","date"),ht(C,"name","endDate"),C.value=T=(Se=(ve=e[3])==null?void 0:ve.format("YYYY-MM-DD"))!=null?Se:"",ht(v,"for","endDate"),B.__value="all",B.value=B.__value,G.__value="completed",G.value=G.__value,M.__value="notCompleted",M.value=M.__value,ht(U,"name",""),ht(U,"id",""),e[4]===void 0&&Yi(()=>e[13].call(U))},m(ye,qe){Ps(ye,t,qe),Ie(t,n),Ie(t,r),Ie(t,i),Ie(t,a),Ie(t,s),Ie(t,o),Ie(t,c),Ie(c,u),Ie(c,l),Ie(t,h),Ie(t,v),Ie(v,g),Ie(v,C),Ie(t,_),Ie(t,U),Ie(U,B),Ie(U,G),Ie(U,M),ou(U,e[4],!0),Ie(t,q),Ie(t,J),Ie(t,re);for(let ve=0;ve<fe.length;ve+=1)fe[ve]&&fe[ve].m(t,null);Ie(t,j),Ie(t,le),Ie(t,ae);for(let ve=0;ve<X.length;ve+=1)X[ve]&&X[ve].m(t,null);ue||(ke=[xr(i,"click",e[12]),xr(l,"change",e[7]),xr(C,"change",e[8]),xr(U,"change",e[13]),xr(U,"change",e[10])],ue=!0)},p(ye,[qe]){var ve,Se,Ae,H;if(qe&4&&f!==(f=(Se=(ve=ye[2])==null?void 0:ve.format("YYYY-MM-DD"))!=null?Se:"")&&(l.value=f),qe&8&&T!==(T=(H=(Ae=ye[3])==null?void 0:Ae.format("YYYY-MM-DD"))!=null?H:"")&&(C.value=T),qe&16&&ou(U,ye[4]),qe&576){Be=ye[6];let de;for(de=0;de<Be.length;de+=1){let $e=Gp(ye,Be,de);fe[de]?fe[de].p($e,qe):(fe[de]=Kp($e),fe[de].c(),fe[de].m(t,j))}for(;de<fe.length;de+=1)fe[de].d(1);fe.length=Be.length}if(qe&32){Ce=ye[5];let de;for(de=0;de<Ce.length;de+=1){let $e=Vp(ye,Ce,de);X[de]?X[de].p($e,qe):(X[de]=jp($e),X[de].c(),X[de].m(t,null))}for(;de<X.length;de+=1)X[de].d(1);X.length=Ce.length}},i:Vr,o:Vr,d(ye){ye&&$i(t),au(fe,ye),au(X,ye),ue=!1,Gr(ke)}}}function o_(e){let t=[];for(let[n,r]of e)t.contains(n.taskListName)||t.push(n.taskListName);return t}function c_(e,t,n){let{plugin:r}=t,{onSubmit:i}=t,{selectInsertTaskModal:a}=t,s=null,o=null,c="notCompleted",u=[],l=[];cu(()=>Us(void 0,void 0,void 0,function*(){n(5,u=(yield fn(r,s,o)).map(B=>[B,!B.completed])),n(6,l=o_(u).map(B=>[B,!0]))}));function f(B){return Us(this,void 0,void 0,function*(){n(2,s=window.moment(B.target.value)),n(5,u=(yield fn(r,s,o)).map(G=>[G,!0]))})}function h(B){return Us(this,void 0,void 0,function*(){n(3,o=window.moment(B.target.value)),n(5,u=(yield fn(r,s,o)).map(G=>[G,!0]))})}function v(B){console.log(B),n(5,u=u.map(([G,M])=>G.taskListName!==B.target.name?[G,M]:[G,B.target.checked]))}function g(){n(5,u=u.map(([B,G])=>{if(c=="all")return[B,!0];if(c=="completed")return[B,B.status==="completed"];if(c=="notCompleted")return[B,B.status!=="completed"]}))}let C=()=>i(u.map(([B,G])=>G?B:null).filter(B=>B!==null),a);function T(){c=Dp(this),n(4,c)}function _(B,G){B[G][1]=this.checked,n(6,l)}function U(B,G){B[G][1]=this.checked,n(5,u)}return e.$$set=B=>{"plugin"in B&&n(11,r=B.plugin),"onSubmit"in B&&n(0,i=B.onSubmit),"selectInsertTaskModal"in B&&n(1,a=B.selectInsertTaskModal)},[i,a,s,o,c,u,l,f,h,v,g,r,C,T,_,U]}var Hp=class extends fu{constructor(t){super();qp(this,t,c_,s_,Np,{plugin:11,onSubmit:0,selectInsertTaskModal:1})}},$p=Hp;var hu=class extends zp.Modal{constructor(t,n){super(t.app);this.plugin=t,this.editor=n}onOpen(){return I(this,null,function*(){let{contentEl:t}=this;new $p({target:t,props:{plugin:this.plugin,selectInsertTaskModal:this,onSubmit:this.onSubmit}})})}onClose(){let{contentEl:t}=this;t.empty()}onSubmit(t,n){t.forEach(r=>{n.editor.replaceRange(gn(r),n.editor.getCursor())}),n.close()}};var u_={googleRefreshToken:"",googleClientId:"",googleClientSecret:"",askConfirmation:!0,refreshInterval:60,showNotice:!0},pu=class extends ni.Plugin{constructor(){super(...arguments);this.showHidden=!1;this.initView=()=>I(this,null,function*(){this.app.workspace.getLeavesOfType(pt).length===0&&(yield this.app.workspace.getRightLeaf(!1).setViewState({type:pt})),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(pt).first())});this.onLayoutReady=()=>I(this,null,function*(){this.app.workspace.on("file-open",t=>I(this,null,function*(){if(!t||t.extension!=="md")return;let n=yield this.app.vault.adapter.read((0,du.normalize)(t.path));if(!n.match("%%"))return;let r=[...n.matchAll(/\- \[[ xX]\] .* %%[A-Za-z0-9]{22}%%/g)],i=!1;for(let a of r){let s=a[0],o=a[0].match(/%%[A-Za-z0-9]{22}%%/)[0].substring(2).slice(0,-2);try{(yield hi(this,o)).status==="completed"?s.indexOf("- [ ]")>-1&&(s=s.replace("- [ ] ","- [x] ")):s.indexOf("- [x] ")>-1&&(s=s.replace("- [x] ","- [ ] "))}catch(c){console.log(c);return}n=n.replace(a[0],s),i=!0}i&&(yield this.app.vault.adapter.write((0,du.normalize)(t.path),n))}))})}onload(){return I(this,null,function*(){yield this.loadSettings(),this.plugin=this,this.app.workspace.onLayoutReady(this.onLayoutReady),this.registerView(pt,r=>new Lt(r,this)),this.addRibbonIcon("check-in-circle","Google Tasks",r=>{this.initView()}),this.registerDomEvent(document,"click",r=>{if(!(r.target instanceof HTMLInputElement))return;let i=r.target;if(!i.classList.contains("task-list-item-checkbox"))return;let s=i.parentElement.parentElement.querySelectorAll(".cm-comment.cm-list-1")[1].textContent;!Gt(this,!1)||(i.checked?$u(this,s):zu(this,s))});let t=()=>I(this,null,function*(){let r=yield ru(this);new nu(this,r).open()});this.addCommand({id:"list-google-tasks",name:"List Google Tasks",checkCallback:r=>{let i=Gt(this.plugin,!1);if(r)return i;!i||t()}}),this.addCommand({id:"create-google-task",name:"Create Google Tasks",checkCallback:r=>{let i=Gt(this,!1);if(r)return i;!i||new yn(this).open()}}),this.addCommand({id:"create-google-task-with-insert",name:"Create Google Tasks and insert it",editorCheckCallback:(r,i,a)=>{let s=Gt(this,!1);if(r)return s;!s||new yn(this,i).open()}});let n=r=>I(this,null,function*(){(yield ru(this)).forEach(a=>{r.replaceRange(gn(a),r.getCursor())})});this.addCommand({id:"insert-uncompleted-google-tasks",name:"Insert Uncompleted Google Tasks",editorCheckCallback:(r,i,a)=>{let s=Gt(this,!1);if(r)return s;!s||n(i)}}),this.addCommand({id:"insert-google-tasks",name:"Insert Google Tasks",editorCheckCallback:(r,i,a)=>{let s=Gt(this,!1);if(r)return s;!s||new hu(this,i).open()}}),this.addCommand({id:"copy-google-refresh-token",name:"Copy Google Refresh Token to Clipboard",callback:()=>{let r=pr();if(r==null||r==""){new ni.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(r).then(function(){new ni.Notice("Token copied")},function(i){new ni.Notice("Could not copy token")})}}),this.addSettingTab(new $s(this.app,this))})}onunload(){this.app.workspace.detachLeavesOfType(pt),this.app.vault.offref(this.openEvent)}loadSettings(){return I(this,null,function*(){this.settings=Object.assign({},u_,yield this.loadData())})}saveSettings(){return I(this,null,function*(){yield this.saveData(this.settings)})}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
